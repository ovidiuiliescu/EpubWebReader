function ye(Vt,ne){for(var Y=0;Y<ne.length;Y++){const X=ne[Y];if(typeof X!="string"&&!Array.isArray(X)){for(const A in X)if(A!=="default"&&!(A in Vt)){const d=Object.getOwnPropertyDescriptor(X,A);d&&Object.defineProperty(Vt,A,d.get?d:{enumerable:!0,get:()=>X[A]})}}}return Object.freeze(Object.defineProperty(Vt,Symbol.toStringTag,{value:"Module"}))}var oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function be(Vt){return Vt&&Vt.__esModule&&Object.prototype.hasOwnProperty.call(Vt,"default")?Vt.default:Vt}function he(Vt){throw new Error('Could not dynamically require "'+Vt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var we={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(Vt,ne){(function(Y){Vt.exports=Y()})(function(){return function Y(X,A,d){function E(C,T){if(!A[C]){if(!X[C]){var _=typeof he=="function"&&he;if(!T&&_)return _(C,!0);if(b)return b(C,!0);var r=new Error("Cannot find module '"+C+"'");throw r.code="MODULE_NOT_FOUND",r}var e=A[C]={exports:{}};X[C][0].call(e.exports,function(u){var t=X[C][1][u];return E(t||u)},e,e.exports,Y,X,A,d)}return A[C].exports}for(var b=typeof he=="function"&&he,f=0;f<d.length;f++)E(d[f]);return E}({1:[function(Y,X,A){var d=Y("./utils"),E=Y("./support"),b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";A.encode=function(f){for(var C,T,_,r,e,u,t,o=[],s=0,l=f.length,a=l,w=d.getTypeOf(f)!=="string";s<f.length;)a=l-s,_=w?(C=f[s++],T=s<l?f[s++]:0,s<l?f[s++]:0):(C=f.charCodeAt(s++),T=s<l?f.charCodeAt(s++):0,s<l?f.charCodeAt(s++):0),r=C>>2,e=(3&C)<<4|T>>4,u=1<a?(15&T)<<2|_>>6:64,t=2<a?63&_:64,o.push(b.charAt(r)+b.charAt(e)+b.charAt(u)+b.charAt(t));return o.join("")},A.decode=function(f){var C,T,_,r,e,u,t=0,o=0,s="data:";if(f.substr(0,s.length)===s)throw new Error("Invalid base64 input, it looks like a data url.");var l,a=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===b.charAt(64)&&a--,f.charAt(f.length-2)===b.charAt(64)&&a--,a%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l=E.uint8array?new Uint8Array(0|a):new Array(0|a);t<f.length;)C=b.indexOf(f.charAt(t++))<<2|(r=b.indexOf(f.charAt(t++)))>>4,T=(15&r)<<4|(e=b.indexOf(f.charAt(t++)))>>2,_=(3&e)<<6|(u=b.indexOf(f.charAt(t++))),l[o++]=C,e!==64&&(l[o++]=T),u!==64&&(l[o++]=_);return l}},{"./support":30,"./utils":32}],2:[function(Y,X,A){var d=Y("./external"),E=Y("./stream/DataWorker"),b=Y("./stream/Crc32Probe"),f=Y("./stream/DataLengthProbe");function C(T,_,r,e,u){this.compressedSize=T,this.uncompressedSize=_,this.crc32=r,this.compression=e,this.compressedContent=u}C.prototype={getContentWorker:function(){var T=new E(d.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),_=this;return T.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),T},getCompressedWorker:function(){return new E(d.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},C.createWorkerFrom=function(T,_,r){return T.pipe(new b).pipe(new f("uncompressedSize")).pipe(_.compressWorker(r)).pipe(new f("compressedSize")).withStreamInfo("compression",_)},X.exports=C},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(Y,X,A){var d=Y("./stream/GenericWorker");A.STORE={magic:"\0\0",compressWorker:function(){return new d("STORE compression")},uncompressWorker:function(){return new d("STORE decompression")}},A.DEFLATE=Y("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(Y,X,A){var d=Y("./utils"),E=function(){for(var b,f=[],C=0;C<256;C++){b=C;for(var T=0;T<8;T++)b=1&b?3988292384^b>>>1:b>>>1;f[C]=b}return f}();X.exports=function(b,f){return b!==void 0&&b.length?d.getTypeOf(b)!=="string"?function(C,T,_,r){var e=E,u=r+_;C^=-1;for(var t=r;t<u;t++)C=C>>>8^e[255&(C^T[t])];return-1^C}(0|f,b,b.length,0):function(C,T,_,r){var e=E,u=r+_;C^=-1;for(var t=r;t<u;t++)C=C>>>8^e[255&(C^T.charCodeAt(t))];return-1^C}(0|f,b,b.length,0):0}},{"./utils":32}],5:[function(Y,X,A){A.base64=!1,A.binary=!1,A.dir=!1,A.createFolders=!0,A.date=null,A.compression=null,A.compressionOptions=null,A.comment=null,A.unixPermissions=null,A.dosPermissions=null},{}],6:[function(Y,X,A){var d=null;d=typeof Promise<"u"?Promise:Y("lie"),X.exports={Promise:d}},{lie:37}],7:[function(Y,X,A){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",E=Y("pako"),b=Y("./utils"),f=Y("./stream/GenericWorker"),C=d?"uint8array":"array";function T(_,r){f.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=r,this.meta={}}A.magic="\b\0",b.inherits(T,f),T.prototype.processChunk=function(_){this.meta=_.meta,this._pako===null&&this._createPako(),this._pako.push(b.transformTo(C,_.data),!1)},T.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},T.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},T.prototype._createPako=function(){this._pako=new E[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(r){_.push({data:r,meta:_.meta})}},A.compressWorker=function(_){return new T("Deflate",_)},A.uncompressWorker=function(){return new T("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(Y,X,A){function d(e,u){var t,o="";for(t=0;t<u;t++)o+=String.fromCharCode(255&e),e>>>=8;return o}function E(e,u,t,o,s,l){var a,w,v=e.file,i=e.compression,p=l!==C.utf8encode,x=b.transformTo("string",l(v.name)),I=b.transformTo("string",C.utf8encode(v.name)),g=v.comment,S=b.transformTo("string",l(g)),y=b.transformTo("string",C.utf8encode(g)),D=I.length!==v.name.length,c=y.length!==g.length,B="",tt="",Z="",st=v.dir,G=v.date,ht={crc32:0,compressedSize:0,uncompressedSize:0};u&&!t||(ht.crc32=e.crc32,ht.compressedSize=e.compressedSize,ht.uncompressedSize=e.uncompressedSize);var W=0;u&&(W|=8),p||!D&&!c||(W|=2048);var K=0,ft=0;st&&(K|=16),s==="UNIX"?(ft=798,K|=function(at,yt){var wt=at;return at||(wt=yt?16893:33204),(65535&wt)<<16}(v.unixPermissions,st)):(ft=20,K|=function(at){return 63&(at||0)}(v.dosPermissions)),a=G.getUTCHours(),a<<=6,a|=G.getUTCMinutes(),a<<=5,a|=G.getUTCSeconds()/2,w=G.getUTCFullYear()-1980,w<<=4,w|=G.getUTCMonth()+1,w<<=5,w|=G.getUTCDate(),D&&(tt=d(1,1)+d(T(x),4)+I,B+="up"+d(tt.length,2)+tt),c&&(Z=d(1,1)+d(T(S),4)+y,B+="uc"+d(Z.length,2)+Z);var lt="";return lt+=`
\0`,lt+=d(W,2),lt+=i.magic,lt+=d(a,2),lt+=d(w,2),lt+=d(ht.crc32,4),lt+=d(ht.compressedSize,4),lt+=d(ht.uncompressedSize,4),lt+=d(x.length,2),lt+=d(B.length,2),{fileRecord:_.LOCAL_FILE_HEADER+lt+x+B,dirRecord:_.CENTRAL_FILE_HEADER+d(ft,2)+lt+d(S.length,2)+"\0\0\0\0"+d(K,4)+d(o,4)+x+B+S}}var b=Y("../utils"),f=Y("../stream/GenericWorker"),C=Y("../utf8"),T=Y("../crc32"),_=Y("../signature");function r(e,u,t,o){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=u,this.zipPlatform=t,this.encodeFileName=o,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}b.inherits(r,f),r.prototype.push=function(e){var u=e.meta.percent||0,t=this.entriesCount,o=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,f.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:t?(u+100*(t-o-1))/t:100}}))},r.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var u=this.streamFiles&&!e.file.dir;if(u){var t=E(e,u,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:t.fileRecord,meta:{percent:0}})}else this.accumulate=!0},r.prototype.closedSource=function(e){this.accumulate=!1;var u=this.streamFiles&&!e.file.dir,t=E(e,u,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(t.dirRecord),u)this.push({data:function(o){return _.DATA_DESCRIPTOR+d(o.crc32,4)+d(o.compressedSize,4)+d(o.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:t.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},r.prototype.flush=function(){for(var e=this.bytesWritten,u=0;u<this.dirRecords.length;u++)this.push({data:this.dirRecords[u],meta:{percent:100}});var t=this.bytesWritten-e,o=function(s,l,a,w,v){var i=b.transformTo("string",v(w));return _.CENTRAL_DIRECTORY_END+"\0\0\0\0"+d(s,2)+d(s,2)+d(l,4)+d(a,4)+d(i.length,2)+i}(this.dirRecords.length,t,e,this.zipComment,this.encodeFileName);this.push({data:o,meta:{percent:100}})},r.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},r.prototype.registerPrevious=function(e){this._sources.push(e);var u=this;return e.on("data",function(t){u.processChunk(t)}),e.on("end",function(){u.closedSource(u.previous.streamInfo),u._sources.length?u.prepareNextSource():u.end()}),e.on("error",function(t){u.error(t)}),this},r.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},r.prototype.error=function(e){var u=this._sources;if(!f.prototype.error.call(this,e))return!1;for(var t=0;t<u.length;t++)try{u[t].error(e)}catch{}return!0},r.prototype.lock=function(){f.prototype.lock.call(this);for(var e=this._sources,u=0;u<e.length;u++)e[u].lock()},X.exports=r},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(Y,X,A){var d=Y("../compressions"),E=Y("./ZipFileWorker");A.generateWorker=function(b,f,C){var T=new E(f.streamFiles,C,f.platform,f.encodeFileName),_=0;try{b.forEach(function(r,e){_++;var u=function(l,a){var w=l||a,v=d[w];if(!v)throw new Error(w+" is not a valid compression method !");return v}(e.options.compression,f.compression),t=e.options.compressionOptions||f.compressionOptions||{},o=e.dir,s=e.date;e._compressWorker(u,t).withStreamInfo("file",{name:r,dir:o,date:s,comment:e.comment||"",unixPermissions:e.unixPermissions,dosPermissions:e.dosPermissions}).pipe(T)}),T.entriesCount=_}catch(r){T.error(r)}return T}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(Y,X,A){function d(){if(!(this instanceof d))return new d;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var E=new d;for(var b in this)typeof this[b]!="function"&&(E[b]=this[b]);return E}}(d.prototype=Y("./object")).loadAsync=Y("./load"),d.support=Y("./support"),d.defaults=Y("./defaults"),d.version="3.10.1",d.loadAsync=function(E,b){return new d().loadAsync(E,b)},d.external=Y("./external"),X.exports=d},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(Y,X,A){var d=Y("./utils"),E=Y("./external"),b=Y("./utf8"),f=Y("./zipEntries"),C=Y("./stream/Crc32Probe"),T=Y("./nodejsUtils");function _(r){return new E.Promise(function(e,u){var t=r.decompressed.getContentWorker().pipe(new C);t.on("error",function(o){u(o)}).on("end",function(){t.streamInfo.crc32!==r.decompressed.crc32?u(new Error("Corrupted zip : CRC32 mismatch")):e()}).resume()})}X.exports=function(r,e){var u=this;return e=d.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:b.utf8decode}),T.isNode&&T.isStream(r)?E.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):d.prepareContent("the loaded zip file",r,!0,e.optimizedBinaryString,e.base64).then(function(t){var o=new f(e);return o.load(t),o}).then(function(t){var o=[E.Promise.resolve(t)],s=t.files;if(e.checkCRC32)for(var l=0;l<s.length;l++)o.push(_(s[l]));return E.Promise.all(o)}).then(function(t){for(var o=t.shift(),s=o.files,l=0;l<s.length;l++){var a=s[l],w=a.fileNameStr,v=d.resolve(a.fileNameStr);u.file(v,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders}),a.dir||(u.file(v).unsafeOriginalName=w)}return o.zipComment.length&&(u.comment=o.zipComment),u})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(Y,X,A){var d=Y("../utils"),E=Y("../stream/GenericWorker");function b(f,C){E.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(C)}d.inherits(b,E),b.prototype._bindStream=function(f){var C=this;(this._stream=f).pause(),f.on("data",function(T){C.push({data:T,meta:{percent:0}})}).on("error",function(T){C.isPaused?this.generatedError=T:C.error(T)}).on("end",function(){C.isPaused?C._upstreamEnded=!0:C.end()})},b.prototype.pause=function(){return!!E.prototype.pause.call(this)&&(this._stream.pause(),!0)},b.prototype.resume=function(){return!!E.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},X.exports=b},{"../stream/GenericWorker":28,"../utils":32}],13:[function(Y,X,A){var d=Y("readable-stream").Readable;function E(b,f,C){d.call(this,f),this._helper=b;var T=this;b.on("data",function(_,r){T.push(_)||T._helper.pause(),C&&C(r)}).on("error",function(_){T.emit("error",_)}).on("end",function(){T.push(null)})}Y("../utils").inherits(E,d),E.prototype._read=function(){this._helper.resume()},X.exports=E},{"../utils":32,"readable-stream":16}],14:[function(Y,X,A){X.exports={isNode:typeof Buffer<"u",newBufferFrom:function(d,E){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(d,E);if(typeof d=="number")throw new Error('The "data" argument must not be a number');return new Buffer(d,E)},allocBuffer:function(d){if(Buffer.alloc)return Buffer.alloc(d);var E=new Buffer(d);return E.fill(0),E},isBuffer:function(d){return Buffer.isBuffer(d)},isStream:function(d){return d&&typeof d.on=="function"&&typeof d.pause=="function"&&typeof d.resume=="function"}}},{}],15:[function(Y,X,A){function d(v,i,p){var x,I=b.getTypeOf(i),g=b.extend(p||{},T);g.date=g.date||new Date,g.compression!==null&&(g.compression=g.compression.toUpperCase()),typeof g.unixPermissions=="string"&&(g.unixPermissions=parseInt(g.unixPermissions,8)),g.unixPermissions&&16384&g.unixPermissions&&(g.dir=!0),g.dosPermissions&&16&g.dosPermissions&&(g.dir=!0),g.dir&&(v=s(v)),g.createFolders&&(x=o(v))&&l.call(this,x,!0);var S=I==="string"&&g.binary===!1&&g.base64===!1;p&&p.binary!==void 0||(g.binary=!S),(i instanceof _&&i.uncompressedSize===0||g.dir||!i||i.length===0)&&(g.base64=!1,g.binary=!0,i="",g.compression="STORE",I="string");var y=null;y=i instanceof _||i instanceof f?i:u.isNode&&u.isStream(i)?new t(v,i):b.prepareContent(v,i,g.binary,g.optimizedBinaryString,g.base64);var D=new r(v,y,g);this.files[v]=D}var E=Y("./utf8"),b=Y("./utils"),f=Y("./stream/GenericWorker"),C=Y("./stream/StreamHelper"),T=Y("./defaults"),_=Y("./compressedObject"),r=Y("./zipObject"),e=Y("./generate"),u=Y("./nodejsUtils"),t=Y("./nodejs/NodejsStreamInputAdapter"),o=function(v){v.slice(-1)==="/"&&(v=v.substring(0,v.length-1));var i=v.lastIndexOf("/");return 0<i?v.substring(0,i):""},s=function(v){return v.slice(-1)!=="/"&&(v+="/"),v},l=function(v,i){return i=i!==void 0?i:T.createFolders,v=s(v),this.files[v]||d.call(this,v,null,{dir:!0,createFolders:i}),this.files[v]};function a(v){return Object.prototype.toString.call(v)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(v){var i,p,x;for(i in this.files)x=this.files[i],(p=i.slice(this.root.length,i.length))&&i.slice(0,this.root.length)===this.root&&v(p,x)},filter:function(v){var i=[];return this.forEach(function(p,x){v(p,x)&&i.push(x)}),i},file:function(v,i,p){if(arguments.length!==1)return v=this.root+v,d.call(this,v,i,p),this;if(a(v)){var x=v;return this.filter(function(g,S){return!S.dir&&x.test(g)})}var I=this.files[this.root+v];return I&&!I.dir?I:null},folder:function(v){if(!v)return this;if(a(v))return this.filter(function(I,g){return g.dir&&v.test(I)});var i=this.root+v,p=l.call(this,i),x=this.clone();return x.root=p.name,x},remove:function(v){v=this.root+v;var i=this.files[v];if(i||(v.slice(-1)!=="/"&&(v+="/"),i=this.files[v]),i&&!i.dir)delete this.files[v];else for(var p=this.filter(function(I,g){return g.name.slice(0,v.length)===v}),x=0;x<p.length;x++)delete this.files[p[x].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(v){var i,p={};try{if((p=b.extend(v||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:E.utf8encode})).type=p.type.toLowerCase(),p.compression=p.compression.toUpperCase(),p.type==="binarystring"&&(p.type="string"),!p.type)throw new Error("No output type specified.");b.checkSupport(p.type),p.platform!=="darwin"&&p.platform!=="freebsd"&&p.platform!=="linux"&&p.platform!=="sunos"||(p.platform="UNIX"),p.platform==="win32"&&(p.platform="DOS");var x=p.comment||this.comment||"";i=e.generateWorker(this,p,x)}catch(I){(i=new f("error")).error(I)}return new C(i,p.type||"string",p.mimeType)},generateAsync:function(v,i){return this.generateInternalStream(v).accumulate(i)},generateNodeStream:function(v,i){return(v=v||{}).type||(v.type="nodebuffer"),this.generateInternalStream(v).toNodejsStream(i)}};X.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(Y,X,A){X.exports=Y("stream")},{stream:void 0}],17:[function(Y,X,A){var d=Y("./DataReader");function E(b){d.call(this,b);for(var f=0;f<this.data.length;f++)b[f]=255&b[f]}Y("../utils").inherits(E,d),E.prototype.byteAt=function(b){return this.data[this.zero+b]},E.prototype.lastIndexOfSignature=function(b){for(var f=b.charCodeAt(0),C=b.charCodeAt(1),T=b.charCodeAt(2),_=b.charCodeAt(3),r=this.length-4;0<=r;--r)if(this.data[r]===f&&this.data[r+1]===C&&this.data[r+2]===T&&this.data[r+3]===_)return r-this.zero;return-1},E.prototype.readAndCheckSignature=function(b){var f=b.charCodeAt(0),C=b.charCodeAt(1),T=b.charCodeAt(2),_=b.charCodeAt(3),r=this.readData(4);return f===r[0]&&C===r[1]&&T===r[2]&&_===r[3]},E.prototype.readData=function(b){if(this.checkOffset(b),b===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,f},X.exports=E},{"../utils":32,"./DataReader":18}],18:[function(Y,X,A){var d=Y("../utils");function E(b){this.data=b,this.length=b.length,this.index=0,this.zero=0}E.prototype={checkOffset:function(b){this.checkIndex(this.index+b)},checkIndex:function(b){if(this.length<this.zero+b||b<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+b+"). Corrupted zip ?")},setIndex:function(b){this.checkIndex(b),this.index=b},skip:function(b){this.setIndex(this.index+b)},byteAt:function(){},readInt:function(b){var f,C=0;for(this.checkOffset(b),f=this.index+b-1;f>=this.index;f--)C=(C<<8)+this.byteAt(f);return this.index+=b,C},readString:function(b){return d.transformTo("string",this.readData(b))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var b=this.readInt(4);return new Date(Date.UTC(1980+(b>>25&127),(b>>21&15)-1,b>>16&31,b>>11&31,b>>5&63,(31&b)<<1))}},X.exports=E},{"../utils":32}],19:[function(Y,X,A){var d=Y("./Uint8ArrayReader");function E(b){d.call(this,b)}Y("../utils").inherits(E,d),E.prototype.readData=function(b){this.checkOffset(b);var f=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,f},X.exports=E},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(Y,X,A){var d=Y("./DataReader");function E(b){d.call(this,b)}Y("../utils").inherits(E,d),E.prototype.byteAt=function(b){return this.data.charCodeAt(this.zero+b)},E.prototype.lastIndexOfSignature=function(b){return this.data.lastIndexOf(b)-this.zero},E.prototype.readAndCheckSignature=function(b){return b===this.readData(4)},E.prototype.readData=function(b){this.checkOffset(b);var f=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,f},X.exports=E},{"../utils":32,"./DataReader":18}],21:[function(Y,X,A){var d=Y("./ArrayReader");function E(b){d.call(this,b)}Y("../utils").inherits(E,d),E.prototype.readData=function(b){if(this.checkOffset(b),b===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+b);return this.index+=b,f},X.exports=E},{"../utils":32,"./ArrayReader":17}],22:[function(Y,X,A){var d=Y("../utils"),E=Y("../support"),b=Y("./ArrayReader"),f=Y("./StringReader"),C=Y("./NodeBufferReader"),T=Y("./Uint8ArrayReader");X.exports=function(_){var r=d.getTypeOf(_);return d.checkSupport(r),r!=="string"||E.uint8array?r==="nodebuffer"?new C(_):E.uint8array?new T(d.transformTo("uint8array",_)):new b(d.transformTo("array",_)):new f(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(Y,X,A){A.LOCAL_FILE_HEADER="PK",A.CENTRAL_FILE_HEADER="PK",A.CENTRAL_DIRECTORY_END="PK",A.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",A.ZIP64_CENTRAL_DIRECTORY_END="PK",A.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(Y,X,A){var d=Y("./GenericWorker"),E=Y("../utils");function b(f){d.call(this,"ConvertWorker to "+f),this.destType=f}E.inherits(b,d),b.prototype.processChunk=function(f){this.push({data:E.transformTo(this.destType,f.data),meta:f.meta})},X.exports=b},{"../utils":32,"./GenericWorker":28}],25:[function(Y,X,A){var d=Y("./GenericWorker"),E=Y("../crc32");function b(){d.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}Y("../utils").inherits(b,d),b.prototype.processChunk=function(f){this.streamInfo.crc32=E(f.data,this.streamInfo.crc32||0),this.push(f)},X.exports=b},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(Y,X,A){var d=Y("../utils"),E=Y("./GenericWorker");function b(f){E.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}d.inherits(b,E),b.prototype.processChunk=function(f){if(f){var C=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=C+f.data.length}E.prototype.processChunk.call(this,f)},X.exports=b},{"../utils":32,"./GenericWorker":28}],27:[function(Y,X,A){var d=Y("../utils"),E=Y("./GenericWorker");function b(f){E.call(this,"DataWorker");var C=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(T){C.dataIsReady=!0,C.data=T,C.max=T&&T.length||0,C.type=d.getTypeOf(T),C.isPaused||C._tickAndRepeat()},function(T){C.error(T)})}d.inherits(b,E),b.prototype.cleanUp=function(){E.prototype.cleanUp.call(this),this.data=null},b.prototype.resume=function(){return!!E.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,d.delay(this._tickAndRepeat,[],this)),!0)},b.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(d.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},b.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,C=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,C);break;case"uint8array":f=this.data.subarray(this.index,C);break;case"array":case"nodebuffer":f=this.data.slice(this.index,C)}return this.index=C,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},X.exports=b},{"../utils":32,"./GenericWorker":28}],28:[function(Y,X,A){function d(E){this.name=E||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}d.prototype={push:function(E){this.emit("data",E)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(E){this.emit("error",E)}return!0},error:function(E){return!this.isFinished&&(this.isPaused?this.generatedError=E:(this.isFinished=!0,this.emit("error",E),this.previous&&this.previous.error(E),this.cleanUp()),!0)},on:function(E,b){return this._listeners[E].push(b),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(E,b){if(this._listeners[E])for(var f=0;f<this._listeners[E].length;f++)this._listeners[E][f].call(this,b)},pipe:function(E){return E.registerPrevious(this)},registerPrevious:function(E){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=E.streamInfo,this.mergeStreamInfo(),this.previous=E;var b=this;return E.on("data",function(f){b.processChunk(f)}),E.on("end",function(){b.end()}),E.on("error",function(f){b.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var E=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),E=!0),this.previous&&this.previous.resume(),!E},flush:function(){},processChunk:function(E){this.push(E)},withStreamInfo:function(E,b){return this.extraStreamInfo[E]=b,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var E in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,E)&&(this.streamInfo[E]=this.extraStreamInfo[E])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var E="Worker "+this.name;return this.previous?this.previous+" -> "+E:E}},X.exports=d},{}],29:[function(Y,X,A){var d=Y("../utils"),E=Y("./ConvertWorker"),b=Y("./GenericWorker"),f=Y("../base64"),C=Y("../support"),T=Y("../external"),_=null;if(C.nodestream)try{_=Y("../nodejs/NodejsStreamOutputAdapter")}catch{}function r(u,t){return new T.Promise(function(o,s){var l=[],a=u._internalType,w=u._outputType,v=u._mimeType;u.on("data",function(i,p){l.push(i),t&&t(p)}).on("error",function(i){l=[],s(i)}).on("end",function(){try{var i=function(p,x,I){switch(p){case"blob":return d.newBlob(d.transformTo("arraybuffer",x),I);case"base64":return f.encode(x);default:return d.transformTo(p,x)}}(w,function(p,x){var I,g=0,S=null,y=0;for(I=0;I<x.length;I++)y+=x[I].length;switch(p){case"string":return x.join("");case"array":return Array.prototype.concat.apply([],x);case"uint8array":for(S=new Uint8Array(y),I=0;I<x.length;I++)S.set(x[I],g),g+=x[I].length;return S;case"nodebuffer":return Buffer.concat(x);default:throw new Error("concat : unsupported type '"+p+"'")}}(a,l),v);o(i)}catch(p){s(p)}l=[]}).resume()})}function e(u,t,o){var s=t;switch(t){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=t,this._mimeType=o,d.checkSupport(s),this._worker=u.pipe(new E(s)),u.lock()}catch(l){this._worker=new b("error"),this._worker.error(l)}}e.prototype={accumulate:function(u){return r(this,u)},on:function(u,t){var o=this;return u==="data"?this._worker.on(u,function(s){t.call(o,s.data,s.meta)}):this._worker.on(u,function(){d.delay(t,arguments,o)}),this},resume:function(){return d.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(u){if(d.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:this._outputType!=="nodebuffer"},u)}},X.exports=e},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(Y,X,A){if(A.base64=!0,A.array=!0,A.string=!0,A.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",A.nodebuffer=typeof Buffer<"u",A.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")A.blob=!1;else{var d=new ArrayBuffer(0);try{A.blob=new Blob([d],{type:"application/zip"}).size===0}catch{try{var E=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);E.append(d),A.blob=E.getBlob("application/zip").size===0}catch{A.blob=!1}}}try{A.nodestream=!!Y("readable-stream").Readable}catch{A.nodestream=!1}},{"readable-stream":16}],31:[function(Y,X,A){for(var d=Y("./utils"),E=Y("./support"),b=Y("./nodejsUtils"),f=Y("./stream/GenericWorker"),C=new Array(256),T=0;T<256;T++)C[T]=252<=T?6:248<=T?5:240<=T?4:224<=T?3:192<=T?2:1;C[254]=C[254]=1;function _(){f.call(this,"utf-8 decode"),this.leftOver=null}function r(){f.call(this,"utf-8 encode")}A.utf8encode=function(e){return E.nodebuffer?b.newBufferFrom(e,"utf-8"):function(u){var t,o,s,l,a,w=u.length,v=0;for(l=0;l<w;l++)(64512&(o=u.charCodeAt(l)))==55296&&l+1<w&&(64512&(s=u.charCodeAt(l+1)))==56320&&(o=65536+(o-55296<<10)+(s-56320),l++),v+=o<128?1:o<2048?2:o<65536?3:4;for(t=E.uint8array?new Uint8Array(v):new Array(v),l=a=0;a<v;l++)(64512&(o=u.charCodeAt(l)))==55296&&l+1<w&&(64512&(s=u.charCodeAt(l+1)))==56320&&(o=65536+(o-55296<<10)+(s-56320),l++),o<128?t[a++]=o:(o<2048?t[a++]=192|o>>>6:(o<65536?t[a++]=224|o>>>12:(t[a++]=240|o>>>18,t[a++]=128|o>>>12&63),t[a++]=128|o>>>6&63),t[a++]=128|63&o);return t}(e)},A.utf8decode=function(e){return E.nodebuffer?d.transformTo("nodebuffer",e).toString("utf-8"):function(u){var t,o,s,l,a=u.length,w=new Array(2*a);for(t=o=0;t<a;)if((s=u[t++])<128)w[o++]=s;else if(4<(l=C[s]))w[o++]=65533,t+=l-1;else{for(s&=l===2?31:l===3?15:7;1<l&&t<a;)s=s<<6|63&u[t++],l--;1<l?w[o++]=65533:s<65536?w[o++]=s:(s-=65536,w[o++]=55296|s>>10&1023,w[o++]=56320|1023&s)}return w.length!==o&&(w.subarray?w=w.subarray(0,o):w.length=o),d.applyFromCharCode(w)}(e=d.transformTo(E.uint8array?"uint8array":"array",e))},d.inherits(_,f),_.prototype.processChunk=function(e){var u=d.transformTo(E.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(E.uint8array){var t=u;(u=new Uint8Array(t.length+this.leftOver.length)).set(this.leftOver,0),u.set(t,this.leftOver.length)}else u=this.leftOver.concat(u);this.leftOver=null}var o=function(l,a){var w;for((a=a||l.length)>l.length&&(a=l.length),w=a-1;0<=w&&(192&l[w])==128;)w--;return w<0||w===0?a:w+C[l[w]]>a?w:a}(u),s=u;o!==u.length&&(E.uint8array?(s=u.subarray(0,o),this.leftOver=u.subarray(o,u.length)):(s=u.slice(0,o),this.leftOver=u.slice(o,u.length))),this.push({data:A.utf8decode(s),meta:e.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:A.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},A.Utf8DecodeWorker=_,d.inherits(r,f),r.prototype.processChunk=function(e){this.push({data:A.utf8encode(e.data),meta:e.meta})},A.Utf8EncodeWorker=r},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(Y,X,A){var d=Y("./support"),E=Y("./base64"),b=Y("./nodejsUtils"),f=Y("./external");function C(t){return t}function T(t,o){for(var s=0;s<t.length;++s)o[s]=255&t.charCodeAt(s);return o}Y("setimmediate"),A.newBlob=function(t,o){A.checkSupport("blob");try{return new Blob([t],{type:o})}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return s.append(t),s.getBlob(o)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(t,o,s){var l=[],a=0,w=t.length;if(w<=s)return String.fromCharCode.apply(null,t);for(;a<w;)o==="array"||o==="nodebuffer"?l.push(String.fromCharCode.apply(null,t.slice(a,Math.min(a+s,w)))):l.push(String.fromCharCode.apply(null,t.subarray(a,Math.min(a+s,w)))),a+=s;return l.join("")},stringifyByChar:function(t){for(var o="",s=0;s<t.length;s++)o+=String.fromCharCode(t[s]);return o},applyCanBeUsed:{uint8array:function(){try{return d.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return d.nodebuffer&&String.fromCharCode.apply(null,b.allocBuffer(1)).length===1}catch{return!1}}()}};function r(t){var o=65536,s=A.getTypeOf(t),l=!0;if(s==="uint8array"?l=_.applyCanBeUsed.uint8array:s==="nodebuffer"&&(l=_.applyCanBeUsed.nodebuffer),l)for(;1<o;)try{return _.stringifyByChunk(t,s,o)}catch{o=Math.floor(o/2)}return _.stringifyByChar(t)}function e(t,o){for(var s=0;s<t.length;s++)o[s]=t[s];return o}A.applyFromCharCode=r;var u={};u.string={string:C,array:function(t){return T(t,new Array(t.length))},arraybuffer:function(t){return u.string.uint8array(t).buffer},uint8array:function(t){return T(t,new Uint8Array(t.length))},nodebuffer:function(t){return T(t,b.allocBuffer(t.length))}},u.array={string:r,array:C,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return b.newBufferFrom(t)}},u.arraybuffer={string:function(t){return r(new Uint8Array(t))},array:function(t){return e(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:C,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return b.newBufferFrom(new Uint8Array(t))}},u.uint8array={string:r,array:function(t){return e(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:C,nodebuffer:function(t){return b.newBufferFrom(t)}},u.nodebuffer={string:r,array:function(t){return e(t,new Array(t.length))},arraybuffer:function(t){return u.nodebuffer.uint8array(t).buffer},uint8array:function(t){return e(t,new Uint8Array(t.length))},nodebuffer:C},A.transformTo=function(t,o){if(o=o||"",!t)return o;A.checkSupport(t);var s=A.getTypeOf(o);return u[s][t](o)},A.resolve=function(t){for(var o=t.split("/"),s=[],l=0;l<o.length;l++){var a=o[l];a==="."||a===""&&l!==0&&l!==o.length-1||(a===".."?s.pop():s.push(a))}return s.join("/")},A.getTypeOf=function(t){return typeof t=="string"?"string":Object.prototype.toString.call(t)==="[object Array]"?"array":d.nodebuffer&&b.isBuffer(t)?"nodebuffer":d.uint8array&&t instanceof Uint8Array?"uint8array":d.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},A.checkSupport=function(t){if(!d[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},A.MAX_VALUE_16BITS=65535,A.MAX_VALUE_32BITS=-1,A.pretty=function(t){var o,s,l="";for(s=0;s<(t||"").length;s++)l+="\\x"+((o=t.charCodeAt(s))<16?"0":"")+o.toString(16).toUpperCase();return l},A.delay=function(t,o,s){setImmediate(function(){t.apply(s||null,o||[])})},A.inherits=function(t,o){function s(){}s.prototype=o.prototype,t.prototype=new s},A.extend=function(){var t,o,s={};for(t=0;t<arguments.length;t++)for(o in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],o)&&s[o]===void 0&&(s[o]=arguments[t][o]);return s},A.prepareContent=function(t,o,s,l,a){return f.Promise.resolve(o).then(function(w){return d.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new f.Promise(function(v,i){var p=new FileReader;p.onload=function(x){v(x.target.result)},p.onerror=function(x){i(x.target.error)},p.readAsArrayBuffer(w)}):w}).then(function(w){var v=A.getTypeOf(w);return v?(v==="arraybuffer"?w=A.transformTo("uint8array",w):v==="string"&&(a?w=E.decode(w):s&&l!==!0&&(w=function(i){return T(i,d.uint8array?new Uint8Array(i.length):new Array(i.length))}(w))),w):f.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(Y,X,A){var d=Y("./reader/readerFor"),E=Y("./utils"),b=Y("./signature"),f=Y("./zipEntry"),C=Y("./support");function T(_){this.files=[],this.loadOptions=_}T.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var r=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+E.pretty(r)+", expected "+E.pretty(_)+")")}},isSignature:function(_,r){var e=this.reader.index;this.reader.setIndex(_);var u=this.reader.readString(4)===r;return this.reader.setIndex(e),u},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),r=C.uint8array?"uint8array":"array",e=E.transformTo(r,_);this.zipComment=this.loadOptions.decodeFileName(e)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,r,e,u=this.zip64EndOfCentralSize-44;0<u;)_=this.reader.readInt(2),r=this.reader.readInt(4),e=this.reader.readData(r),this.zip64ExtensibleData[_]={id:_,length:r,value:e}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,r;for(_=0;_<this.files.length;_++)r=this.files[_],this.reader.setIndex(r.localHeaderOffset),this.checkSignature(b.LOCAL_FILE_HEADER),r.readLocalPart(this.reader),r.handleUTF8(),r.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(b.CENTRAL_FILE_HEADER);)(_=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(b.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,b.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var r=_;if(this.checkSignature(b.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===E.MAX_VALUE_16BITS||this.diskWithCentralDirStart===E.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===E.MAX_VALUE_16BITS||this.centralDirRecords===E.MAX_VALUE_16BITS||this.centralDirSize===E.MAX_VALUE_32BITS||this.centralDirOffset===E.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(b.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(b.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,b.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(b.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(b.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var e=this.centralDirOffset+this.centralDirSize;this.zip64&&(e+=20,e+=12+this.zip64EndOfCentralSize);var u=r-e;if(0<u)this.isSignature(r,b.CENTRAL_FILE_HEADER)||(this.reader.zero=u);else if(u<0)throw new Error("Corrupted zip: missing "+Math.abs(u)+" bytes.")},prepareReader:function(_){this.reader=d(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},X.exports=T},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(Y,X,A){var d=Y("./reader/readerFor"),E=Y("./utils"),b=Y("./compressedObject"),f=Y("./crc32"),C=Y("./utf8"),T=Y("./compressions"),_=Y("./support");function r(e,u){this.options=e,this.loadOptions=u}r.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(e){var u,t;if(e.skip(22),this.fileNameLength=e.readInt(2),t=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(t),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((u=function(o){for(var s in T)if(Object.prototype.hasOwnProperty.call(T,s)&&T[s].magic===o)return T[s];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+E.pretty(this.compressionMethod)+" unknown (inner file : "+E.transformTo("string",this.fileName)+")");this.decompressed=new b(this.compressedSize,this.uncompressedSize,this.crc32,u,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var u=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(u),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),e==0&&(this.dosPermissions=63&this.externalFileAttributes),e==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=d(this.extraFields[1].value);this.uncompressedSize===E.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===E.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===E.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===E.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var u,t,o,s=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<s;)u=e.readInt(2),t=e.readInt(2),o=e.readData(t),this.extraFields[u]={id:u,length:t,value:o};e.setIndex(s)},handleUTF8:function(){var e=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=C.utf8decode(this.fileName),this.fileCommentStr=C.utf8decode(this.fileComment);else{var u=this.findExtraFieldUnicodePath();if(u!==null)this.fileNameStr=u;else{var t=E.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(t)}var o=this.findExtraFieldUnicodeComment();if(o!==null)this.fileCommentStr=o;else{var s=E.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var u=d(e.value);return u.readInt(1)!==1||f(this.fileName)!==u.readInt(4)?null:C.utf8decode(u.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var u=d(e.value);return u.readInt(1)!==1||f(this.fileComment)!==u.readInt(4)?null:C.utf8decode(u.readData(e.length-5))}return null}},X.exports=r},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(Y,X,A){function d(u,t,o){this.name=u,this.dir=o.dir,this.date=o.date,this.comment=o.comment,this.unixPermissions=o.unixPermissions,this.dosPermissions=o.dosPermissions,this._data=t,this._dataBinary=o.binary,this.options={compression:o.compression,compressionOptions:o.compressionOptions}}var E=Y("./stream/StreamHelper"),b=Y("./stream/DataWorker"),f=Y("./utf8"),C=Y("./compressedObject"),T=Y("./stream/GenericWorker");d.prototype={internalStream:function(u){var t=null,o="string";try{if(!u)throw new Error("No output type specified.");var s=(o=u.toLowerCase())==="string"||o==="text";o!=="binarystring"&&o!=="text"||(o="string"),t=this._decompressWorker();var l=!this._dataBinary;l&&!s&&(t=t.pipe(new f.Utf8EncodeWorker)),!l&&s&&(t=t.pipe(new f.Utf8DecodeWorker))}catch(a){(t=new T("error")).error(a)}return new E(t,o,"")},async:function(u,t){return this.internalStream(u).accumulate(t)},nodeStream:function(u,t){return this.internalStream(u||"nodebuffer").toNodejsStream(t)},_compressWorker:function(u,t){if(this._data instanceof C&&this._data.compression.magic===u.magic)return this._data.getCompressedWorker();var o=this._decompressWorker();return this._dataBinary||(o=o.pipe(new f.Utf8EncodeWorker)),C.createWorkerFrom(o,u,t)},_decompressWorker:function(){return this._data instanceof C?this._data.getContentWorker():this._data instanceof T?this._data:new b(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],r=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},e=0;e<_.length;e++)d.prototype[_[e]]=r;X.exports=d},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(Y,X,A){(function(d){var E,b,f=d.MutationObserver||d.WebKitMutationObserver;if(f){var C=0,T=new f(u),_=d.document.createTextNode("");T.observe(_,{characterData:!0}),E=function(){_.data=C=++C%2}}else if(d.setImmediate||d.MessageChannel===void 0)E="document"in d&&"onreadystatechange"in d.document.createElement("script")?function(){var t=d.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},d.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var r=new d.MessageChannel;r.port1.onmessage=u,E=function(){r.port2.postMessage(0)}}var e=[];function u(){var t,o;b=!0;for(var s=e.length;s;){for(o=e,e=[],t=-1;++t<s;)o[t]();s=e.length}b=!1}X.exports=function(t){e.push(t)!==1||b||E()}}).call(this,typeof oe<"u"?oe:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(Y,X,A){var d=Y("immediate");function E(){}var b={},f=["REJECTED"],C=["FULFILLED"],T=["PENDING"];function _(s){if(typeof s!="function")throw new TypeError("resolver must be a function");this.state=T,this.queue=[],this.outcome=void 0,s!==E&&t(this,s)}function r(s,l,a){this.promise=s,typeof l=="function"&&(this.onFulfilled=l,this.callFulfilled=this.otherCallFulfilled),typeof a=="function"&&(this.onRejected=a,this.callRejected=this.otherCallRejected)}function e(s,l,a){d(function(){var w;try{w=l(a)}catch(v){return b.reject(s,v)}w===s?b.reject(s,new TypeError("Cannot resolve promise with itself")):b.resolve(s,w)})}function u(s){var l=s&&s.then;if(s&&(typeof s=="object"||typeof s=="function")&&typeof l=="function")return function(){l.apply(s,arguments)}}function t(s,l){var a=!1;function w(p){a||(a=!0,b.reject(s,p))}function v(p){a||(a=!0,b.resolve(s,p))}var i=o(function(){l(v,w)});i.status==="error"&&w(i.value)}function o(s,l){var a={};try{a.value=s(l),a.status="success"}catch(w){a.status="error",a.value=w}return a}(X.exports=_).prototype.finally=function(s){if(typeof s!="function")return this;var l=this.constructor;return this.then(function(a){return l.resolve(s()).then(function(){return a})},function(a){return l.resolve(s()).then(function(){throw a})})},_.prototype.catch=function(s){return this.then(null,s)},_.prototype.then=function(s,l){if(typeof s!="function"&&this.state===C||typeof l!="function"&&this.state===f)return this;var a=new this.constructor(E);return this.state!==T?e(a,this.state===C?s:l,this.outcome):this.queue.push(new r(a,s,l)),a},r.prototype.callFulfilled=function(s){b.resolve(this.promise,s)},r.prototype.otherCallFulfilled=function(s){e(this.promise,this.onFulfilled,s)},r.prototype.callRejected=function(s){b.reject(this.promise,s)},r.prototype.otherCallRejected=function(s){e(this.promise,this.onRejected,s)},b.resolve=function(s,l){var a=o(u,l);if(a.status==="error")return b.reject(s,a.value);var w=a.value;if(w)t(s,w);else{s.state=C,s.outcome=l;for(var v=-1,i=s.queue.length;++v<i;)s.queue[v].callFulfilled(l)}return s},b.reject=function(s,l){s.state=f,s.outcome=l;for(var a=-1,w=s.queue.length;++a<w;)s.queue[a].callRejected(l);return s},_.resolve=function(s){return s instanceof this?s:b.resolve(new this(E),s)},_.reject=function(s){var l=new this(E);return b.reject(l,s)},_.all=function(s){var l=this;if(Object.prototype.toString.call(s)!=="[object Array]")return this.reject(new TypeError("must be an array"));var a=s.length,w=!1;if(!a)return this.resolve([]);for(var v=new Array(a),i=0,p=-1,x=new this(E);++p<a;)I(s[p],p);return x;function I(g,S){l.resolve(g).then(function(y){v[S]=y,++i!==a||w||(w=!0,b.resolve(x,v))},function(y){w||(w=!0,b.reject(x,y))})}},_.race=function(s){var l=this;if(Object.prototype.toString.call(s)!=="[object Array]")return this.reject(new TypeError("must be an array"));var a=s.length,w=!1;if(!a)return this.resolve([]);for(var v=-1,i=new this(E);++v<a;)p=s[v],l.resolve(p).then(function(x){w||(w=!0,b.resolve(i,x))},function(x){w||(w=!0,b.reject(i,x))});var p;return i}},{immediate:36}],38:[function(Y,X,A){var d={};(0,Y("./lib/utils/common").assign)(d,Y("./lib/deflate"),Y("./lib/inflate"),Y("./lib/zlib/constants")),X.exports=d},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(Y,X,A){var d=Y("./zlib/deflate"),E=Y("./utils/common"),b=Y("./utils/strings"),f=Y("./zlib/messages"),C=Y("./zlib/zstream"),T=Object.prototype.toString,_=0,r=-1,e=0,u=8;function t(s){if(!(this instanceof t))return new t(s);this.options=E.assign({level:r,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:e,to:""},s||{});var l=this.options;l.raw&&0<l.windowBits?l.windowBits=-l.windowBits:l.gzip&&0<l.windowBits&&l.windowBits<16&&(l.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new C,this.strm.avail_out=0;var a=d.deflateInit2(this.strm,l.level,l.method,l.windowBits,l.memLevel,l.strategy);if(a!==_)throw new Error(f[a]);if(l.header&&d.deflateSetHeader(this.strm,l.header),l.dictionary){var w;if(w=typeof l.dictionary=="string"?b.string2buf(l.dictionary):T.call(l.dictionary)==="[object ArrayBuffer]"?new Uint8Array(l.dictionary):l.dictionary,(a=d.deflateSetDictionary(this.strm,w))!==_)throw new Error(f[a]);this._dict_set=!0}}function o(s,l){var a=new t(l);if(a.push(s,!0),a.err)throw a.msg||f[a.err];return a.result}t.prototype.push=function(s,l){var a,w,v=this.strm,i=this.options.chunkSize;if(this.ended)return!1;w=l===~~l?l:l===!0?4:0,typeof s=="string"?v.input=b.string2buf(s):T.call(s)==="[object ArrayBuffer]"?v.input=new Uint8Array(s):v.input=s,v.next_in=0,v.avail_in=v.input.length;do{if(v.avail_out===0&&(v.output=new E.Buf8(i),v.next_out=0,v.avail_out=i),(a=d.deflate(v,w))!==1&&a!==_)return this.onEnd(a),!(this.ended=!0);v.avail_out!==0&&(v.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(b.buf2binstring(E.shrinkBuf(v.output,v.next_out))):this.onData(E.shrinkBuf(v.output,v.next_out)))}while((0<v.avail_in||v.avail_out===0)&&a!==1);return w===4?(a=d.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===_):w!==2||(this.onEnd(_),!(v.avail_out=0))},t.prototype.onData=function(s){this.chunks.push(s)},t.prototype.onEnd=function(s){s===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=E.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg},A.Deflate=t,A.deflate=o,A.deflateRaw=function(s,l){return(l=l||{}).raw=!0,o(s,l)},A.gzip=function(s,l){return(l=l||{}).gzip=!0,o(s,l)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(Y,X,A){var d=Y("./zlib/inflate"),E=Y("./utils/common"),b=Y("./utils/strings"),f=Y("./zlib/constants"),C=Y("./zlib/messages"),T=Y("./zlib/zstream"),_=Y("./zlib/gzheader"),r=Object.prototype.toString;function e(t){if(!(this instanceof e))return new e(t);this.options=E.assign({chunkSize:16384,windowBits:0,to:""},t||{});var o=this.options;o.raw&&0<=o.windowBits&&o.windowBits<16&&(o.windowBits=-o.windowBits,o.windowBits===0&&(o.windowBits=-15)),!(0<=o.windowBits&&o.windowBits<16)||t&&t.windowBits||(o.windowBits+=32),15<o.windowBits&&o.windowBits<48&&!(15&o.windowBits)&&(o.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new T,this.strm.avail_out=0;var s=d.inflateInit2(this.strm,o.windowBits);if(s!==f.Z_OK)throw new Error(C[s]);this.header=new _,d.inflateGetHeader(this.strm,this.header)}function u(t,o){var s=new e(o);if(s.push(t,!0),s.err)throw s.msg||C[s.err];return s.result}e.prototype.push=function(t,o){var s,l,a,w,v,i,p=this.strm,x=this.options.chunkSize,I=this.options.dictionary,g=!1;if(this.ended)return!1;l=o===~~o?o:o===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof t=="string"?p.input=b.binstring2buf(t):r.call(t)==="[object ArrayBuffer]"?p.input=new Uint8Array(t):p.input=t,p.next_in=0,p.avail_in=p.input.length;do{if(p.avail_out===0&&(p.output=new E.Buf8(x),p.next_out=0,p.avail_out=x),(s=d.inflate(p,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&I&&(i=typeof I=="string"?b.string2buf(I):r.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,s=d.inflateSetDictionary(this.strm,i)),s===f.Z_BUF_ERROR&&g===!0&&(s=f.Z_OK,g=!1),s!==f.Z_STREAM_END&&s!==f.Z_OK)return this.onEnd(s),!(this.ended=!0);p.next_out&&(p.avail_out!==0&&s!==f.Z_STREAM_END&&(p.avail_in!==0||l!==f.Z_FINISH&&l!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(a=b.utf8border(p.output,p.next_out),w=p.next_out-a,v=b.buf2string(p.output,a),p.next_out=w,p.avail_out=x-w,w&&E.arraySet(p.output,p.output,a,w,0),this.onData(v)):this.onData(E.shrinkBuf(p.output,p.next_out)))),p.avail_in===0&&p.avail_out===0&&(g=!0)}while((0<p.avail_in||p.avail_out===0)&&s!==f.Z_STREAM_END);return s===f.Z_STREAM_END&&(l=f.Z_FINISH),l===f.Z_FINISH?(s=d.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===f.Z_OK):l!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(p.avail_out=0))},e.prototype.onData=function(t){this.chunks.push(t)},e.prototype.onEnd=function(t){t===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=E.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},A.Inflate=e,A.inflate=u,A.inflateRaw=function(t,o){return(o=o||{}).raw=!0,u(t,o)},A.ungzip=u},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(Y,X,A){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";A.assign=function(f){for(var C=Array.prototype.slice.call(arguments,1);C.length;){var T=C.shift();if(T){if(typeof T!="object")throw new TypeError(T+"must be non-object");for(var _ in T)T.hasOwnProperty(_)&&(f[_]=T[_])}}return f},A.shrinkBuf=function(f,C){return f.length===C?f:f.subarray?f.subarray(0,C):(f.length=C,f)};var E={arraySet:function(f,C,T,_,r){if(C.subarray&&f.subarray)f.set(C.subarray(T,T+_),r);else for(var e=0;e<_;e++)f[r+e]=C[T+e]},flattenChunks:function(f){var C,T,_,r,e,u;for(C=_=0,T=f.length;C<T;C++)_+=f[C].length;for(u=new Uint8Array(_),C=r=0,T=f.length;C<T;C++)e=f[C],u.set(e,r),r+=e.length;return u}},b={arraySet:function(f,C,T,_,r){for(var e=0;e<_;e++)f[r+e]=C[T+e]},flattenChunks:function(f){return[].concat.apply([],f)}};A.setTyped=function(f){f?(A.Buf8=Uint8Array,A.Buf16=Uint16Array,A.Buf32=Int32Array,A.assign(A,E)):(A.Buf8=Array,A.Buf16=Array,A.Buf32=Array,A.assign(A,b))},A.setTyped(d)},{}],42:[function(Y,X,A){var d=Y("./common"),E=!0,b=!0;try{String.fromCharCode.apply(null,[0])}catch{E=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{b=!1}for(var f=new d.Buf8(256),C=0;C<256;C++)f[C]=252<=C?6:248<=C?5:240<=C?4:224<=C?3:192<=C?2:1;function T(_,r){if(r<65537&&(_.subarray&&b||!_.subarray&&E))return String.fromCharCode.apply(null,d.shrinkBuf(_,r));for(var e="",u=0;u<r;u++)e+=String.fromCharCode(_[u]);return e}f[254]=f[254]=1,A.string2buf=function(_){var r,e,u,t,o,s=_.length,l=0;for(t=0;t<s;t++)(64512&(e=_.charCodeAt(t)))==55296&&t+1<s&&(64512&(u=_.charCodeAt(t+1)))==56320&&(e=65536+(e-55296<<10)+(u-56320),t++),l+=e<128?1:e<2048?2:e<65536?3:4;for(r=new d.Buf8(l),t=o=0;o<l;t++)(64512&(e=_.charCodeAt(t)))==55296&&t+1<s&&(64512&(u=_.charCodeAt(t+1)))==56320&&(e=65536+(e-55296<<10)+(u-56320),t++),e<128?r[o++]=e:(e<2048?r[o++]=192|e>>>6:(e<65536?r[o++]=224|e>>>12:(r[o++]=240|e>>>18,r[o++]=128|e>>>12&63),r[o++]=128|e>>>6&63),r[o++]=128|63&e);return r},A.buf2binstring=function(_){return T(_,_.length)},A.binstring2buf=function(_){for(var r=new d.Buf8(_.length),e=0,u=r.length;e<u;e++)r[e]=_.charCodeAt(e);return r},A.buf2string=function(_,r){var e,u,t,o,s=r||_.length,l=new Array(2*s);for(e=u=0;e<s;)if((t=_[e++])<128)l[u++]=t;else if(4<(o=f[t]))l[u++]=65533,e+=o-1;else{for(t&=o===2?31:o===3?15:7;1<o&&e<s;)t=t<<6|63&_[e++],o--;1<o?l[u++]=65533:t<65536?l[u++]=t:(t-=65536,l[u++]=55296|t>>10&1023,l[u++]=56320|1023&t)}return T(l,u)},A.utf8border=function(_,r){var e;for((r=r||_.length)>_.length&&(r=_.length),e=r-1;0<=e&&(192&_[e])==128;)e--;return e<0||e===0?r:e+f[_[e]]>r?e:r}},{"./common":41}],43:[function(Y,X,A){X.exports=function(d,E,b,f){for(var C=65535&d|0,T=d>>>16&65535|0,_=0;b!==0;){for(b-=_=2e3<b?2e3:b;T=T+(C=C+E[f++]|0)|0,--_;);C%=65521,T%=65521}return C|T<<16|0}},{}],44:[function(Y,X,A){X.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(Y,X,A){var d=function(){for(var E,b=[],f=0;f<256;f++){E=f;for(var C=0;C<8;C++)E=1&E?3988292384^E>>>1:E>>>1;b[f]=E}return b}();X.exports=function(E,b,f,C){var T=d,_=C+f;E^=-1;for(var r=C;r<_;r++)E=E>>>8^T[255&(E^b[r])];return-1^E}},{}],46:[function(Y,X,A){var d,E=Y("../utils/common"),b=Y("./trees"),f=Y("./adler32"),C=Y("./crc32"),T=Y("./messages"),_=0,r=4,e=0,u=-2,t=-1,o=4,s=2,l=8,a=9,w=286,v=30,i=19,p=2*w+1,x=15,I=3,g=258,S=g+I+1,y=42,D=113,c=1,B=2,tt=3,Z=4;function st(h,j){return h.msg=T[j],j}function G(h){return(h<<1)-(4<h?9:0)}function ht(h){for(var j=h.length;0<=--j;)h[j]=0}function W(h){var j=h.state,U=j.pending;U>h.avail_out&&(U=h.avail_out),U!==0&&(E.arraySet(h.output,j.pending_buf,j.pending_out,U,h.next_out),h.next_out+=U,j.pending_out+=U,h.total_out+=U,h.avail_out-=U,j.pending-=U,j.pending===0&&(j.pending_out=0))}function K(h,j){b._tr_flush_block(h,0<=h.block_start?h.block_start:-1,h.strstart-h.block_start,j),h.block_start=h.strstart,W(h.strm)}function ft(h,j){h.pending_buf[h.pending++]=j}function lt(h,j){h.pending_buf[h.pending++]=j>>>8&255,h.pending_buf[h.pending++]=255&j}function at(h,j){var U,R,P=h.max_chain_length,F=h.strstart,nt=h.prev_length,it=h.nice_match,n=h.strstart>h.w_size-S?h.strstart-(h.w_size-S):0,m=h.window,O=h.w_mask,k=h.prev,V=h.strstart+g,$=m[F+nt-1],rt=m[F+nt];h.prev_length>=h.good_match&&(P>>=2),it>h.lookahead&&(it=h.lookahead);do if(m[(U=j)+nt]===rt&&m[U+nt-1]===$&&m[U]===m[F]&&m[++U]===m[F+1]){F+=2,U++;do;while(m[++F]===m[++U]&&m[++F]===m[++U]&&m[++F]===m[++U]&&m[++F]===m[++U]&&m[++F]===m[++U]&&m[++F]===m[++U]&&m[++F]===m[++U]&&m[++F]===m[++U]&&F<V);if(R=g-(V-F),F=V-g,nt<R){if(h.match_start=j,it<=(nt=R))break;$=m[F+nt-1],rt=m[F+nt]}}while((j=k[j&O])>n&&--P!=0);return nt<=h.lookahead?nt:h.lookahead}function yt(h){var j,U,R,P,F,nt,it,n,m,O,k=h.w_size;do{if(P=h.window_size-h.lookahead-h.strstart,h.strstart>=k+(k-S)){for(E.arraySet(h.window,h.window,k,k,0),h.match_start-=k,h.strstart-=k,h.block_start-=k,j=U=h.hash_size;R=h.head[--j],h.head[j]=k<=R?R-k:0,--U;);for(j=U=k;R=h.prev[--j],h.prev[j]=k<=R?R-k:0,--U;);P+=k}if(h.strm.avail_in===0)break;if(nt=h.strm,it=h.window,n=h.strstart+h.lookahead,m=P,O=void 0,O=nt.avail_in,m<O&&(O=m),U=O===0?0:(nt.avail_in-=O,E.arraySet(it,nt.input,nt.next_in,O,n),nt.state.wrap===1?nt.adler=f(nt.adler,it,O,n):nt.state.wrap===2&&(nt.adler=C(nt.adler,it,O,n)),nt.next_in+=O,nt.total_in+=O,O),h.lookahead+=U,h.lookahead+h.insert>=I)for(F=h.strstart-h.insert,h.ins_h=h.window[F],h.ins_h=(h.ins_h<<h.hash_shift^h.window[F+1])&h.hash_mask;h.insert&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[F+I-1])&h.hash_mask,h.prev[F&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=F,F++,h.insert--,!(h.lookahead+h.insert<I)););}while(h.lookahead<S&&h.strm.avail_in!==0)}function wt(h,j){for(var U,R;;){if(h.lookahead<S){if(yt(h),h.lookahead<S&&j===_)return c;if(h.lookahead===0)break}if(U=0,h.lookahead>=I&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+I-1])&h.hash_mask,U=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),U!==0&&h.strstart-U<=h.w_size-S&&(h.match_length=at(h,U)),h.match_length>=I)if(R=b._tr_tally(h,h.strstart-h.match_start,h.match_length-I),h.lookahead-=h.match_length,h.match_length<=h.max_lazy_match&&h.lookahead>=I){for(h.match_length--;h.strstart++,h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+I-1])&h.hash_mask,U=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart,--h.match_length!=0;);h.strstart++}else h.strstart+=h.match_length,h.match_length=0,h.ins_h=h.window[h.strstart],h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+1])&h.hash_mask;else R=b._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++;if(R&&(K(h,!1),h.strm.avail_out===0))return c}return h.insert=h.strstart<I-1?h.strstart:I-1,j===r?(K(h,!0),h.strm.avail_out===0?tt:Z):h.last_lit&&(K(h,!1),h.strm.avail_out===0)?c:B}function bt(h,j){for(var U,R,P;;){if(h.lookahead<S){if(yt(h),h.lookahead<S&&j===_)return c;if(h.lookahead===0)break}if(U=0,h.lookahead>=I&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+I-1])&h.hash_mask,U=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),h.prev_length=h.match_length,h.prev_match=h.match_start,h.match_length=I-1,U!==0&&h.prev_length<h.max_lazy_match&&h.strstart-U<=h.w_size-S&&(h.match_length=at(h,U),h.match_length<=5&&(h.strategy===1||h.match_length===I&&4096<h.strstart-h.match_start)&&(h.match_length=I-1)),h.prev_length>=I&&h.match_length<=h.prev_length){for(P=h.strstart+h.lookahead-I,R=b._tr_tally(h,h.strstart-1-h.prev_match,h.prev_length-I),h.lookahead-=h.prev_length-1,h.prev_length-=2;++h.strstart<=P&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+I-1])&h.hash_mask,U=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),--h.prev_length!=0;);if(h.match_available=0,h.match_length=I-1,h.strstart++,R&&(K(h,!1),h.strm.avail_out===0))return c}else if(h.match_available){if((R=b._tr_tally(h,0,h.window[h.strstart-1]))&&K(h,!1),h.strstart++,h.lookahead--,h.strm.avail_out===0)return c}else h.match_available=1,h.strstart++,h.lookahead--}return h.match_available&&(R=b._tr_tally(h,0,h.window[h.strstart-1]),h.match_available=0),h.insert=h.strstart<I-1?h.strstart:I-1,j===r?(K(h,!0),h.strm.avail_out===0?tt:Z):h.last_lit&&(K(h,!1),h.strm.avail_out===0)?c:B}function _t(h,j,U,R,P){this.good_length=h,this.max_lazy=j,this.nice_length=U,this.max_chain=R,this.func=P}function Ct(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=l,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(2*p),this.dyn_dtree=new E.Buf16(2*(2*v+1)),this.bl_tree=new E.Buf16(2*(2*i+1)),ht(this.dyn_ltree),ht(this.dyn_dtree),ht(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(x+1),this.heap=new E.Buf16(2*w+1),ht(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*w+1),ht(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Tt(h){var j;return h&&h.state?(h.total_in=h.total_out=0,h.data_type=s,(j=h.state).pending=0,j.pending_out=0,j.wrap<0&&(j.wrap=-j.wrap),j.status=j.wrap?y:D,h.adler=j.wrap===2?0:1,j.last_flush=_,b._tr_init(j),e):st(h,u)}function zt(h){var j=Tt(h);return j===e&&function(U){U.window_size=2*U.w_size,ht(U.head),U.max_lazy_match=d[U.level].max_lazy,U.good_match=d[U.level].good_length,U.nice_match=d[U.level].nice_length,U.max_chain_length=d[U.level].max_chain,U.strstart=0,U.block_start=0,U.lookahead=0,U.insert=0,U.match_length=U.prev_length=I-1,U.match_available=0,U.ins_h=0}(h.state),j}function Bt(h,j,U,R,P,F){if(!h)return u;var nt=1;if(j===t&&(j=6),R<0?(nt=0,R=-R):15<R&&(nt=2,R-=16),P<1||a<P||U!==l||R<8||15<R||j<0||9<j||F<0||o<F)return st(h,u);R===8&&(R=9);var it=new Ct;return(h.state=it).strm=h,it.wrap=nt,it.gzhead=null,it.w_bits=R,it.w_size=1<<it.w_bits,it.w_mask=it.w_size-1,it.hash_bits=P+7,it.hash_size=1<<it.hash_bits,it.hash_mask=it.hash_size-1,it.hash_shift=~~((it.hash_bits+I-1)/I),it.window=new E.Buf8(2*it.w_size),it.head=new E.Buf16(it.hash_size),it.prev=new E.Buf16(it.w_size),it.lit_bufsize=1<<P+6,it.pending_buf_size=4*it.lit_bufsize,it.pending_buf=new E.Buf8(it.pending_buf_size),it.d_buf=1*it.lit_bufsize,it.l_buf=3*it.lit_bufsize,it.level=j,it.strategy=F,it.method=U,zt(h)}d=[new _t(0,0,0,0,function(h,j){var U=65535;for(U>h.pending_buf_size-5&&(U=h.pending_buf_size-5);;){if(h.lookahead<=1){if(yt(h),h.lookahead===0&&j===_)return c;if(h.lookahead===0)break}h.strstart+=h.lookahead,h.lookahead=0;var R=h.block_start+U;if((h.strstart===0||h.strstart>=R)&&(h.lookahead=h.strstart-R,h.strstart=R,K(h,!1),h.strm.avail_out===0)||h.strstart-h.block_start>=h.w_size-S&&(K(h,!1),h.strm.avail_out===0))return c}return h.insert=0,j===r?(K(h,!0),h.strm.avail_out===0?tt:Z):(h.strstart>h.block_start&&(K(h,!1),h.strm.avail_out),c)}),new _t(4,4,8,4,wt),new _t(4,5,16,8,wt),new _t(4,6,32,32,wt),new _t(4,4,16,16,bt),new _t(8,16,32,32,bt),new _t(8,16,128,128,bt),new _t(8,32,128,256,bt),new _t(32,128,258,1024,bt),new _t(32,258,258,4096,bt)],A.deflateInit=function(h,j){return Bt(h,j,l,15,8,0)},A.deflateInit2=Bt,A.deflateReset=zt,A.deflateResetKeep=Tt,A.deflateSetHeader=function(h,j){return h&&h.state?h.state.wrap!==2?u:(h.state.gzhead=j,e):u},A.deflate=function(h,j){var U,R,P,F;if(!h||!h.state||5<j||j<0)return h?st(h,u):u;if(R=h.state,!h.output||!h.input&&h.avail_in!==0||R.status===666&&j!==r)return st(h,h.avail_out===0?-5:u);if(R.strm=h,U=R.last_flush,R.last_flush=j,R.status===y)if(R.wrap===2)h.adler=0,ft(R,31),ft(R,139),ft(R,8),R.gzhead?(ft(R,(R.gzhead.text?1:0)+(R.gzhead.hcrc?2:0)+(R.gzhead.extra?4:0)+(R.gzhead.name?8:0)+(R.gzhead.comment?16:0)),ft(R,255&R.gzhead.time),ft(R,R.gzhead.time>>8&255),ft(R,R.gzhead.time>>16&255),ft(R,R.gzhead.time>>24&255),ft(R,R.level===9?2:2<=R.strategy||R.level<2?4:0),ft(R,255&R.gzhead.os),R.gzhead.extra&&R.gzhead.extra.length&&(ft(R,255&R.gzhead.extra.length),ft(R,R.gzhead.extra.length>>8&255)),R.gzhead.hcrc&&(h.adler=C(h.adler,R.pending_buf,R.pending,0)),R.gzindex=0,R.status=69):(ft(R,0),ft(R,0),ft(R,0),ft(R,0),ft(R,0),ft(R,R.level===9?2:2<=R.strategy||R.level<2?4:0),ft(R,3),R.status=D);else{var nt=l+(R.w_bits-8<<4)<<8;nt|=(2<=R.strategy||R.level<2?0:R.level<6?1:R.level===6?2:3)<<6,R.strstart!==0&&(nt|=32),nt+=31-nt%31,R.status=D,lt(R,nt),R.strstart!==0&&(lt(R,h.adler>>>16),lt(R,65535&h.adler)),h.adler=1}if(R.status===69)if(R.gzhead.extra){for(P=R.pending;R.gzindex<(65535&R.gzhead.extra.length)&&(R.pending!==R.pending_buf_size||(R.gzhead.hcrc&&R.pending>P&&(h.adler=C(h.adler,R.pending_buf,R.pending-P,P)),W(h),P=R.pending,R.pending!==R.pending_buf_size));)ft(R,255&R.gzhead.extra[R.gzindex]),R.gzindex++;R.gzhead.hcrc&&R.pending>P&&(h.adler=C(h.adler,R.pending_buf,R.pending-P,P)),R.gzindex===R.gzhead.extra.length&&(R.gzindex=0,R.status=73)}else R.status=73;if(R.status===73)if(R.gzhead.name){P=R.pending;do{if(R.pending===R.pending_buf_size&&(R.gzhead.hcrc&&R.pending>P&&(h.adler=C(h.adler,R.pending_buf,R.pending-P,P)),W(h),P=R.pending,R.pending===R.pending_buf_size)){F=1;break}F=R.gzindex<R.gzhead.name.length?255&R.gzhead.name.charCodeAt(R.gzindex++):0,ft(R,F)}while(F!==0);R.gzhead.hcrc&&R.pending>P&&(h.adler=C(h.adler,R.pending_buf,R.pending-P,P)),F===0&&(R.gzindex=0,R.status=91)}else R.status=91;if(R.status===91)if(R.gzhead.comment){P=R.pending;do{if(R.pending===R.pending_buf_size&&(R.gzhead.hcrc&&R.pending>P&&(h.adler=C(h.adler,R.pending_buf,R.pending-P,P)),W(h),P=R.pending,R.pending===R.pending_buf_size)){F=1;break}F=R.gzindex<R.gzhead.comment.length?255&R.gzhead.comment.charCodeAt(R.gzindex++):0,ft(R,F)}while(F!==0);R.gzhead.hcrc&&R.pending>P&&(h.adler=C(h.adler,R.pending_buf,R.pending-P,P)),F===0&&(R.status=103)}else R.status=103;if(R.status===103&&(R.gzhead.hcrc?(R.pending+2>R.pending_buf_size&&W(h),R.pending+2<=R.pending_buf_size&&(ft(R,255&h.adler),ft(R,h.adler>>8&255),h.adler=0,R.status=D)):R.status=D),R.pending!==0){if(W(h),h.avail_out===0)return R.last_flush=-1,e}else if(h.avail_in===0&&G(j)<=G(U)&&j!==r)return st(h,-5);if(R.status===666&&h.avail_in!==0)return st(h,-5);if(h.avail_in!==0||R.lookahead!==0||j!==_&&R.status!==666){var it=R.strategy===2?function(n,m){for(var O;;){if(n.lookahead===0&&(yt(n),n.lookahead===0)){if(m===_)return c;break}if(n.match_length=0,O=b._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,O&&(K(n,!1),n.strm.avail_out===0))return c}return n.insert=0,m===r?(K(n,!0),n.strm.avail_out===0?tt:Z):n.last_lit&&(K(n,!1),n.strm.avail_out===0)?c:B}(R,j):R.strategy===3?function(n,m){for(var O,k,V,$,rt=n.window;;){if(n.lookahead<=g){if(yt(n),n.lookahead<=g&&m===_)return c;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=I&&0<n.strstart&&(k=rt[V=n.strstart-1])===rt[++V]&&k===rt[++V]&&k===rt[++V]){$=n.strstart+g;do;while(k===rt[++V]&&k===rt[++V]&&k===rt[++V]&&k===rt[++V]&&k===rt[++V]&&k===rt[++V]&&k===rt[++V]&&k===rt[++V]&&V<$);n.match_length=g-($-V),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=I?(O=b._tr_tally(n,1,n.match_length-I),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(O=b._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),O&&(K(n,!1),n.strm.avail_out===0))return c}return n.insert=0,m===r?(K(n,!0),n.strm.avail_out===0?tt:Z):n.last_lit&&(K(n,!1),n.strm.avail_out===0)?c:B}(R,j):d[R.level].func(R,j);if(it!==tt&&it!==Z||(R.status=666),it===c||it===tt)return h.avail_out===0&&(R.last_flush=-1),e;if(it===B&&(j===1?b._tr_align(R):j!==5&&(b._tr_stored_block(R,0,0,!1),j===3&&(ht(R.head),R.lookahead===0&&(R.strstart=0,R.block_start=0,R.insert=0))),W(h),h.avail_out===0))return R.last_flush=-1,e}return j!==r?e:R.wrap<=0?1:(R.wrap===2?(ft(R,255&h.adler),ft(R,h.adler>>8&255),ft(R,h.adler>>16&255),ft(R,h.adler>>24&255),ft(R,255&h.total_in),ft(R,h.total_in>>8&255),ft(R,h.total_in>>16&255),ft(R,h.total_in>>24&255)):(lt(R,h.adler>>>16),lt(R,65535&h.adler)),W(h),0<R.wrap&&(R.wrap=-R.wrap),R.pending!==0?e:1)},A.deflateEnd=function(h){var j;return h&&h.state?(j=h.state.status)!==y&&j!==69&&j!==73&&j!==91&&j!==103&&j!==D&&j!==666?st(h,u):(h.state=null,j===D?st(h,-3):e):u},A.deflateSetDictionary=function(h,j){var U,R,P,F,nt,it,n,m,O=j.length;if(!h||!h.state||(F=(U=h.state).wrap)===2||F===1&&U.status!==y||U.lookahead)return u;for(F===1&&(h.adler=f(h.adler,j,O,0)),U.wrap=0,O>=U.w_size&&(F===0&&(ht(U.head),U.strstart=0,U.block_start=0,U.insert=0),m=new E.Buf8(U.w_size),E.arraySet(m,j,O-U.w_size,U.w_size,0),j=m,O=U.w_size),nt=h.avail_in,it=h.next_in,n=h.input,h.avail_in=O,h.next_in=0,h.input=j,yt(U);U.lookahead>=I;){for(R=U.strstart,P=U.lookahead-(I-1);U.ins_h=(U.ins_h<<U.hash_shift^U.window[R+I-1])&U.hash_mask,U.prev[R&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=R,R++,--P;);U.strstart=R,U.lookahead=I-1,yt(U)}return U.strstart+=U.lookahead,U.block_start=U.strstart,U.insert=U.lookahead,U.lookahead=0,U.match_length=U.prev_length=I-1,U.match_available=0,h.next_in=it,h.input=n,h.avail_in=nt,U.wrap=F,e},A.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(Y,X,A){X.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(Y,X,A){X.exports=function(d,E){var b,f,C,T,_,r,e,u,t,o,s,l,a,w,v,i,p,x,I,g,S,y,D,c,B;b=d.state,f=d.next_in,c=d.input,C=f+(d.avail_in-5),T=d.next_out,B=d.output,_=T-(E-d.avail_out),r=T+(d.avail_out-257),e=b.dmax,u=b.wsize,t=b.whave,o=b.wnext,s=b.window,l=b.hold,a=b.bits,w=b.lencode,v=b.distcode,i=(1<<b.lenbits)-1,p=(1<<b.distbits)-1;t:do{a<15&&(l+=c[f++]<<a,a+=8,l+=c[f++]<<a,a+=8),x=w[l&i];e:for(;;){if(l>>>=I=x>>>24,a-=I,(I=x>>>16&255)===0)B[T++]=65535&x;else{if(!(16&I)){if(!(64&I)){x=w[(65535&x)+(l&(1<<I)-1)];continue e}if(32&I){b.mode=12;break t}d.msg="invalid literal/length code",b.mode=30;break t}g=65535&x,(I&=15)&&(a<I&&(l+=c[f++]<<a,a+=8),g+=l&(1<<I)-1,l>>>=I,a-=I),a<15&&(l+=c[f++]<<a,a+=8,l+=c[f++]<<a,a+=8),x=v[l&p];i:for(;;){if(l>>>=I=x>>>24,a-=I,!(16&(I=x>>>16&255))){if(!(64&I)){x=v[(65535&x)+(l&(1<<I)-1)];continue i}d.msg="invalid distance code",b.mode=30;break t}if(S=65535&x,a<(I&=15)&&(l+=c[f++]<<a,(a+=8)<I&&(l+=c[f++]<<a,a+=8)),e<(S+=l&(1<<I)-1)){d.msg="invalid distance too far back",b.mode=30;break t}if(l>>>=I,a-=I,(I=T-_)<S){if(t<(I=S-I)&&b.sane){d.msg="invalid distance too far back",b.mode=30;break t}if(D=s,(y=0)===o){if(y+=u-I,I<g){for(g-=I;B[T++]=s[y++],--I;);y=T-S,D=B}}else if(o<I){if(y+=u+o-I,(I-=o)<g){for(g-=I;B[T++]=s[y++],--I;);if(y=0,o<g){for(g-=I=o;B[T++]=s[y++],--I;);y=T-S,D=B}}}else if(y+=o-I,I<g){for(g-=I;B[T++]=s[y++],--I;);y=T-S,D=B}for(;2<g;)B[T++]=D[y++],B[T++]=D[y++],B[T++]=D[y++],g-=3;g&&(B[T++]=D[y++],1<g&&(B[T++]=D[y++]))}else{for(y=T-S;B[T++]=B[y++],B[T++]=B[y++],B[T++]=B[y++],2<(g-=3););g&&(B[T++]=B[y++],1<g&&(B[T++]=B[y++]))}break}}break}}while(f<C&&T<r);f-=g=a>>3,l&=(1<<(a-=g<<3))-1,d.next_in=f,d.next_out=T,d.avail_in=f<C?C-f+5:5-(f-C),d.avail_out=T<r?r-T+257:257-(T-r),b.hold=l,b.bits=a}},{}],49:[function(Y,X,A){var d=Y("../utils/common"),E=Y("./adler32"),b=Y("./crc32"),f=Y("./inffast"),C=Y("./inftrees"),T=1,_=2,r=0,e=-2,u=1,t=852,o=592;function s(y){return(y>>>24&255)+(y>>>8&65280)+((65280&y)<<8)+((255&y)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(y){var D;return y&&y.state?(D=y.state,y.total_in=y.total_out=D.total=0,y.msg="",D.wrap&&(y.adler=1&D.wrap),D.mode=u,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new d.Buf32(t),D.distcode=D.distdyn=new d.Buf32(o),D.sane=1,D.back=-1,r):e}function w(y){var D;return y&&y.state?((D=y.state).wsize=0,D.whave=0,D.wnext=0,a(y)):e}function v(y,D){var c,B;return y&&y.state?(B=y.state,D<0?(c=0,D=-D):(c=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?e:(B.window!==null&&B.wbits!==D&&(B.window=null),B.wrap=c,B.wbits=D,w(y))):e}function i(y,D){var c,B;return y?(B=new l,(y.state=B).window=null,(c=v(y,D))!==r&&(y.state=null),c):e}var p,x,I=!0;function g(y){if(I){var D;for(p=new d.Buf32(512),x=new d.Buf32(32),D=0;D<144;)y.lens[D++]=8;for(;D<256;)y.lens[D++]=9;for(;D<280;)y.lens[D++]=7;for(;D<288;)y.lens[D++]=8;for(C(T,y.lens,0,288,p,0,y.work,{bits:9}),D=0;D<32;)y.lens[D++]=5;C(_,y.lens,0,32,x,0,y.work,{bits:5}),I=!1}y.lencode=p,y.lenbits=9,y.distcode=x,y.distbits=5}function S(y,D,c,B){var tt,Z=y.state;return Z.window===null&&(Z.wsize=1<<Z.wbits,Z.wnext=0,Z.whave=0,Z.window=new d.Buf8(Z.wsize)),B>=Z.wsize?(d.arraySet(Z.window,D,c-Z.wsize,Z.wsize,0),Z.wnext=0,Z.whave=Z.wsize):(B<(tt=Z.wsize-Z.wnext)&&(tt=B),d.arraySet(Z.window,D,c-B,tt,Z.wnext),(B-=tt)?(d.arraySet(Z.window,D,c-B,B,0),Z.wnext=B,Z.whave=Z.wsize):(Z.wnext+=tt,Z.wnext===Z.wsize&&(Z.wnext=0),Z.whave<Z.wsize&&(Z.whave+=tt))),0}A.inflateReset=w,A.inflateReset2=v,A.inflateResetKeep=a,A.inflateInit=function(y){return i(y,15)},A.inflateInit2=i,A.inflate=function(y,D){var c,B,tt,Z,st,G,ht,W,K,ft,lt,at,yt,wt,bt,_t,Ct,Tt,zt,Bt,h,j,U,R,P=0,F=new d.Buf8(4),nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!y||!y.state||!y.output||!y.input&&y.avail_in!==0)return e;(c=y.state).mode===12&&(c.mode=13),st=y.next_out,tt=y.output,ht=y.avail_out,Z=y.next_in,B=y.input,G=y.avail_in,W=c.hold,K=c.bits,ft=G,lt=ht,j=r;t:for(;;)switch(c.mode){case u:if(c.wrap===0){c.mode=13;break}for(;K<16;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}if(2&c.wrap&&W===35615){F[c.check=0]=255&W,F[1]=W>>>8&255,c.check=b(c.check,F,2,0),K=W=0,c.mode=2;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&W)<<8)+(W>>8))%31){y.msg="incorrect header check",c.mode=30;break}if((15&W)!=8){y.msg="unknown compression method",c.mode=30;break}if(K-=4,h=8+(15&(W>>>=4)),c.wbits===0)c.wbits=h;else if(h>c.wbits){y.msg="invalid window size",c.mode=30;break}c.dmax=1<<h,y.adler=c.check=1,c.mode=512&W?10:12,K=W=0;break;case 2:for(;K<16;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}if(c.flags=W,(255&c.flags)!=8){y.msg="unknown compression method",c.mode=30;break}if(57344&c.flags){y.msg="unknown header flags set",c.mode=30;break}c.head&&(c.head.text=W>>8&1),512&c.flags&&(F[0]=255&W,F[1]=W>>>8&255,c.check=b(c.check,F,2,0)),K=W=0,c.mode=3;case 3:for(;K<32;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}c.head&&(c.head.time=W),512&c.flags&&(F[0]=255&W,F[1]=W>>>8&255,F[2]=W>>>16&255,F[3]=W>>>24&255,c.check=b(c.check,F,4,0)),K=W=0,c.mode=4;case 4:for(;K<16;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}c.head&&(c.head.xflags=255&W,c.head.os=W>>8),512&c.flags&&(F[0]=255&W,F[1]=W>>>8&255,c.check=b(c.check,F,2,0)),K=W=0,c.mode=5;case 5:if(1024&c.flags){for(;K<16;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}c.length=W,c.head&&(c.head.extra_len=W),512&c.flags&&(F[0]=255&W,F[1]=W>>>8&255,c.check=b(c.check,F,2,0)),K=W=0}else c.head&&(c.head.extra=null);c.mode=6;case 6:if(1024&c.flags&&(G<(at=c.length)&&(at=G),at&&(c.head&&(h=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),d.arraySet(c.head.extra,B,Z,at,h)),512&c.flags&&(c.check=b(c.check,B,at,Z)),G-=at,Z+=at,c.length-=at),c.length))break t;c.length=0,c.mode=7;case 7:if(2048&c.flags){if(G===0)break t;for(at=0;h=B[Z+at++],c.head&&h&&c.length<65536&&(c.head.name+=String.fromCharCode(h)),h&&at<G;);if(512&c.flags&&(c.check=b(c.check,B,at,Z)),G-=at,Z+=at,h)break t}else c.head&&(c.head.name=null);c.length=0,c.mode=8;case 8:if(4096&c.flags){if(G===0)break t;for(at=0;h=B[Z+at++],c.head&&h&&c.length<65536&&(c.head.comment+=String.fromCharCode(h)),h&&at<G;);if(512&c.flags&&(c.check=b(c.check,B,at,Z)),G-=at,Z+=at,h)break t}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(512&c.flags){for(;K<16;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}if(W!==(65535&c.check)){y.msg="header crc mismatch",c.mode=30;break}K=W=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),y.adler=c.check=0,c.mode=12;break;case 10:for(;K<32;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}y.adler=c.check=s(W),K=W=0,c.mode=11;case 11:if(c.havedict===0)return y.next_out=st,y.avail_out=ht,y.next_in=Z,y.avail_in=G,c.hold=W,c.bits=K,2;y.adler=c.check=1,c.mode=12;case 12:if(D===5||D===6)break t;case 13:if(c.last){W>>>=7&K,K-=7&K,c.mode=27;break}for(;K<3;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}switch(c.last=1&W,K-=1,3&(W>>>=1)){case 0:c.mode=14;break;case 1:if(g(c),c.mode=20,D!==6)break;W>>>=2,K-=2;break t;case 2:c.mode=17;break;case 3:y.msg="invalid block type",c.mode=30}W>>>=2,K-=2;break;case 14:for(W>>>=7&K,K-=7&K;K<32;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}if((65535&W)!=(W>>>16^65535)){y.msg="invalid stored block lengths",c.mode=30;break}if(c.length=65535&W,K=W=0,c.mode=15,D===6)break t;case 15:c.mode=16;case 16:if(at=c.length){if(G<at&&(at=G),ht<at&&(at=ht),at===0)break t;d.arraySet(tt,B,Z,at,st),G-=at,Z+=at,ht-=at,st+=at,c.length-=at;break}c.mode=12;break;case 17:for(;K<14;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}if(c.nlen=257+(31&W),W>>>=5,K-=5,c.ndist=1+(31&W),W>>>=5,K-=5,c.ncode=4+(15&W),W>>>=4,K-=4,286<c.nlen||30<c.ndist){y.msg="too many length or distance symbols",c.mode=30;break}c.have=0,c.mode=18;case 18:for(;c.have<c.ncode;){for(;K<3;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}c.lens[nt[c.have++]]=7&W,W>>>=3,K-=3}for(;c.have<19;)c.lens[nt[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,U={bits:c.lenbits},j=C(0,c.lens,0,19,c.lencode,0,c.work,U),c.lenbits=U.bits,j){y.msg="invalid code lengths set",c.mode=30;break}c.have=0,c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;_t=(P=c.lencode[W&(1<<c.lenbits)-1])>>>16&255,Ct=65535&P,!((bt=P>>>24)<=K);){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}if(Ct<16)W>>>=bt,K-=bt,c.lens[c.have++]=Ct;else{if(Ct===16){for(R=bt+2;K<R;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}if(W>>>=bt,K-=bt,c.have===0){y.msg="invalid bit length repeat",c.mode=30;break}h=c.lens[c.have-1],at=3+(3&W),W>>>=2,K-=2}else if(Ct===17){for(R=bt+3;K<R;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}K-=bt,h=0,at=3+(7&(W>>>=bt)),W>>>=3,K-=3}else{for(R=bt+7;K<R;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}K-=bt,h=0,at=11+(127&(W>>>=bt)),W>>>=7,K-=7}if(c.have+at>c.nlen+c.ndist){y.msg="invalid bit length repeat",c.mode=30;break}for(;at--;)c.lens[c.have++]=h}}if(c.mode===30)break;if(c.lens[256]===0){y.msg="invalid code -- missing end-of-block",c.mode=30;break}if(c.lenbits=9,U={bits:c.lenbits},j=C(T,c.lens,0,c.nlen,c.lencode,0,c.work,U),c.lenbits=U.bits,j){y.msg="invalid literal/lengths set",c.mode=30;break}if(c.distbits=6,c.distcode=c.distdyn,U={bits:c.distbits},j=C(_,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,U),c.distbits=U.bits,j){y.msg="invalid distances set",c.mode=30;break}if(c.mode=20,D===6)break t;case 20:c.mode=21;case 21:if(6<=G&&258<=ht){y.next_out=st,y.avail_out=ht,y.next_in=Z,y.avail_in=G,c.hold=W,c.bits=K,f(y,lt),st=y.next_out,tt=y.output,ht=y.avail_out,Z=y.next_in,B=y.input,G=y.avail_in,W=c.hold,K=c.bits,c.mode===12&&(c.back=-1);break}for(c.back=0;_t=(P=c.lencode[W&(1<<c.lenbits)-1])>>>16&255,Ct=65535&P,!((bt=P>>>24)<=K);){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}if(_t&&!(240&_t)){for(Tt=bt,zt=_t,Bt=Ct;_t=(P=c.lencode[Bt+((W&(1<<Tt+zt)-1)>>Tt)])>>>16&255,Ct=65535&P,!(Tt+(bt=P>>>24)<=K);){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}W>>>=Tt,K-=Tt,c.back+=Tt}if(W>>>=bt,K-=bt,c.back+=bt,c.length=Ct,_t===0){c.mode=26;break}if(32&_t){c.back=-1,c.mode=12;break}if(64&_t){y.msg="invalid literal/length code",c.mode=30;break}c.extra=15&_t,c.mode=22;case 22:if(c.extra){for(R=c.extra;K<R;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}c.length+=W&(1<<c.extra)-1,W>>>=c.extra,K-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=23;case 23:for(;_t=(P=c.distcode[W&(1<<c.distbits)-1])>>>16&255,Ct=65535&P,!((bt=P>>>24)<=K);){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}if(!(240&_t)){for(Tt=bt,zt=_t,Bt=Ct;_t=(P=c.distcode[Bt+((W&(1<<Tt+zt)-1)>>Tt)])>>>16&255,Ct=65535&P,!(Tt+(bt=P>>>24)<=K);){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}W>>>=Tt,K-=Tt,c.back+=Tt}if(W>>>=bt,K-=bt,c.back+=bt,64&_t){y.msg="invalid distance code",c.mode=30;break}c.offset=Ct,c.extra=15&_t,c.mode=24;case 24:if(c.extra){for(R=c.extra;K<R;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}c.offset+=W&(1<<c.extra)-1,W>>>=c.extra,K-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){y.msg="invalid distance too far back",c.mode=30;break}c.mode=25;case 25:if(ht===0)break t;if(at=lt-ht,c.offset>at){if((at=c.offset-at)>c.whave&&c.sane){y.msg="invalid distance too far back",c.mode=30;break}yt=at>c.wnext?(at-=c.wnext,c.wsize-at):c.wnext-at,at>c.length&&(at=c.length),wt=c.window}else wt=tt,yt=st-c.offset,at=c.length;for(ht<at&&(at=ht),ht-=at,c.length-=at;tt[st++]=wt[yt++],--at;);c.length===0&&(c.mode=21);break;case 26:if(ht===0)break t;tt[st++]=c.length,ht--,c.mode=21;break;case 27:if(c.wrap){for(;K<32;){if(G===0)break t;G--,W|=B[Z++]<<K,K+=8}if(lt-=ht,y.total_out+=lt,c.total+=lt,lt&&(y.adler=c.check=c.flags?b(c.check,tt,lt,st-lt):E(c.check,tt,lt,st-lt)),lt=ht,(c.flags?W:s(W))!==c.check){y.msg="incorrect data check",c.mode=30;break}K=W=0}c.mode=28;case 28:if(c.wrap&&c.flags){for(;K<32;){if(G===0)break t;G--,W+=B[Z++]<<K,K+=8}if(W!==(4294967295&c.total)){y.msg="incorrect length check",c.mode=30;break}K=W=0}c.mode=29;case 29:j=1;break t;case 30:j=-3;break t;case 31:return-4;case 32:default:return e}return y.next_out=st,y.avail_out=ht,y.next_in=Z,y.avail_in=G,c.hold=W,c.bits=K,(c.wsize||lt!==y.avail_out&&c.mode<30&&(c.mode<27||D!==4))&&S(y,y.output,y.next_out,lt-y.avail_out)?(c.mode=31,-4):(ft-=y.avail_in,lt-=y.avail_out,y.total_in+=ft,y.total_out+=lt,c.total+=lt,c.wrap&&lt&&(y.adler=c.check=c.flags?b(c.check,tt,lt,y.next_out-lt):E(c.check,tt,lt,y.next_out-lt)),y.data_type=c.bits+(c.last?64:0)+(c.mode===12?128:0)+(c.mode===20||c.mode===15?256:0),(ft==0&&lt===0||D===4)&&j===r&&(j=-5),j)},A.inflateEnd=function(y){if(!y||!y.state)return e;var D=y.state;return D.window&&(D.window=null),y.state=null,r},A.inflateGetHeader=function(y,D){var c;return y&&y.state&&2&(c=y.state).wrap?((c.head=D).done=!1,r):e},A.inflateSetDictionary=function(y,D){var c,B=D.length;return y&&y.state?(c=y.state).wrap!==0&&c.mode!==11?e:c.mode===11&&E(1,D,B,0)!==c.check?-3:S(y,D,B,B)?(c.mode=31,-4):(c.havedict=1,r):e},A.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(Y,X,A){var d=Y("../utils/common"),E=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],b=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],C=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];X.exports=function(T,_,r,e,u,t,o,s){var l,a,w,v,i,p,x,I,g,S=s.bits,y=0,D=0,c=0,B=0,tt=0,Z=0,st=0,G=0,ht=0,W=0,K=null,ft=0,lt=new d.Buf16(16),at=new d.Buf16(16),yt=null,wt=0;for(y=0;y<=15;y++)lt[y]=0;for(D=0;D<e;D++)lt[_[r+D]]++;for(tt=S,B=15;1<=B&&lt[B]===0;B--);if(B<tt&&(tt=B),B===0)return u[t++]=20971520,u[t++]=20971520,s.bits=1,0;for(c=1;c<B&&lt[c]===0;c++);for(tt<c&&(tt=c),y=G=1;y<=15;y++)if(G<<=1,(G-=lt[y])<0)return-1;if(0<G&&(T===0||B!==1))return-1;for(at[1]=0,y=1;y<15;y++)at[y+1]=at[y]+lt[y];for(D=0;D<e;D++)_[r+D]!==0&&(o[at[_[r+D]]++]=D);if(p=T===0?(K=yt=o,19):T===1?(K=E,ft-=257,yt=b,wt-=257,256):(K=f,yt=C,-1),y=c,i=t,st=D=W=0,w=-1,v=(ht=1<<(Z=tt))-1,T===1&&852<ht||T===2&&592<ht)return 1;for(;;){for(x=y-st,g=o[D]<p?(I=0,o[D]):o[D]>p?(I=yt[wt+o[D]],K[ft+o[D]]):(I=96,0),l=1<<y-st,c=a=1<<Z;u[i+(W>>st)+(a-=l)]=x<<24|I<<16|g|0,a!==0;);for(l=1<<y-1;W&l;)l>>=1;if(l!==0?(W&=l-1,W+=l):W=0,D++,--lt[y]==0){if(y===B)break;y=_[r+o[D]]}if(tt<y&&(W&v)!==w){for(st===0&&(st=tt),i+=c,G=1<<(Z=y-st);Z+st<B&&!((G-=lt[Z+st])<=0);)Z++,G<<=1;if(ht+=1<<Z,T===1&&852<ht||T===2&&592<ht)return 1;u[w=W&v]=tt<<24|Z<<16|i-t|0}}return W!==0&&(u[i+W]=y-st<<24|64<<16|0),s.bits=tt,0}},{"../utils/common":41}],51:[function(Y,X,A){X.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(Y,X,A){var d=Y("../utils/common"),E=0,b=1;function f(P){for(var F=P.length;0<=--F;)P[F]=0}var C=0,T=29,_=256,r=_+1+T,e=30,u=19,t=2*r+1,o=15,s=16,l=7,a=256,w=16,v=17,i=18,p=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],g=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(r+2));f(S);var y=new Array(2*e);f(y);var D=new Array(512);f(D);var c=new Array(256);f(c);var B=new Array(T);f(B);var tt,Z,st,G=new Array(e);function ht(P,F,nt,it,n){this.static_tree=P,this.extra_bits=F,this.extra_base=nt,this.elems=it,this.max_length=n,this.has_stree=P&&P.length}function W(P,F){this.dyn_tree=P,this.max_code=0,this.stat_desc=F}function K(P){return P<256?D[P]:D[256+(P>>>7)]}function ft(P,F){P.pending_buf[P.pending++]=255&F,P.pending_buf[P.pending++]=F>>>8&255}function lt(P,F,nt){P.bi_valid>s-nt?(P.bi_buf|=F<<P.bi_valid&65535,ft(P,P.bi_buf),P.bi_buf=F>>s-P.bi_valid,P.bi_valid+=nt-s):(P.bi_buf|=F<<P.bi_valid&65535,P.bi_valid+=nt)}function at(P,F,nt){lt(P,nt[2*F],nt[2*F+1])}function yt(P,F){for(var nt=0;nt|=1&P,P>>>=1,nt<<=1,0<--F;);return nt>>>1}function wt(P,F,nt){var it,n,m=new Array(o+1),O=0;for(it=1;it<=o;it++)m[it]=O=O+nt[it-1]<<1;for(n=0;n<=F;n++){var k=P[2*n+1];k!==0&&(P[2*n]=yt(m[k]++,k))}}function bt(P){var F;for(F=0;F<r;F++)P.dyn_ltree[2*F]=0;for(F=0;F<e;F++)P.dyn_dtree[2*F]=0;for(F=0;F<u;F++)P.bl_tree[2*F]=0;P.dyn_ltree[2*a]=1,P.opt_len=P.static_len=0,P.last_lit=P.matches=0}function _t(P){8<P.bi_valid?ft(P,P.bi_buf):0<P.bi_valid&&(P.pending_buf[P.pending++]=P.bi_buf),P.bi_buf=0,P.bi_valid=0}function Ct(P,F,nt,it){var n=2*F,m=2*nt;return P[n]<P[m]||P[n]===P[m]&&it[F]<=it[nt]}function Tt(P,F,nt){for(var it=P.heap[nt],n=nt<<1;n<=P.heap_len&&(n<P.heap_len&&Ct(F,P.heap[n+1],P.heap[n],P.depth)&&n++,!Ct(F,it,P.heap[n],P.depth));)P.heap[nt]=P.heap[n],nt=n,n<<=1;P.heap[nt]=it}function zt(P,F,nt){var it,n,m,O,k=0;if(P.last_lit!==0)for(;it=P.pending_buf[P.d_buf+2*k]<<8|P.pending_buf[P.d_buf+2*k+1],n=P.pending_buf[P.l_buf+k],k++,it===0?at(P,n,F):(at(P,(m=c[n])+_+1,F),(O=p[m])!==0&&lt(P,n-=B[m],O),at(P,m=K(--it),nt),(O=x[m])!==0&&lt(P,it-=G[m],O)),k<P.last_lit;);at(P,a,F)}function Bt(P,F){var nt,it,n,m=F.dyn_tree,O=F.stat_desc.static_tree,k=F.stat_desc.has_stree,V=F.stat_desc.elems,$=-1;for(P.heap_len=0,P.heap_max=t,nt=0;nt<V;nt++)m[2*nt]!==0?(P.heap[++P.heap_len]=$=nt,P.depth[nt]=0):m[2*nt+1]=0;for(;P.heap_len<2;)m[2*(n=P.heap[++P.heap_len]=$<2?++$:0)]=1,P.depth[n]=0,P.opt_len--,k&&(P.static_len-=O[2*n+1]);for(F.max_code=$,nt=P.heap_len>>1;1<=nt;nt--)Tt(P,m,nt);for(n=V;nt=P.heap[1],P.heap[1]=P.heap[P.heap_len--],Tt(P,m,1),it=P.heap[1],P.heap[--P.heap_max]=nt,P.heap[--P.heap_max]=it,m[2*n]=m[2*nt]+m[2*it],P.depth[n]=(P.depth[nt]>=P.depth[it]?P.depth[nt]:P.depth[it])+1,m[2*nt+1]=m[2*it+1]=n,P.heap[1]=n++,Tt(P,m,1),2<=P.heap_len;);P.heap[--P.heap_max]=P.heap[1],function(rt,mt){var St,Ot,Rt,xt,At,kt,N=mt.dyn_tree,z=mt.max_code,q=mt.stat_desc.static_tree,ot=mt.stat_desc.has_stree,gt=mt.stat_desc.extra_bits,It=mt.stat_desc.extra_base,Pt=mt.stat_desc.max_length,Mt=0;for(xt=0;xt<=o;xt++)rt.bl_count[xt]=0;for(N[2*rt.heap[rt.heap_max]+1]=0,St=rt.heap_max+1;St<t;St++)Pt<(xt=N[2*N[2*(Ot=rt.heap[St])+1]+1]+1)&&(xt=Pt,Mt++),N[2*Ot+1]=xt,z<Ot||(rt.bl_count[xt]++,At=0,It<=Ot&&(At=gt[Ot-It]),kt=N[2*Ot],rt.opt_len+=kt*(xt+At),ot&&(rt.static_len+=kt*(q[2*Ot+1]+At)));if(Mt!==0){do{for(xt=Pt-1;rt.bl_count[xt]===0;)xt--;rt.bl_count[xt]--,rt.bl_count[xt+1]+=2,rt.bl_count[Pt]--,Mt-=2}while(0<Mt);for(xt=Pt;xt!==0;xt--)for(Ot=rt.bl_count[xt];Ot!==0;)z<(Rt=rt.heap[--St])||(N[2*Rt+1]!==xt&&(rt.opt_len+=(xt-N[2*Rt+1])*N[2*Rt],N[2*Rt+1]=xt),Ot--)}}(P,F),wt(m,$,P.bl_count)}function h(P,F,nt){var it,n,m=-1,O=F[1],k=0,V=7,$=4;for(O===0&&(V=138,$=3),F[2*(nt+1)+1]=65535,it=0;it<=nt;it++)n=O,O=F[2*(it+1)+1],++k<V&&n===O||(k<$?P.bl_tree[2*n]+=k:n!==0?(n!==m&&P.bl_tree[2*n]++,P.bl_tree[2*w]++):k<=10?P.bl_tree[2*v]++:P.bl_tree[2*i]++,m=n,$=(k=0)===O?(V=138,3):n===O?(V=6,3):(V=7,4))}function j(P,F,nt){var it,n,m=-1,O=F[1],k=0,V=7,$=4;for(O===0&&(V=138,$=3),it=0;it<=nt;it++)if(n=O,O=F[2*(it+1)+1],!(++k<V&&n===O)){if(k<$)for(;at(P,n,P.bl_tree),--k!=0;);else n!==0?(n!==m&&(at(P,n,P.bl_tree),k--),at(P,w,P.bl_tree),lt(P,k-3,2)):k<=10?(at(P,v,P.bl_tree),lt(P,k-3,3)):(at(P,i,P.bl_tree),lt(P,k-11,7));m=n,$=(k=0)===O?(V=138,3):n===O?(V=6,3):(V=7,4)}}f(G);var U=!1;function R(P,F,nt,it){lt(P,(C<<1)+(it?1:0),3),function(n,m,O,k){_t(n),ft(n,O),ft(n,~O),d.arraySet(n.pending_buf,n.window,m,O,n.pending),n.pending+=O}(P,F,nt)}A._tr_init=function(P){U||(function(){var F,nt,it,n,m,O=new Array(o+1);for(n=it=0;n<T-1;n++)for(B[n]=it,F=0;F<1<<p[n];F++)c[it++]=n;for(c[it-1]=n,n=m=0;n<16;n++)for(G[n]=m,F=0;F<1<<x[n];F++)D[m++]=n;for(m>>=7;n<e;n++)for(G[n]=m<<7,F=0;F<1<<x[n]-7;F++)D[256+m++]=n;for(nt=0;nt<=o;nt++)O[nt]=0;for(F=0;F<=143;)S[2*F+1]=8,F++,O[8]++;for(;F<=255;)S[2*F+1]=9,F++,O[9]++;for(;F<=279;)S[2*F+1]=7,F++,O[7]++;for(;F<=287;)S[2*F+1]=8,F++,O[8]++;for(wt(S,r+1,O),F=0;F<e;F++)y[2*F+1]=5,y[2*F]=yt(F,5);tt=new ht(S,p,_+1,r,o),Z=new ht(y,x,0,e,o),st=new ht(new Array(0),I,0,u,l)}(),U=!0),P.l_desc=new W(P.dyn_ltree,tt),P.d_desc=new W(P.dyn_dtree,Z),P.bl_desc=new W(P.bl_tree,st),P.bi_buf=0,P.bi_valid=0,bt(P)},A._tr_stored_block=R,A._tr_flush_block=function(P,F,nt,it){var n,m,O=0;0<P.level?(P.strm.data_type===2&&(P.strm.data_type=function(k){var V,$=4093624447;for(V=0;V<=31;V++,$>>>=1)if(1&$&&k.dyn_ltree[2*V]!==0)return E;if(k.dyn_ltree[18]!==0||k.dyn_ltree[20]!==0||k.dyn_ltree[26]!==0)return b;for(V=32;V<_;V++)if(k.dyn_ltree[2*V]!==0)return b;return E}(P)),Bt(P,P.l_desc),Bt(P,P.d_desc),O=function(k){var V;for(h(k,k.dyn_ltree,k.l_desc.max_code),h(k,k.dyn_dtree,k.d_desc.max_code),Bt(k,k.bl_desc),V=u-1;3<=V&&k.bl_tree[2*g[V]+1]===0;V--);return k.opt_len+=3*(V+1)+5+5+4,V}(P),n=P.opt_len+3+7>>>3,(m=P.static_len+3+7>>>3)<=n&&(n=m)):n=m=nt+5,nt+4<=n&&F!==-1?R(P,F,nt,it):P.strategy===4||m===n?(lt(P,2+(it?1:0),3),zt(P,S,y)):(lt(P,4+(it?1:0),3),function(k,V,$,rt){var mt;for(lt(k,V-257,5),lt(k,$-1,5),lt(k,rt-4,4),mt=0;mt<rt;mt++)lt(k,k.bl_tree[2*g[mt]+1],3);j(k,k.dyn_ltree,V-1),j(k,k.dyn_dtree,$-1)}(P,P.l_desc.max_code+1,P.d_desc.max_code+1,O+1),zt(P,P.dyn_ltree,P.dyn_dtree)),bt(P),it&&_t(P)},A._tr_tally=function(P,F,nt){return P.pending_buf[P.d_buf+2*P.last_lit]=F>>>8&255,P.pending_buf[P.d_buf+2*P.last_lit+1]=255&F,P.pending_buf[P.l_buf+P.last_lit]=255&nt,P.last_lit++,F===0?P.dyn_ltree[2*nt]++:(P.matches++,F--,P.dyn_ltree[2*(c[nt]+_+1)]++,P.dyn_dtree[2*K(F)]++),P.last_lit===P.lit_bufsize-1},A._tr_align=function(P){lt(P,2,3),at(P,a,S),function(F){F.bi_valid===16?(ft(F,F.bi_buf),F.bi_buf=0,F.bi_valid=0):8<=F.bi_valid&&(F.pending_buf[F.pending++]=255&F.bi_buf,F.bi_buf>>=8,F.bi_valid-=8)}(P)}},{"../utils/common":41}],53:[function(Y,X,A){X.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(Y,X,A){(function(d){(function(E,b){if(!E.setImmediate){var f,C,T,_,r=1,e={},u=!1,t=E.document,o=Object.getPrototypeOf&&Object.getPrototypeOf(E);o=o&&o.setTimeout?o:E,f={}.toString.call(E.process)==="[object process]"?function(w){process.nextTick(function(){l(w)})}:function(){if(E.postMessage&&!E.importScripts){var w=!0,v=E.onmessage;return E.onmessage=function(){w=!1},E.postMessage("","*"),E.onmessage=v,w}}()?(_="setImmediate$"+Math.random()+"$",E.addEventListener?E.addEventListener("message",a,!1):E.attachEvent("onmessage",a),function(w){E.postMessage(_+w,"*")}):E.MessageChannel?((T=new MessageChannel).port1.onmessage=function(w){l(w.data)},function(w){T.port2.postMessage(w)}):t&&"onreadystatechange"in t.createElement("script")?(C=t.documentElement,function(w){var v=t.createElement("script");v.onreadystatechange=function(){l(w),v.onreadystatechange=null,C.removeChild(v),v=null},C.appendChild(v)}):function(w){setTimeout(l,0,w)},o.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var v=new Array(arguments.length-1),i=0;i<v.length;i++)v[i]=arguments[i+1];var p={callback:w,args:v};return e[r]=p,f(r),r++},o.clearImmediate=s}function s(w){delete e[w]}function l(w){if(u)setTimeout(l,0,w);else{var v=e[w];if(v){u=!0;try{(function(i){var p=i.callback,x=i.args;switch(x.length){case 0:p();break;case 1:p(x[0]);break;case 2:p(x[0],x[1]);break;case 3:p(x[0],x[1],x[2]);break;default:p.apply(b,x)}})(v)}finally{s(w),u=!1}}}}function a(w){w.source===E&&typeof w.data=="string"&&w.data.indexOf(_)===0&&l(+w.data.slice(_.length))}})(typeof self>"u"?d===void 0?this:d:self)}).call(this,typeof oe<"u"?oe:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(we);var ce=we.exports;const Ge=be(ce),Je=ye({__proto__:null,default:Ge},[ce]);var Ee={exports:{}};(function(Vt,ne){(function(X,A){Vt.exports=A(ce)})(window,function(Y){return function(X){var A={};function d(E){if(A[E])return A[E].exports;var b=A[E]={i:E,l:!1,exports:{}};return X[E].call(b.exports,b,b.exports,d),b.l=!0,b.exports}return d.m=X,d.c=A,d.d=function(E,b,f){d.o(E,b)||Object.defineProperty(E,b,{enumerable:!0,get:f})},d.r=function(E){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})},d.t=function(E,b){if(b&1&&(E=d(E)),b&8||b&4&&typeof E=="object"&&E&&E.__esModule)return E;var f=Object.create(null);if(d.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:E}),b&2&&typeof E!="string")for(var C in E)d.d(f,C,(function(T){return E[T]}).bind(null,C));return f},d.n=function(E){var b=E&&E.__esModule?function(){return E.default}:function(){return E};return d.d(b,"a",b),b},d.o=function(E,b){return Object.prototype.hasOwnProperty.call(E,b)},d.p="/dist/",d(d.s=30)}([function(X,A,d){d.r(A),d.d(A,"requestAnimationFrame",function(){return b}),d.d(A,"uuid",function(){return _}),d.d(A,"documentHeight",function(){return r}),d.d(A,"isElement",function(){return e}),d.d(A,"isNumber",function(){return u}),d.d(A,"isFloat",function(){return t}),d.d(A,"prefixed",function(){return o}),d.d(A,"defaults",function(){return s}),d.d(A,"extend",function(){return l}),d.d(A,"insert",function(){return a}),d.d(A,"locationOf",function(){return w}),d.d(A,"indexOfSorted",function(){return v}),d.d(A,"bounds",function(){return i}),d.d(A,"borders",function(){return p}),d.d(A,"nodeBounds",function(){return x}),d.d(A,"windowBounds",function(){return I}),d.d(A,"indexOfNode",function(){return g}),d.d(A,"indexOfTextNode",function(){return S}),d.d(A,"indexOfElementNode",function(){return y}),d.d(A,"isXml",function(){return D}),d.d(A,"createBlob",function(){return c}),d.d(A,"createBlobUrl",function(){return B}),d.d(A,"revokeBlobUrl",function(){return tt}),d.d(A,"createBase64Url",function(){return Z}),d.d(A,"type",function(){return st}),d.d(A,"parse",function(){return G}),d.d(A,"qs",function(){return ht}),d.d(A,"qsa",function(){return W}),d.d(A,"qsp",function(){return K}),d.d(A,"sprint",function(){return ft}),d.d(A,"treeWalker",function(){return lt}),d.d(A,"walk",function(){return at}),d.d(A,"blob2base64",function(){return yt}),d.d(A,"defer",function(){return wt}),d.d(A,"querySelectorByType",function(){return bt}),d.d(A,"findChildren",function(){return _t}),d.d(A,"parents",function(){return Ct}),d.d(A,"filterChildren",function(){return Tt}),d.d(A,"getParentByTagName",function(){return zt}),d.d(A,"RangeObject",function(){return Bt});var E=d(15);const b=typeof window<"u"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1,f=1,C=3,T=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function _(){var h=new Date().getTime(),j="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(U){var R=(h+Math.random()*16)%16|0;return h=Math.floor(h/16),(U=="x"?R:R&7|8).toString(16)});return j}function r(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function e(h){return!!(h&&h.nodeType==1)}function u(h){return!isNaN(parseFloat(h))&&isFinite(h)}function t(h){let j=parseFloat(h);return u(h)===!1?!1:typeof h=="string"&&h.indexOf(".")>-1?!0:Math.floor(j)!==j}function o(h){var j=["Webkit","webkit","Moz","O","ms"],U=["-webkit-","-webkit-","-moz-","-o-","-ms-"],R=h.toLowerCase(),P=j.length;if(typeof document>"u"||typeof document.body.style[R]<"u")return h;for(var F=0;F<P;F++)if(typeof document.body.style[U[F]+R]<"u")return U[F]+R;return h}function s(h){for(var j=1,U=arguments.length;j<U;j++){var R=arguments[j];for(var P in R)h[P]===void 0&&(h[P]=R[P])}return h}function l(h){var j=[].slice.call(arguments,1);return j.forEach(function(U){U&&Object.getOwnPropertyNames(U).forEach(function(R){Object.defineProperty(h,R,Object.getOwnPropertyDescriptor(U,R))})}),h}function a(h,j,U){var R=w(h,j,U);return j.splice(R,0,h),R}function w(h,j,U,R,P){var F=R||0,nt=P||j.length,it=parseInt(F+(nt-F)/2),n;return U||(U=function(m,O){if(m>O)return 1;if(m<O)return-1;if(m==O)return 0}),nt-F<=0?it:(n=U(j[it],h),nt-F===1?n>=0?it:it+1:n===0?it:n===-1?w(h,j,U,it,nt):w(h,j,U,F,it))}function v(h,j,U,R,P){var F=R||0,nt=P||j.length,it=parseInt(F+(nt-F)/2),n;return U||(U=function(m,O){if(m>O)return 1;if(m<O)return-1;if(m==O)return 0}),nt-F<=0?-1:(n=U(j[it],h),nt-F===1?n===0?it:-1:n===0?it:n===-1?v(h,j,U,it,nt):v(h,j,U,F,it))}function i(h){var j=window.getComputedStyle(h),U=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],R=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],P=0,F=0;return U.forEach(function(nt){P+=parseFloat(j[nt])||0}),R.forEach(function(nt){F+=parseFloat(j[nt])||0}),{height:F,width:P}}function p(h){var j=window.getComputedStyle(h),U=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],R=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],P=0,F=0;return U.forEach(function(nt){P+=parseFloat(j[nt])||0}),R.forEach(function(nt){F+=parseFloat(j[nt])||0}),{height:F,width:P}}function x(h){let j,U=h.ownerDocument;if(h.nodeType==Node.TEXT_NODE){let R=U.createRange();R.selectNodeContents(h),j=R.getBoundingClientRect()}else j=h.getBoundingClientRect();return j}function I(){var h=window.innerWidth,j=window.innerHeight;return{top:0,left:0,right:h,bottom:j,width:h,height:j}}function g(h,j){for(var U=h.parentNode,R=U.childNodes,P,F=-1,nt=0;nt<R.length&&(P=R[nt],P.nodeType===j&&F++,P!=h);nt++);return F}function S(h){return g(h,C)}function y(h){return g(h,f)}function D(h){return["xml","opf","ncx"].indexOf(h)>-1}function c(h,j){return new Blob([h],{type:j})}function B(h,j){var U,R=c(h,j);return U=T.createObjectURL(R),U}function tt(h){return T.revokeObjectURL(h)}function Z(h,j){var U,R;if(typeof h=="string")return U=btoa(h),R="data:"+j+";base64,"+U,R}function st(h){return Object.prototype.toString.call(h).slice(8,-1)}function G(h,j,U){var R,P;return typeof DOMParser>"u"||U?P=E.DOMParser:P=DOMParser,h.charCodeAt(0)===65279&&(h=h.slice(1)),R=new P().parseFromString(h,j),R}function ht(h,j){var U;if(!h)throw new Error("No Element Provided");if(typeof h.querySelector<"u")return h.querySelector(j);if(U=h.getElementsByTagName(j),U.length)return U[0]}function W(h,j){return typeof h.querySelector<"u"?h.querySelectorAll(j):h.getElementsByTagName(j)}function K(h,j,U){var R,P;if(typeof h.querySelector<"u"){j+="[";for(var F in U)j+=F+"~='"+U[F]+"'";return j+="]",h.querySelector(j)}else if(R=h.getElementsByTagName(j),P=Array.prototype.slice.call(R,0).filter(function(nt){for(var it in U)if(nt.getAttribute(it)===U[it])return!0;return!1}),P)return P[0]}function ft(h,j){var U=h.ownerDocument||h;typeof U.createTreeWalker<"u"?lt(h,j,NodeFilter.SHOW_TEXT):at(h,function(R){R&&R.nodeType===3&&j(R)})}function lt(h,j,U){var R=document.createTreeWalker(h,U,null,!1);let P;for(;P=R.nextNode();)j(P)}function at(h,j){if(j(h))return!0;if(h=h.firstChild,h)do{if(at(h,j))return!0;h=h.nextSibling}while(h)}function yt(h){return new Promise(function(j,U){var R=new FileReader;R.readAsDataURL(h),R.onloadend=function(){j(R.result)}})}function wt(){this.resolve=null,this.reject=null,this.id=_(),this.promise=new Promise((h,j)=>{this.resolve=h,this.reject=j}),Object.freeze(this)}function bt(h,j,U){var R;if(typeof h.querySelector<"u"&&(R=h.querySelector(`${j}[*|type="${U}"]`)),!R||R.length===0){R=W(h,j);for(var P=0;P<R.length;P++)if(R[P].getAttributeNS("http://www.idpf.org/2007/ops","type")===U||R[P].getAttribute("epub:type")===U)return R[P]}else return R}function _t(h){for(var j=[],U=h.childNodes,R=0;R<U.length;R++){let P=U[R];P.nodeType===1&&j.push(P)}return j}function Ct(h){for(var j=[h];h;h=h.parentNode)j.unshift(h);return j}function Tt(h,j,U){for(var R=[],P=h.childNodes,F=0;F<P.length;F++){let nt=P[F];if(nt.nodeType===1&&nt.nodeName.toLowerCase()===j){if(U)return nt;R.push(nt)}}if(!U)return R}function zt(h,j){let U;if(!(h===null||j===""))for(U=h.parentNode;U.nodeType===1;){if(U.tagName.toLowerCase()===j)return U;U=U.parentNode}}class Bt{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(j,U){this.startContainer=j,this.startOffset=U,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(j,U){this.endContainer=j,this.endOffset=U,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(j){this.collapsed=!0,j?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(j){let U=j.parentNode,R=Array.prototype.indexOf.call(U.childNodes,j);this.setStart(U,R),this.setEnd(U,R+1)}selectNodeContents(j){j.childNodes[j.childNodes-1];let U=j.nodeType===3?j.textContent.length:parent.childNodes.length;this.setStart(j,0),this.setEnd(j,U)}_commonAncestorContainer(j,U){var R=Ct(j||this.startContainer),P=Ct(U||this.endContainer);if(R[0]==P[0]){for(var F=0;F<R.length;F++)if(R[F]!=P[F])return R[F-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}},function(X,A,d){d.d(A,"b",function(){return E}),d.d(A,"a",function(){return b}),d.d(A,"c",function(){return f});const E="0.3",b=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],f={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}}},function(X,A,d){var E=d(0);const b=1,f=3,C=9;class T{constructor(r,e,u){var t;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof T))return new T(r,e,u);if(typeof e=="string"?this.base=this.parseComponent(e):typeof e=="object"&&e.steps&&(this.base=e),t=this.checkType(r),t==="string")return this.str=r,Object(E.extend)(this,this.parse(r));if(t==="range")return Object(E.extend)(this,this.fromRange(r,this.base,u));if(t==="node")return Object(E.extend)(this,this.fromNode(r,this.base,u));if(t==="EpubCFI"&&r.path)return r;if(r)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(r){return this.isCfiString(r)?"string":r&&typeof r=="object"&&(Object(E.type)(r)==="Range"||typeof r.startContainer<"u")?"range":r&&typeof r=="object"&&typeof r.nodeType<"u"?"node":r&&typeof r=="object"&&r instanceof T?"EpubCFI":!1}parse(r){var e={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},u,t,o;return typeof r!="string"?{spinePos:-1}:(r.indexOf("epubcfi(")===0&&r[r.length-1]===")"&&(r=r.slice(8,r.length-1)),u=this.getChapterComponent(r),u?(e.base=this.parseComponent(u),t=this.getPathComponent(r),e.path=this.parseComponent(t),o=this.getRange(r),o&&(e.range=!0,e.start=this.parseComponent(o[0]),e.end=this.parseComponent(o[1])),e.spinePos=e.base.steps[1].index,e):{spinePos:-1})}parseComponent(r){var e={steps:[],terminal:{offset:null,assertion:null}},u=r.split(":"),t=u[0].split("/"),o;return u.length>1&&(o=u[1],e.terminal=this.parseTerminal(o)),t[0]===""&&t.shift(),e.steps=t.map((function(s){return this.parseStep(s)}).bind(this)),e}parseStep(r){var e,u,t,o,s;if(o=r.match(/\[(.*)\]/),o&&o[1]&&(s=o[1]),u=parseInt(r),!isNaN(u))return u%2===0?(e="element",t=u/2-1):(e="text",t=(u-1)/2),{type:e,index:t,id:s||null}}parseTerminal(r){var e,u,t=r.match(/\[(.*)\]/);return t&&t[1]?(e=parseInt(r.split("[")[0]),u=t[1]):e=parseInt(r),Object(E.isNumber)(e)||(e=null),{offset:e,assertion:u}}getChapterComponent(r){var e=r.split("!");return e[0]}getPathComponent(r){var e=r.split("!");if(e[1])return e[1].split(",")[0]}getRange(r){var e=r.split(",");return e.length===3?[e[1],e[2]]:!1}getCharecterOffsetComponent(r){var e=r.split(":");return e[1]||""}joinSteps(r){return r?r.map(function(e){var u="";return e.type==="element"&&(u+=(e.index+1)*2),e.type==="text"&&(u+=1+2*e.index),e.id&&(u+="["+e.id+"]"),u}).join("/"):""}segmentString(r){var e="/";return e+=this.joinSteps(r.steps),r.terminal&&r.terminal.offset!=null&&(e+=":"+r.terminal.offset),r.terminal&&r.terminal.assertion!=null&&(e+="["+r.terminal.assertion+"]"),e}toString(){var r="epubcfi(";return r+=this.segmentString(this.base),r+="!",r+=this.segmentString(this.path),this.range&&this.start&&(r+=",",r+=this.segmentString(this.start)),this.range&&this.end&&(r+=",",r+=this.segmentString(this.end)),r+=")",r}compare(r,e){var u,t,o,s;if(typeof r=="string"&&(r=new T(r)),typeof e=="string"&&(e=new T(e)),r.spinePos>e.spinePos)return 1;if(r.spinePos<e.spinePos)return-1;r.range?(u=r.path.steps.concat(r.start.steps),o=r.start.terminal):(u=r.path.steps,o=r.path.terminal),e.range?(t=e.path.steps.concat(e.start.steps),s=e.start.terminal):(t=e.path.steps,s=e.path.terminal);for(var l=0;l<u.length;l++){if(!u[l])return-1;if(!t[l]||u[l].index>t[l].index)return 1;if(u[l].index<t[l].index)return-1}return u.length<t.length?-1:o.offset>s.offset?1:o.offset<s.offset?-1:0}step(r){var e=r.nodeType===f?"text":"element";return{id:r.id,tagName:r.tagName,type:e,index:this.position(r)}}filteredStep(r,e){var u=this.filter(r,e),t;if(u)return t=u.nodeType===f?"text":"element",{id:u.id,tagName:u.tagName,type:t,index:this.filteredPosition(u,e)}}pathTo(r,e,u){for(var t={steps:[],terminal:{offset:null,assertion:null}},o=r,s;o&&o.parentNode&&o.parentNode.nodeType!=C;)u?s=this.filteredStep(o,u):s=this.step(o),s&&t.steps.unshift(s),o=o.parentNode;return e!=null&&e>=0&&(t.terminal.offset=e,t.steps[t.steps.length-1].type!="text"&&t.steps.push({type:"text",index:0})),t}equalStep(r,e){return!r||!e?!1:r.index===e.index&&r.id===e.id&&r.type===e.type}fromRange(r,e,u){var t={range:!1,base:{},path:{},start:null,end:null},o=r.startContainer,s=r.endContainer,l=r.startOffset,a=r.endOffset,w=!1;if(u&&(w=o.ownerDocument.querySelector("."+u)!=null),typeof e=="string"?(t.base=this.parseComponent(e),t.spinePos=t.base.steps[1].index):typeof e=="object"&&(t.base=e),r.collapsed)w&&(l=this.patchOffset(o,l,u)),t.path=this.pathTo(o,l,u);else{t.range=!0,w&&(l=this.patchOffset(o,l,u)),t.start=this.pathTo(o,l,u),w&&(a=this.patchOffset(s,a,u)),t.end=this.pathTo(s,a,u),t.path={steps:[],terminal:null};var v=t.start.steps.length,i;for(i=0;i<v&&this.equalStep(t.start.steps[i],t.end.steps[i]);i++)i===v-1?t.start.terminal===t.end.terminal&&(t.path.steps.push(t.start.steps[i]),t.range=!1):t.path.steps.push(t.start.steps[i]);t.start.steps=t.start.steps.slice(t.path.steps.length),t.end.steps=t.end.steps.slice(t.path.steps.length)}return t}fromNode(r,e,u){var t={range:!1,base:{},path:{},start:null,end:null};return typeof e=="string"?(t.base=this.parseComponent(e),t.spinePos=t.base.steps[1].index):typeof e=="object"&&(t.base=e),t.path=this.pathTo(r,null,u),t}filter(r,e){var u,t,o,s,l,a=!1;return r.nodeType===f?(a=!0,o=r.parentNode,u=r.parentNode.classList.contains(e)):(a=!1,u=r.classList.contains(e)),u&&a?(s=o.previousSibling,l=o.nextSibling,s&&s.nodeType===f?t=s:l&&l.nodeType===f&&(t=l),t||r):u&&!a?!1:r}patchOffset(r,e,u){if(r.nodeType!=f)throw new Error("Anchor must be a text node");var t=r,o=e;for(r.parentNode.classList.contains(u)&&(t=r.parentNode);t.previousSibling;){if(t.previousSibling.nodeType===b)if(t.previousSibling.classList.contains(u))o+=t.previousSibling.textContent.length;else break;else o+=t.previousSibling.textContent.length;t=t.previousSibling}return o}normalizedMap(r,e,u){var t={},o=-1,s,l=r.length,a,w;for(s=0;s<l;s++)a=r[s].nodeType,a===b&&r[s].classList.contains(u)&&(a=f),s>0&&a===f&&w===f?t[s]=o:e===a&&(o=o+1,t[s]=o),w=a;return t}position(r){var e,u;return r.nodeType===b?(e=r.parentNode.children,e||(e=Object(E.findChildren)(r.parentNode)),u=Array.prototype.indexOf.call(e,r)):(e=this.textNodes(r.parentNode),u=e.indexOf(r)),u}filteredPosition(r,e){var u,t,o;return r.nodeType===b?(u=r.parentNode.children,o=this.normalizedMap(u,b,e)):(u=r.parentNode.childNodes,r.parentNode.classList.contains(e)&&(r=r.parentNode,u=r.parentNode.childNodes),o=this.normalizedMap(u,f,e)),t=Array.prototype.indexOf.call(u,r),o[t]}stepsToXpath(r){var e=[".","*"];return r.forEach(function(u){var t=u.index+1;u.id?e.push("*[position()="+t+" and @id='"+u.id+"']"):u.type==="text"?e.push("text()["+t+"]"):e.push("*["+t+"]")}),e.join("/")}stepsToQuerySelector(r){var e=["html"];return r.forEach(function(u){var t=u.index+1;u.id?e.push("#"+u.id):u.type==="text"||e.push("*:nth-child("+t+")")}),e.join(">")}textNodes(r,e){return Array.prototype.slice.call(r.childNodes).filter(function(u){return u.nodeType===f?!0:!!(e&&u.classList.contains(e))})}walkToNode(r,e,u){var t=e||document,o=t.documentElement,s,l,a=r.length,w;for(w=0;w<a&&(l=r[w],l.type==="element"?l.id?o=t.getElementById(l.id):(s=o.children||Object(E.findChildren)(o),o=s[l.index]):l.type==="text"&&(o=this.textNodes(o,u)[l.index]),!!o);w++);return o}findNode(r,e,u){var t=e||document,o,s;return!u&&typeof t.evaluate<"u"?(s=this.stepsToXpath(r),o=t.evaluate(s,t,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):u?o=this.walkToNode(r,t,u):o=this.walkToNode(r,t),o}fixMiss(r,e,u,t){var o=this.findNode(r.slice(0,-1),u,t),s=o.childNodes,l=this.normalizedMap(s,f,t),a,w,v=r[r.length-1].index;for(let i in l){if(!l.hasOwnProperty(i))return;if(l[i]===v)if(a=s[i],w=a.textContent.length,e>w)e=e-w;else{a.nodeType===b?o=a.childNodes[0]:o=a;break}}return{container:o,offset:e}}toRange(r,e){var u=r||document,t,o,s,l,a,w=this,v,i,p=e?u.querySelector("."+e)!=null:!1,x;if(typeof u.createRange<"u"?t=u.createRange():t=new E.RangeObject,w.range?(o=w.start,v=w.path.steps.concat(o.steps),l=this.findNode(v,u,p?e:null),s=w.end,i=w.path.steps.concat(s.steps),a=this.findNode(i,u,p?e:null)):(o=w.path,v=w.path.steps,l=this.findNode(w.path.steps,u,p?e:null)),l)try{o.terminal.offset!=null?t.setStart(l,o.terminal.offset):t.setStart(l,0)}catch{x=this.fixMiss(v,o.terminal.offset,u,p?e:null),t.setStart(x.container,x.offset)}else return console.log("No startContainer found for",this.toString()),null;if(a)try{s.terminal.offset!=null?t.setEnd(a,s.terminal.offset):t.setEnd(a,0)}catch{x=this.fixMiss(i,w.end.terminal.offset,u,p?e:null),t.setEnd(x.container,x.offset)}return t}isCfiString(r){return typeof r=="string"&&r.indexOf("epubcfi(")===0&&r[r.length-1]===")"}generateChapterComponent(r,e,u){var t=parseInt(e),o=(r+1)*2,s="/"+o+"/";return s+=(t+1)*2,u&&(s+="["+u+"]"),s}collapse(r){this.range&&(this.range=!1,r?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}A.a=T},function(X,A,d){var E=d(31),b=d(45),f=Function.prototype.apply,C=Function.prototype.call,T=Object.create,_=Object.defineProperty,r=Object.defineProperties,e=Object.prototype.hasOwnProperty,u={configurable:!0,enumerable:!1,writable:!0},t,o,s,l,a,w,v;t=function(i,p){var x;return b(p),e.call(this,"__ee__")?x=this.__ee__:(x=u.value=T(null),_(this,"__ee__",u),u.value=null),x[i]?typeof x[i]=="object"?x[i].push(p):x[i]=[x[i],p]:x[i]=p,this},o=function(i,p){var x,I;return b(p),I=this,t.call(this,i,x=function(){s.call(I,i,x),f.call(p,this,arguments)}),x.__eeOnceListener__=p,this},s=function(i,p){var x,I,g,S;if(b(p),!e.call(this,"__ee__"))return this;if(x=this.__ee__,!x[i])return this;if(I=x[i],typeof I=="object")for(S=0;g=I[S];++S)(g===p||g.__eeOnceListener__===p)&&(I.length===2?x[i]=I[S?0:1]:I.splice(S,1));else(I===p||I.__eeOnceListener__===p)&&delete x[i];return this},l=function(i){var p,x,I,g,S;if(e.call(this,"__ee__")&&(g=this.__ee__[i],!!g))if(typeof g=="object"){for(x=arguments.length,S=new Array(x-1),p=1;p<x;++p)S[p-1]=arguments[p];for(g=g.slice(),p=0;I=g[p];++p)f.call(I,this,S)}else switch(arguments.length){case 1:C.call(g,this);break;case 2:C.call(g,this,arguments[1]);break;case 3:C.call(g,this,arguments[1],arguments[2]);break;default:for(x=arguments.length,S=new Array(x-1),p=1;p<x;++p)S[p-1]=arguments[p];f.call(g,this,S)}},a={on:t,once:o,off:s,emit:l},w={on:E(t),once:E(o),off:E(s),emit:E(l)},v=r({},w),X.exports=A=function(i){return i==null?T(v):r(Object(i),w)},A.methods=a},function(X,A,d){var E=d(7),b=d.n(E);class f{constructor(T){var _,r;_=T.indexOf("://"),_>-1&&(T=new URL(T).pathname),r=this.parse(T),this.path=T,this.isDirectory(T)?this.directory=T:this.directory=r.dir+"/",this.filename=r.base,this.extension=r.ext.slice(1)}parse(T){return b.a.parse(T)}isAbsolute(T){return b.a.isAbsolute(T||this.path)}isDirectory(T){return T.charAt(T.length-1)==="/"}resolve(T){return b.a.resolve(this.directory,T)}relative(T){var _=T&&T.indexOf("://")>-1;return _?T:b.a.relative(this.directory,T)}splitPath(T){return this.splitPathRe.exec(T).slice(1)}toString(){return this.path}}A.a=f},function(X,A,d){var E=d(4),b=d(7),f=d.n(b);class C{constructor(_,r){var e=_.indexOf("://")>-1,u=_,t;if(this.Url=void 0,this.href=_,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=r,!e&&r!==!1&&typeof r!="string"&&window&&window.location&&(this.base=window.location.href),e||this.base)try{this.base?this.Url=new URL(_,this.base):this.Url=new URL(_),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,u=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(t=new E.a(this.base),u=t.resolve(u))}this.Path=new E.a(u),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(_){var r=_.indexOf("://")>-1,e;return r?_:(e=f.a.resolve(this.directory,_),this.origin+e)}relative(_){return f.a.relative(_,this.directory)}toString(){return this.href}}A.a=C},function(X,A,d){class E{constructor(f){this.context=f||this,this.hooks=[]}register(){for(var f=0;f<arguments.length;++f)if(typeof arguments[f]=="function")this.hooks.push(arguments[f]);else for(var C=0;C<arguments[f].length;++C)this.hooks.push(arguments[f][C])}deregister(f){let C;for(let T=0;T<this.hooks.length;T++)if(C=this.hooks[T],C===f){this.hooks.splice(T,1);break}}trigger(){var f=arguments,C=this.context,T=[];return this.hooks.forEach(function(_){try{var r=_.apply(C,f)}catch(e){console.log(e)}r&&typeof r.then=="function"&&T.push(r)}),Promise.all(T)}list(){return this.hooks}clear(){return this.hooks=[]}}A.a=E},function(X,A,d){if(!E)var E={cwd:function(){return"/"}};function b(_){if(typeof _!="string")throw new TypeError("Path must be a string. Received "+_)}function f(_,r){for(var e="",u=-1,t=0,o,s=0;s<=_.length;++s){if(s<_.length)o=_.charCodeAt(s);else{if(o===47)break;o=47}if(o===47){if(!(u===s-1||t===1))if(u!==s-1&&t===2){if(e.length<2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){for(var l=e.length-1,a=l;a>=0&&e.charCodeAt(a)!==47;--a);if(a!==l){a===-1?e="":e=e.slice(0,a),u=s,t=0;continue}}else if(e.length===2||e.length===1){e="",u=s,t=0;continue}}r&&(e.length>0?e+="/..":e="..")}else e.length>0?e+="/"+_.slice(u+1,s):e=_.slice(u+1,s);u=s,t=0}else o===46&&t!==-1?++t:t=-1}return e}function C(_,r){var e=r.dir||r.root,u=r.base||(r.name||"")+(r.ext||"");return e?e===r.root?e+u:e+_+u:u}var T={resolve:function(){for(var r="",e=!1,u,t=arguments.length-1;t>=-1&&!e;t--){var o;t>=0?o=arguments[t]:(u===void 0&&(u=E.cwd()),o=u),b(o),o.length!==0&&(r=o+"/"+r,e=o.charCodeAt(0)===47)}return r=f(r,!e),e?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(r){if(b(r),r.length===0)return".";var e=r.charCodeAt(0)===47,u=r.charCodeAt(r.length-1)===47;return r=f(r,!e),r.length===0&&!e&&(r="."),r.length>0&&u&&(r+="/"),e?"/"+r:r},isAbsolute:function(r){return b(r),r.length>0&&r.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var r,e=0;e<arguments.length;++e){var u=arguments[e];b(u),u.length>0&&(r===void 0?r=u:r+="/"+u)}return r===void 0?".":T.normalize(r)},relative:function(r,e){if(b(r),b(e),r===e||(r=T.resolve(r),e=T.resolve(e),r===e))return"";for(var u=1;u<r.length&&r.charCodeAt(u)===47;++u);for(var t=r.length,o=t-u,s=1;s<e.length&&e.charCodeAt(s)===47;++s);for(var l=e.length,a=l-s,w=o<a?o:a,v=-1,i=0;i<=w;++i){if(i===w){if(a>w){if(e.charCodeAt(s+i)===47)return e.slice(s+i+1);if(i===0)return e.slice(s+i)}else o>w&&(r.charCodeAt(u+i)===47?v=i:i===0&&(v=0));break}var p=r.charCodeAt(u+i),x=e.charCodeAt(s+i);if(p!==x)break;p===47&&(v=i)}var I="";for(i=u+v+1;i<=t;++i)(i===t||r.charCodeAt(i)===47)&&(I.length===0?I+="..":I+="/..");return I.length>0?I+e.slice(s+v):(s+=v,e.charCodeAt(s)===47&&++s,e.slice(s))},_makeLong:function(r){return r},dirname:function(r){if(b(r),r.length===0)return".";for(var e=r.charCodeAt(0),u=e===47,t=-1,o=!0,s=r.length-1;s>=1;--s)if(e=r.charCodeAt(s),e===47){if(!o){t=s;break}}else o=!1;return t===-1?u?"/":".":u&&t===1?"//":r.slice(0,t)},basename:function(r,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');b(r);var u=0,t=-1,o=!0,s;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";var l=e.length-1,a=-1;for(s=r.length-1;s>=0;--s){var w=r.charCodeAt(s);if(w===47){if(!o){u=s+1;break}}else a===-1&&(o=!1,a=s+1),l>=0&&(w===e.charCodeAt(l)?--l===-1&&(t=s):(l=-1,t=a))}return u===t?t=a:t===-1&&(t=r.length),r.slice(u,t)}else{for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!o){u=s+1;break}}else t===-1&&(o=!1,t=s+1);return t===-1?"":r.slice(u,t)}},extname:function(r){b(r);for(var e=-1,u=0,t=-1,o=!0,s=0,l=r.length-1;l>=0;--l){var a=r.charCodeAt(l);if(a===47){if(!o){u=l+1;break}continue}t===-1&&(o=!1,t=l+1),a===46?e===-1?e=l:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||t===-1||s===0||s===1&&e===t-1&&e===u+1?"":r.slice(e,t)},format:function(r){if(r===null||typeof r!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof r);return C("/",r)},parse:function(r){b(r);var e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;var u=r.charCodeAt(0),t=u===47,o;t?(e.root="/",o=1):o=0;for(var s=-1,l=0,a=-1,w=!0,v=r.length-1,i=0;v>=o;--v){if(u=r.charCodeAt(v),u===47){if(!w){l=v+1;break}continue}a===-1&&(w=!1,a=v+1),u===46?s===-1?s=v:i!==1&&(i=1):s!==-1&&(i=-1)}return s===-1||a===-1||i===0||i===1&&s===a-1&&s===l+1?a!==-1&&(l===0&&t?e.base=e.name=r.slice(1,a):e.base=e.name=r.slice(l,a)):(l===0&&t?(e.name=r.slice(1,s),e.base=r.slice(1,a)):(e.name=r.slice(l,s),e.base=r.slice(l,a)),e.ext=r.slice(s,a)),l>0?e.dir=r.slice(0,l-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",posix:null};X.exports=T},function(X,A,d){d.d(A,"a",function(){return f}),d.d(A,"b",function(){return C}),d.d(A,"d",function(){return T}),d.d(A,"c",function(){return _}),d.d(A,"e",function(){return r});var E=d(0),b=d(5);d(4);function f(e,u){var t,o,s=u.url,l=s.indexOf("://")>-1;e&&(o=Object(E.qs)(e,"head"),t=Object(E.qs)(o,"base"),t||(t=e.createElement("base"),o.insertBefore(t,o.firstChild)),!l&&window&&window.location&&(s=window.location.origin+s),t.setAttribute("href",s))}function C(e,u){var t,o,s=u.canonical;e&&(t=Object(E.qs)(e,"head"),o=Object(E.qs)(t,"link[rel='canonical']"),o?o.setAttribute("href",s):(o=e.createElement("link"),o.setAttribute("rel","canonical"),o.setAttribute("href",s),t.appendChild(o)))}function T(e,u){var t,o,s=u.idref;e&&(t=Object(E.qs)(e,"head"),o=Object(E.qs)(t,"link[property='dc.identifier']"),o?o.setAttribute("content",s):(o=e.createElement("meta"),o.setAttribute("name","dc.identifier"),o.setAttribute("content",s),t.appendChild(o)))}function _(e,u){var t=e.querySelectorAll("a[href]");if(t.length)for(var o=Object(E.qs)(e.ownerDocument,"base"),s=o?o.getAttribute("href"):void 0,l=(function(w){var v=w.getAttribute("href");if(v.indexOf("mailto:")!==0){var i=v.indexOf("://")>-1;if(i)w.setAttribute("target","_blank");else{var p;try{p=new b.a(v,s)}catch{}w.onclick=function(){return p&&p.hash?u(p.Path.path+p.hash):u(p?p.Path.path:v),!1}}}}).bind(this),a=0;a<t.length;a++)l(t[a])}function r(e,u,t){return u.forEach(function(o,s){o&&t[s]&&(o=o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),e=e.replace(new RegExp(o,"g"),t[s]))}),e}},function(X,A,d){var E=d(0);class b{constructor(C){this._q=[],this.context=C,this.tick=E.requestAnimationFrame,this.running=!1,this.paused=!1}enqueue(){var C,T,_,r=[].shift.call(arguments),e=arguments;if(!r)throw new Error("No Task Provided");return typeof r=="function"?(C=new E.defer,T=C.promise,_={task:r,args:e,deferred:C,promise:T}):_={promise:r},this._q.push(_),this.paused==!1&&!this.running&&this.run(),_.promise}dequeue(){var C,T,_;if(this._q.length&&!this.paused){if(C=this._q.shift(),T=C.task,T)return _=T.apply(this.context,C.args),_&&typeof _.then=="function"?_.then((function(){C.deferred.resolve.apply(this.context,arguments)}).bind(this),(function(){C.deferred.reject.apply(this.context,arguments)}).bind(this)):(C.deferred.resolve.apply(this.context,_),C.promise);if(C.promise)return C.promise}else return C=new E.defer,C.deferred.resolve(),C.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new E.defer),this.tick.call(window,()=>{this._q.length?this.dequeue().then((function(){this.run()}).bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then((function(){return this.running=void 0,this.flush()}).bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}A.a=b},function(X,A,d){var E=d(3),b=d.n(E),f=d(0);function C(){var v="reverse",i=T();return document.body.appendChild(i),i.scrollLeft>0?v="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(i.children[0].children[1].scrollIntoView(),i.scrollLeft<0&&(v="negative")):(i.scrollLeft=1,i.scrollLeft===0&&(v="negative")),document.body.removeChild(i),v}function T(){var v=document.createElement("div");v.dir="rtl",v.style.position="fixed",v.style.width="1px",v.style.height="1px",v.style.top="0px",v.style.left="0px",v.style.overflow="hidden";var i=document.createElement("div");i.style.width="2px";var p=document.createElement("span");p.style.width="1px",p.style.display="inline-block";var x=document.createElement("span");return x.style.width="1px",x.style.display="inline-block",i.appendChild(p),i.appendChild(x),v.appendChild(i),v}var _=d(11),r=d(9),e=d(28),u=d.n(e);class t{constructor(i){this.settings=i||{},this.id="epubjs-container-"+Object(f.uuid)(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(i){let p=i.height,x=i.width,I=i.overflow||!1,g=i.axis||"vertical",S=i.direction;Object(f.extend)(this.settings,i),i.height&&Object(f.isNumber)(i.height)&&(p=i.height+"px"),i.width&&Object(f.isNumber)(i.width)&&(x=i.width+"px");let y=document.createElement("div");return y.id=this.id,y.classList.add("epub-container"),y.style.wordSpacing="0",y.style.lineHeight="0",y.style.verticalAlign="top",y.style.position="relative",g==="horizontal"&&(y.style.display="flex",y.style.flexDirection="row",y.style.flexWrap="nowrap"),x&&(y.style.width=x),p&&(y.style.height=p),I&&(I==="scroll"&&g==="vertical"?(y.style["overflow-y"]=I,y.style["overflow-x"]="hidden"):I==="scroll"&&g==="horizontal"?(y.style["overflow-y"]="hidden",y.style["overflow-x"]=I):y.style.overflow=I),S&&(y.dir=S,y.style.direction=S),S&&this.settings.fullsize&&(document.body.style.direction=S),y}wrap(i){var p=document.createElement("div");return p.style.visibility="hidden",p.style.overflow="hidden",p.style.width="0",p.style.height="0",p.appendChild(i),p}getElement(i){var p;if(Object(f.isElement)(i)?p=i:typeof i=="string"&&(p=document.getElementById(i)),!p)throw new Error("Not an Element");return p}attachTo(i){var p=this.getElement(i),x;if(p)return this.settings.hidden?x=this.wrapper:x=this.container,p.appendChild(x),this.element=p,p}getContainer(){return this.container}onResize(i){(!Object(f.isNumber)(this.settings.width)||!Object(f.isNumber)(this.settings.height))&&(this.resizeFunc=u()(i,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(i){this.orientationChangeFunc=i,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(i,p){var x;let I=i||this.settings.width,g=p||this.settings.height;i===null?(x=this.element.getBoundingClientRect(),x.width&&(i=Math.floor(x.width),this.container.style.width=i+"px")):Object(f.isNumber)(i)?this.container.style.width=i+"px":this.container.style.width=i,p===null?(x=x||this.element.getBoundingClientRect(),x.height&&(p=x.height,this.container.style.height=p+"px")):Object(f.isNumber)(p)?this.container.style.height=p+"px":this.container.style.height=p,Object(f.isNumber)(i)||(i=this.container.clientWidth),Object(f.isNumber)(p)||(p=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let S=Object(f.windowBounds)(),y=window.getComputedStyle(document.body),D={left:parseFloat(y["padding-left"])||0,right:parseFloat(y["padding-right"])||0,top:parseFloat(y["padding-top"])||0,bottom:parseFloat(y["padding-bottom"])||0};return I||(i=S.width-D.left-D.right),(this.settings.fullsize&&!g||!g)&&(p=S.height-D.top-D.bottom),{width:i-this.containerPadding.left-this.containerPadding.right,height:p-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let i;return this.container.style.overflow!=="visible"&&(i=this.container&&this.container.getBoundingClientRect()),!i||!i.width||!i.height?Object(f.windowBounds)():i}getSheet(){var i=document.createElement("style");return i.appendChild(document.createTextNode("")),document.head.appendChild(i),i.sheet}addStyleRules(i,p){var x="#"+this.id+" ",I="";this.sheet||(this.sheet=this.getSheet()),p.forEach(function(g){for(var S in g)g.hasOwnProperty(S)&&(I+=S+":"+g[S]+";")}),this.sheet.insertRule(x+i+" {"+I+"}",0)}axis(i){i==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=i}direction(i){this.container&&(this.container.dir=i,this.container.style.direction=i),this.settings.fullsize&&(document.body.style.direction=i),this.settings.dir=i}overflow(i){this.container&&(i==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=i,this.container.style["overflow-x"]="hidden"):i==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=i):this.container.style.overflow=i),this.settings.overflow=i}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}}var o=t;class s{constructor(i){this.container=i,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(i){return this._views.indexOf(i)}slice(){return this._views.slice.apply(this._views,arguments)}get(i){return this._views[i]}append(i){return this._views.push(i),this.container&&this.container.appendChild(i.element),this.length++,i}prepend(i){return this._views.unshift(i),this.container&&this.container.insertBefore(i.element,this.container.firstChild),this.length++,i}insert(i,p){return this._views.splice(p,0,i),this.container&&(p<this.container.children.length?this.container.insertBefore(i.element,this.container.children[p]):this.container.appendChild(i.element)),this.length++,i}remove(i){var p=this._views.indexOf(i);p>-1&&this._views.splice(p,1),this.destroy(i),this.length--}destroy(i){i.displayed&&i.destroy(),this.container&&this.container.removeChild(i.element),i=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var i,p=this.length;if(this.length){for(var x=0;x<p;x++)i=this._views[x],this.destroy(i);this._views=[],this.length=0}}find(i){for(var p,x=this.length,I=0;I<x;I++)if(p=this._views[I],p.displayed&&p.section.index==i.index)return p}displayed(){for(var i=[],p,x=this.length,I=0;I<x;I++)p=this._views[I],p.displayed&&i.push(p);return i}show(){for(var i,p=this.length,x=0;x<p;x++)i=this._views[x],i.displayed&&i.show();this.hidden=!1}hide(){for(var i,p=this.length,x=0;x<p;x++)i=this._views[x],i.displayed&&i.hide();this.hidden=!0}}var l=s,a=d(1);class w{constructor(i){this.name="default",this.optsSettings=i.settings,this.View=i.view,this.request=i.request,this.renditionQueue=i.queue,this.q=new r.a(this),this.settings=Object(f.extend)(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),Object(f.extend)(this.settings,i.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(i,p){let x=i.tagName;typeof this.settings.fullsize>"u"&&x&&(x.toLowerCase()=="body"||x.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=p,this.settings.rtlScrollType=C(),this.stage=new o({width:p.width,height:p.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(i),this.container=this.stage.getContainer(),this.views=new l(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var i;window.addEventListener("unload",(function(p){this.destroy()}).bind(this)),this.settings.fullsize?i=window:i=this.container,this._onScroll=this.onScroll.bind(this),i.addEventListener("scroll",this._onScroll)}removeEventListeners(){var i;this.settings.fullsize?i=window:i=this.container,i.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(i){let{orientation:p}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout((function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(a.c.MANAGERS.ORIENTATION_CHANGE,p)}).bind(this),500)}onResized(i){this.resize()}resize(i,p,x){let I=this.stage.size(i,p);if(this.winBounds=Object(f.windowBounds)(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===I.width&&this._stageSize.height===I.height||(this._stageSize=I,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(a.c.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},x))}createView(i,p){return new this.View(i,Object(f.extend)(this.viewSettings,{forceRight:p}))}handleNextPrePaginated(i,p,x){let I;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(i||p.index===0)return;if(I=p.next(),I&&!I.properties.includes("page-spread-left"))return x.call(this,I)}}display(i,p){var x=new f.defer,I=x.promise;(p===i.href||Object(f.isNumber)(p))&&(p=void 0);var g=this.views.find(i);if(g&&i&&this.layout.name!=="pre-paginated"){let y=g.offset();if(this.settings.direction==="ltr")this.scrollTo(y.left,y.top,!0);else{let D=g.width();this.scrollTo(y.left+D,y.top,!0)}if(p){let D=g.locationOf(p),c=g.width();this.moveTo(D,c)}return x.resolve(),I}this.clear();let S=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&i.properties.includes("page-spread-right")&&(S=!0),this.add(i,S).then((function(y){if(p){let D=y.locationOf(p),c=y.width();this.moveTo(D,c)}}).bind(this),y=>{x.reject(y)}).then((function(){return this.handleNextPrePaginated(S,i,this.add)}).bind(this)).then((function(){this.views.show(),x.resolve()}).bind(this)),I}afterDisplayed(i){this.emit(a.c.MANAGERS.ADDED,i)}afterResized(i){this.emit(a.c.MANAGERS.RESIZE,i.section)}moveTo(i,p){var x=0,I=0;this.isPaginated?(x=Math.floor(i.left/this.layout.delta)*this.layout.delta,x+this.layout.delta>this.container.scrollWidth&&(x=this.container.scrollWidth-this.layout.delta),I=Math.floor(i.top/this.layout.delta)*this.layout.delta,I+this.layout.delta>this.container.scrollHeight&&(I=this.container.scrollHeight-this.layout.delta)):I=i.top,this.settings.direction==="rtl"&&(x=x+this.layout.delta,x=x-p),this.scrollTo(x,I,!0)}add(i,p){var x=this.createView(i,p);return this.views.append(x),x.onDisplayed=this.afterDisplayed.bind(this),x.onResize=this.afterResized.bind(this),x.on(a.c.VIEWS.AXIS,I=>{this.updateAxis(I)}),x.on(a.c.VIEWS.WRITING_MODE,I=>{this.updateWritingMode(I)}),x.display(this.request)}append(i,p){var x=this.createView(i,p);return this.views.append(x),x.onDisplayed=this.afterDisplayed.bind(this),x.onResize=this.afterResized.bind(this),x.on(a.c.VIEWS.AXIS,I=>{this.updateAxis(I)}),x.on(a.c.VIEWS.WRITING_MODE,I=>{this.updateWritingMode(I)}),x.display(this.request)}prepend(i,p){var x=this.createView(i,p);return x.on(a.c.VIEWS.RESIZED,I=>{this.counter(I)}),this.views.prepend(x),x.onDisplayed=this.afterDisplayed.bind(this),x.onResize=this.afterResized.bind(this),x.on(a.c.VIEWS.AXIS,I=>{this.updateAxis(I)}),x.on(a.c.VIEWS.WRITING_MODE,I=>{this.updateWritingMode(I)}),x.display(this.request)}counter(i){this.settings.axis==="vertical"?this.scrollBy(0,i.heightDelta,!0):this.scrollBy(i.widthDelta,0,!0)}next(){var i,p;let x=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!x||x==="ltr")?(this.scrollLeft=this.container.scrollLeft,p=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,p<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):i=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&x==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(p=this.container.scrollLeft,p>0?this.scrollBy(this.layout.delta,0,!0):i=this.views.last().section.next()):(p=this.container.scrollLeft+this.layout.delta*-1,p>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):i=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):i=this.views.last().section.next()):i=this.views.last().section.next(),i)){this.clear(),this.updateLayout();let I=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&i.properties.includes("page-spread-right")&&(I=!0),this.append(i,I).then((function(){return this.handleNextPrePaginated(I,i,this.append)}).bind(this),g=>g).then((function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}).bind(this))}}prev(){var i,p;let x=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!x||x==="ltr")?(this.scrollLeft=this.container.scrollLeft,p=this.container.scrollLeft,p>0?this.scrollBy(-this.layout.delta,0,!0):i=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&x==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(p=this.container.scrollLeft+this.container.offsetWidth,p<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):i=this.views.first().section.prev()):(p=this.container.scrollLeft,p<0?this.scrollBy(-this.layout.delta,0,!0):i=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):i=this.views.first().section.prev()):i=this.views.first().section.prev(),i)){this.clear(),this.updateLayout();let I=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof i.prev()!="object"&&(I=!0),this.prepend(i,I).then((function(){var g;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(g=i.prev(),g))return this.prepend(g)}).bind(this),g=>g).then((function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}).bind(this))}}current(){var i=this.visible();return i.length?i[i.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let i=this.visible(),p=this.container.getBoundingClientRect(),x=p.height<window.innerHeight?p.height:window.innerHeight,I=p.width<window.innerWidth?p.width:window.innerWidth,g=this.settings.axis==="vertical";this.settings.direction;let S=0,y=0;return this.settings.fullsize&&(S=g?window.scrollY:window.scrollX),i.map(c=>{let{index:B,href:tt}=c.section,Z=c.position(),st=c.width(),G=c.height(),ht,W,K,ft;g?(ht=S+p.top-Z.top+y,W=ht+x-y,ft=this.layout.count(G,x).pages,K=x):(ht=S+p.left-Z.left+y,W=ht+I-y,ft=this.layout.count(st,I).pages,K=I);let lt=Math.ceil(ht/K),at=[],yt=Math.ceil(W/K);if(this.settings.direction==="rtl"&&!g){let _t=lt;lt=ft-yt,yt=ft-_t}at=[];for(var wt=lt;wt<=yt;wt++){let _t=wt+1;at.push(_t)}let bt=this.mapping.page(c.contents,c.section.cfiBase,ht,W);return{index:B,href:tt,pages:at,totalPages:ft,mapping:bt}})}paginatedLocation(){let i=this.visible(),p=this.container.getBoundingClientRect(),x=0,I=0;return this.settings.fullsize&&(x=window.scrollX),i.map(S=>{let{index:y,href:D}=S.section,c,B=S.position(),tt=S.width(),Z,st,G;this.settings.direction==="rtl"?(c=p.right-x,G=Math.min(Math.abs(c-B.left),this.layout.width)-I,st=B.width-(B.right-c)-I,Z=st-G):(c=p.left+x,G=Math.min(B.right-c,this.layout.width)-I,Z=c-B.left+I,st=Z+G),I+=G;let ht=this.mapping.page(S.contents,S.section.cfiBase,Z,st),W=this.layout.count(tt).pages,K=Math.floor(Z/this.layout.pageWidth),ft=[],lt=Math.floor(st/this.layout.pageWidth);if(K<0&&(K=0,lt=lt+1),this.settings.direction==="rtl"){let yt=K;K=W-lt,lt=W-yt}for(var at=K+1;at<=lt;at++){let yt=at;ft.push(yt)}return{index:y,href:D,pages:ft,totalPages:W,mapping:ht}})}isVisible(i,p,x,I){var g=i.position(),S=I||this.bounds();return this.settings.axis==="horizontal"&&g.right>S.left-p&&g.left<S.right+x?!0:this.settings.axis==="vertical"&&g.bottom>S.top-p&&g.top<S.bottom+x}visible(){for(var i=this.bounds(),p=this.views.displayed(),x=p.length,I=[],g,S,y=0;y<x;y++)S=p[y],g=this.isVisible(S,0,0,i),g===!0&&I.push(S);return I}scrollBy(i,p,x){let I=this.settings.direction==="rtl"?-1:1;x&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(i*I,p*I):(i&&(this.container.scrollLeft+=i*I),p&&(this.container.scrollTop+=p)),this.scrolled=!0}scrollTo(i,p,x){x&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(i,p):(this.container.scrollLeft=i,this.container.scrollTop=p),this.scrolled=!0}onScroll(){let i,p;this.settings.fullsize?(i=window.scrollY,p=window.scrollX):(i=this.container.scrollTop,p=this.container.scrollLeft),this.scrollTop=i,this.scrollLeft=p,this.ignore?this.ignore=!1:(this.emit(a.c.MANAGERS.SCROLL,{top:i,left:p}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.emit(a.c.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),20))}bounds(){var i;return i=this.stage.bounds(),i}applyLayout(i){this.layout=i,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(i){this.viewSettings.layout=i,this.mapping=new _.a(i.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(p){p&&p.setLayout(i)})}updateWritingMode(i){this.writingMode=i}updateAxis(i,p){!p&&i===this.settings.axis||(this.settings.axis=i,this.stage&&this.stage.axis(i),this.viewSettings.axis=i,this.mapping&&(this.mapping=new _.a(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(i==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(i,p="auto"){let x=i==="paginated"||i==="auto";this.isPaginated=x,i==="scrolled-doc"||i==="scrolled-continuous"||i==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=i,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=x?"hidden":p,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var i=[];return this.views&&this.views.forEach(function(p){const x=p&&p.contents;x&&i.push(x)}),i}direction(i="ltr"){this.settings.direction=i,this.stage&&this.stage.direction(i),this.viewSettings.direction=i,this.updateLayout()}isRendered(){return this.rendered}}b()(w.prototype),A.a=w},function(X,A,d){var E=d(2),b=d(0);class f{constructor(T,_,r,e=!1){this.layout=T,this.horizontal=r==="horizontal",this.direction=_||"ltr",this._dev=e}section(T){var _=this.findRanges(T),r=this.rangeListToCfiList(T.section.cfiBase,_);return r}page(T,_,r,e){var u=T&&T.document?T.document.body:!1,t;if(u){if(t=this.rangePairToCfiPair(_,{start:this.findStart(u,r,e),end:this.findEnd(u,r,e)}),this._dev===!0){let o=T.document,s=new E.a(t.start).toRange(o),l=new E.a(t.end).toRange(o),a=o.defaultView.getSelection(),w=o.createRange();a.removeAllRanges(),w.setStart(s.startContainer,s.startOffset),w.setEnd(l.endContainer,l.endOffset),a.addRange(w)}return t}}walk(T,_){if(!(T&&T.nodeType===Node.TEXT_NODE)){var r={acceptNode:function(s){return s.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},e=r.acceptNode;e.acceptNode=r.acceptNode;for(var u=document.createTreeWalker(T,NodeFilter.SHOW_TEXT,e,!1),t,o;(t=u.nextNode())&&(o=_(t),!o););return o}}findRanges(T){for(var _=[],r=T.contents.scrollWidth(),e=Math.ceil(r/this.layout.spreadWidth),u=e*this.layout.divisor,t=this.layout.columnWidth,o=this.layout.gap,s,l,a=0;a<u.pages;a++)s=(t+o)*a,l=t*(a+1)+o*a,_.push({start:this.findStart(T.document.body,s,l),end:this.findEnd(T.document.body,s,l)});return _}findStart(T,_,r){for(var e=[T],u,t,o=T;e.length;)if(u=e.shift(),t=this.walk(u,s=>{var l,a,w,v,i;if(i=Object(b.nodeBounds)(s),this.horizontal&&this.direction==="ltr"){if(l=this.horizontal?i.left:i.top,a=this.horizontal?i.right:i.bottom,l>=_&&l<=r)return s;if(a>_)return s;o=s,e.push(s)}else if(this.horizontal&&this.direction==="rtl"){if(l=i.left,a=i.right,a<=r&&a>=_)return s;if(l<r)return s;o=s,e.push(s)}else{if(w=i.top,v=i.bottom,w>=_&&w<=r)return s;if(v>_)return s;o=s,e.push(s)}}),t)return this.findTextStartRange(t,_,r);return this.findTextStartRange(o,_,r)}findEnd(T,_,r){for(var e=[T],u,t=T,o;e.length;)if(u=e.shift(),o=this.walk(u,s=>{var l,a,w,v,i;if(i=Object(b.nodeBounds)(s),this.horizontal&&this.direction==="ltr"){if(l=Math.round(i.left),a=Math.round(i.right),l>r&&t)return t;if(a>r)return s;t=s,e.push(s)}else if(this.horizontal&&this.direction==="rtl"){if(l=Math.round(this.horizontal?i.left:i.top),a=Math.round(this.horizontal?i.right:i.bottom),a<_&&t)return t;if(l<_)return s;t=s,e.push(s)}else{if(w=Math.round(i.top),v=Math.round(i.bottom),w>r&&t)return t;if(v>r)return s;t=s,e.push(s)}}),o)return this.findTextEndRange(o,_,r);return this.findTextEndRange(t,_,r)}findTextStartRange(T,_,r){for(var e=this.splitTextNodeIntoRanges(T),u,t,o,s,l,a=0;a<e.length;a++)if(u=e[a],t=u.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(o=t.left,o>=_)return u}else if(this.horizontal&&this.direction==="rtl"){if(l=t.right,l<=r)return u}else if(s=t.top,s>=_)return u;return e[0]}findTextEndRange(T,_,r){for(var e=this.splitTextNodeIntoRanges(T),u,t,o,s,l,a,w,v=0;v<e.length;v++){if(t=e[v],o=t.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(s=o.left,l=o.right,s>r&&u)return u;if(l>r)return t}else if(this.horizontal&&this.direction==="rtl"){if(s=o.left,l=o.right,l<_&&u)return u;if(s<_)return t}else{if(a=o.top,w=o.bottom,a>r&&u)return u;if(w>r)return t}u=t}return e[e.length-1]}splitTextNodeIntoRanges(T,_){var r=[],e=T.textContent||"",u=e.trim(),t,o=T.ownerDocument,s=_||" ",l=u.indexOf(s);if(l===-1||T.nodeType!=Node.TEXT_NODE)return t=o.createRange(),t.selectNodeContents(T),[t];for(t=o.createRange(),t.setStart(T,0),t.setEnd(T,l),r.push(t),t=!1;l!=-1;)l=u.indexOf(s,l+1),l>0&&(t&&(t.setEnd(T,l),r.push(t)),t=o.createRange(),t.setStart(T,l+1));return t&&(t.setEnd(T,u.length),r.push(t)),r}rangePairToCfiPair(T,_){var r=_.start,e=_.end;r.collapse(!0),e.collapse(!1);let u=new E.a(r,T).toString(),t=new E.a(e,T).toString();return{start:u,end:t}}rangeListToCfiList(T,_){for(var r=[],e,u=0;u<_.length;u++)e=this.rangePairToCfiPair(T,_[u]),r.push(e);return r}axis(T){return T&&(this.horizontal=T==="horizontal"),this.horizontal}}A.a=f},function(X,A,d){var E=d(3),b=d.n(E),f=d(0),C=d(2),T=d(11),_=d(8),r=d(1);const e=typeof navigator<"u",u=e&&/Chrome/.test(navigator.userAgent),t=e&&!u&&/AppleWebKit/.test(navigator.userAgent),o=1;class s{constructor(a,w,v,i){this.epubcfi=new C.a,this.document=a,this.documentElement=this.document.documentElement,this.content=w||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=i||0,this.cfiBase=v||"",this.epubReadingSystem("epub.js",r.b),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return r.a}width(a){var w=this.content;return a&&Object(f.isNumber)(a)&&(a=a+"px"),a&&(w.style.width=a),parseInt(this.window.getComputedStyle(w).width)}height(a){var w=this.content;return a&&Object(f.isNumber)(a)&&(a=a+"px"),a&&(w.style.height=a),parseInt(this.window.getComputedStyle(w).height)}contentWidth(a){var w=this.content||this.document.body;return a&&Object(f.isNumber)(a)&&(a=a+"px"),a&&(w.style.width=a),parseInt(this.window.getComputedStyle(w).width)}contentHeight(a){var w=this.content||this.document.body;return a&&Object(f.isNumber)(a)&&(a=a+"px"),a&&(w.style.height=a),parseInt(this.window.getComputedStyle(w).height)}textWidth(){let a,w,v=this.document.createRange(),i=this.content||this.document.body,p=Object(f.borders)(i);return v.selectNodeContents(i),a=v.getBoundingClientRect(),w=a.width,p&&p.width&&(w+=p.width),Math.round(w)}textHeight(){let a,w,v=this.document.createRange(),i=this.content||this.document.body;return v.selectNodeContents(i),a=v.getBoundingClientRect(),w=a.bottom,Math.round(w)}scrollWidth(){var a=this.documentElement.scrollWidth;return a}scrollHeight(){var a=this.documentElement.scrollHeight;return a}overflow(a){return a&&(this.documentElement.style.overflow=a),this.window.getComputedStyle(this.documentElement).overflow}overflowX(a){return a&&(this.documentElement.style.overflowX=a),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(a){return a&&(this.documentElement.style.overflowY=a),this.window.getComputedStyle(this.documentElement).overflowY}css(a,w,v){var i=this.content||this.document.body;return w?i.style.setProperty(a,w,v?"important":""):i.style.removeProperty(a),this.window.getComputedStyle(i)[a]}viewport(a){var w=this.document.querySelector("meta[name='viewport']"),v={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},i=[],p={};if(w&&w.hasAttribute("content")){let x=w.getAttribute("content"),I=x.match(/width\s*=\s*([^,]*)/),g=x.match(/height\s*=\s*([^,]*)/),S=x.match(/initial-scale\s*=\s*([^,]*)/),y=x.match(/minimum-scale\s*=\s*([^,]*)/),D=x.match(/maximum-scale\s*=\s*([^,]*)/),c=x.match(/user-scalable\s*=\s*([^,]*)/);I&&I.length&&typeof I[1]<"u"&&(v.width=I[1]),g&&g.length&&typeof g[1]<"u"&&(v.height=g[1]),S&&S.length&&typeof S[1]<"u"&&(v.scale=S[1]),y&&y.length&&typeof y[1]<"u"&&(v.minimum=y[1]),D&&D.length&&typeof D[1]<"u"&&(v.maximum=D[1]),c&&c.length&&typeof c[1]<"u"&&(v.scalable=c[1])}return p=Object(f.defaults)(a||{},v),a&&(p.width&&i.push("width="+p.width),p.height&&i.push("height="+p.height),p.scale&&i.push("initial-scale="+p.scale),p.scalable==="no"?(i.push("minimum-scale="+p.scale),i.push("maximum-scale="+p.scale),i.push("user-scalable="+p.scalable)):(p.scalable&&i.push("user-scalable="+p.scalable),p.minimum&&i.push("minimum-scale="+p.minimum),p.maximum&&i.push("minimum-scale="+p.maximum)),w||(w=this.document.createElement("meta"),w.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(w)),w.setAttribute("content",i.join(", ")),this.window.scrollTo(0,0)),p}expand(){this.emit(r.c.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let a=this.textWidth(),w=this.textHeight();(a!=this._size.width||w!=this._size.height)&&(this._size={width:a,height:w},this.onResize&&this.onResize(this._size),this.emit(r.c.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let a=this.content;a.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",a.style.transitionDuration="0.001ms",a.style.transitionTimingFunction="linear",a.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var a=this.document.styleSheets,w=(function(I){I.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}).bind(this),v=0;v<a.length;v+=1){var i;try{i=a[v].cssRules}catch{return}if(!i)return;for(var p=0;p<i.length;p+=1)if(i[p].media){var x=this.window.matchMedia(i[p].media.mediaText);x.addListener(w)}}}resizeObservers(){this.observer=new ResizeObserver(a=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(w=>{this.resizeCheck()});let a={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,a)}imageLoadListeners(){for(var a=this.document.querySelectorAll("img"),w,v=0;v<a.length;v++)w=a[v],typeof w.naturalWidth<"u"&&w.naturalWidth===0&&(w.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then((function(){this.resizeCheck()}).bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(a,w){var v,i={left:0,top:0};if(!this.document)return i;if(this.epubcfi.isCfiString(a)){let p=new C.a(a).toRange(this.document,w);if(p){try{if(!p.endContainer||p.startContainer==p.endContainer&&p.startOffset==p.endOffset){let x=p.startContainer.textContent.indexOf(" ",p.startOffset);x==-1&&(x=p.startContainer.textContent.length),p.setEnd(p.startContainer,x)}}catch(x){console.error("setting end offset to start container length failed",x)}if(p.startContainer.nodeType===Node.ELEMENT_NODE)v=p.startContainer.getBoundingClientRect(),i.left=v.left,i.top=v.top;else if(t){let x=p.startContainer,I=new Range;try{x.nodeType===o?v=x.getBoundingClientRect():p.startOffset+2<x.length?(I.setStart(x,p.startOffset),I.setEnd(x,p.startOffset+2),v=I.getBoundingClientRect()):p.startOffset-2>0?(I.setStart(x,p.startOffset-2),I.setEnd(x,p.startOffset),v=I.getBoundingClientRect()):v=x.parentNode.getBoundingClientRect()}catch(g){console.error(g,g.stack)}}else v=p.getBoundingClientRect()}}else if(typeof a=="string"&&a.indexOf("#")>-1){let p=a.substring(a.indexOf("#")+1),x=this.document.getElementById(p);if(x)if(t){let I=new Range;I.selectNode(x),v=I.getBoundingClientRect()}else v=x.getBoundingClientRect()}return v&&(i.left=v.left,i.top=v.top),i}addStylesheet(a){return new Promise((function(w,v){var i,p=!1;if(!this.document){w(!1);return}if(i=this.document.querySelector("link[href='"+a+"']"),i){w(!0);return}i=this.document.createElement("link"),i.type="text/css",i.rel="stylesheet",i.href=a,i.onload=i.onreadystatechange=function(){!p&&(!this.readyState||this.readyState=="complete")&&(p=!0,setTimeout(()=>{w(!0)},1))},this.document.head.appendChild(i)}).bind(this))}_getStylesheetNode(a){var w;return a="epubjs-inserted-css-"+(a||""),this.document?(w=this.document.getElementById(a),w||(w=this.document.createElement("style"),w.id=a,this.document.head.appendChild(w)),w):!1}addStylesheetCss(a,w){if(!this.document||!a)return!1;var v;return v=this._getStylesheetNode(w),v.innerHTML=a,!0}addStylesheetRules(a,w){var v;if(!(!this.document||!a||a.length===0))if(v=this._getStylesheetNode(w).sheet,Object.prototype.toString.call(a)==="[object Array]")for(var i=0,p=a.length;i<p;i++){var x=1,I=a[i],g=a[i][0],S="";Object.prototype.toString.call(I[1][0])==="[object Array]"&&(I=I[1],x=0);for(var y=I.length;x<y;x++){var D=I[x];S+=D[0]+":"+D[1]+(D[2]?" !important":"")+`;
`}v.insertRule(g+"{"+S+"}",v.cssRules.length)}else Object.keys(a).forEach(B=>{const tt=a[B];if(Array.isArray(tt))tt.forEach(Z=>{const G=Object.keys(Z).map(ht=>`${ht}:${Z[ht]}`).join(";");v.insertRule(`${B}{${G}}`,v.cssRules.length)});else{const st=Object.keys(tt).map(G=>`${G}:${tt[G]}`).join(";");v.insertRule(`${B}{${st}}`,v.cssRules.length)}})}addScript(a){return new Promise((function(w,v){var i,p=!1;if(!this.document){w(!1);return}i=this.document.createElement("script"),i.type="text/javascript",i.async=!0,i.src=a,i.onload=i.onreadystatechange=function(){!p&&(!this.readyState||this.readyState=="complete")&&(p=!0,setTimeout(function(){w(!0)},1))},this.document.head.appendChild(i)}).bind(this))}addClass(a){var w;this.document&&(w=this.content||this.document.body,w&&w.classList.add(a))}removeClass(a){var w;this.document&&(w=this.content||this.document.body,w&&w.classList.remove(a))}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),r.a.forEach(function(a){this.document.addEventListener(a,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(r.a.forEach(function(a){this.document.removeEventListener(a,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(a){this.emit(a.type,a)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(a){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout((function(){var w=this.window.getSelection();this.triggerSelectedEvent(w)}).bind(this),250)}triggerSelectedEvent(a){var w,v;a&&a.rangeCount>0&&(w=a.getRangeAt(0),w.collapsed||(v=new C.a(w,this.cfiBase).toString(),this.emit(r.c.CONTENTS.SELECTED,v),this.emit(r.c.CONTENTS.SELECTED_RANGE,w)))}range(a,w){var v=new C.a(a);return v.toRange(this.document,w)}cfiFromRange(a,w){return new C.a(a,this.cfiBase,w).toString()}cfiFromNode(a,w){return new C.a(a,this.cfiBase,w).toString()}map(a){var w=new T.a(a);return w.section()}size(a,w){var v={scale:1,scalable:"no"};this.layoutStyle("scrolling"),a>=0&&(this.width(a),v.width=a,this.css("padding","0 "+a/12+"px")),w>=0&&(this.height(w),v.height=w),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(v)}columns(a,w,v,i,p){let x=Object(f.prefixed)("column-axis"),I=Object(f.prefixed)("column-gap"),g=Object(f.prefixed)("column-width"),S=Object(f.prefixed)("column-fill"),D=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),p==="rtl"&&D==="horizontal"&&this.direction(p),this.width(a),this.height(w),this.viewport({width:a,height:w,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),D==="vertical"?(this.css("padding-top",i/2+"px",!0),this.css("padding-bottom",i/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(x,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",i/2+"px",!0),this.css("padding-right",i/2+"px",!0),this.css(x,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(S,"auto"),this.css(I,i+"px"),this.css(g,v+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(a,w,v){var i="scale("+a+")",p="";this.css("transform-origin","top left"),(w>=0||v>=0)&&(p=" translate("+(w||0)+"px, "+(v||0)+"px )"),this.css("transform",i+p)}fit(a,w,v){var i=this.viewport(),p=parseInt(i.width),x=parseInt(i.height),I=a/p,g=w/x,S=I<g?I:g;if(this.layoutStyle("paginated"),this.width(p),this.height(x),this.overflow("hidden"),this.scaler(S,0,0),this.css("background-size",p*S+"px "+x*S+"px"),this.css("background-color","transparent"),v&&v.properties.includes("page-spread-left")){var y=a-p*S;this.css("margin-left",y+"px")}}direction(a){this.documentElement&&(this.documentElement.style.direction=a)}mapPage(a,w,v,i,p){var x=new T.a(w,p);return x.page(this,a,v,i)}linksHandler(){Object(_.c)(this.content,a=>{this.emit(r.c.CONTENTS.LINK_CLICKED,a)})}writingMode(a){let w=Object(f.prefixed)("writing-mode");return a&&this.documentElement&&(this.documentElement.style[w]=a),this.window.getComputedStyle(this.documentElement)[w]||""}layoutStyle(a){return a&&(this._layoutStyle=a,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(a,w){return navigator.epubReadingSystem={name:a,version:w,layoutStyle:this.layoutStyle(),hasFeature:function(v){switch(v){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}b()(s.prototype),A.a=s},function(X,A,d){Object.defineProperty(A,"__esModule",{value:!0}),A.Underline=A.Highlight=A.Mark=A.Pane=void 0;var E=function v(i,p,x){i===null&&(i=Function.prototype);var I=Object.getOwnPropertyDescriptor(i,p);if(I===void 0){var g=Object.getPrototypeOf(i);return g===null?void 0:v(g,p,x)}else{if("value"in I)return I.value;var S=I.get;return S===void 0?void 0:S.call(x)}},b=function(){function v(i,p){for(var x=0;x<p.length;x++){var I=p[x];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(i,I.key,I)}}return function(i,p,x){return p&&v(i.prototype,p),x&&v(i,x),i}}(),f=d(49),C=r(f),T=d(50),_=r(T);function r(v){return v&&v.__esModule?v:{default:v}}function e(v,i){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:v}function u(v,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);v.prototype=Object.create(i&&i.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(v,i):v.__proto__=i)}function t(v,i){if(!(v instanceof i))throw new TypeError("Cannot call a class as a function")}A.Pane=function(){function v(i){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;t(this,v),this.target=i,this.element=C.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),_.default.proxyMouse(this.target,this.marks),this.container=p,this.container.appendChild(this.element),this.render()}return b(v,[{key:"addMark",value:function(p){var x=C.default.createElement("g");return this.element.appendChild(x),p.bind(x,this.container),this.marks.push(p),p.render(),p}},{key:"removeMark",value:function(p){var x=this.marks.indexOf(p);if(x!==-1){var I=p.unbind();this.element.removeChild(I),this.marks.splice(x,1)}}},{key:"render",value:function(){a(this.element,l(this.target,this.container));var p=!0,x=!1,I=void 0;try{for(var g=this.marks[Symbol.iterator](),S;!(p=(S=g.next()).done);p=!0){var y=S.value;y.render()}}catch(D){x=!0,I=D}finally{try{!p&&g.return&&g.return()}finally{if(x)throw I}}}}]),v}();var o=A.Mark=function(){function v(){t(this,v),this.element=null}return b(v,[{key:"bind",value:function(p,x){this.element=p,this.container=x}},{key:"unbind",value:function(){var p=this.element;return this.element=null,p}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(p){this.element&&this.element.dispatchEvent(p)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var p=[],x=this.element.firstChild;x;)p.push(x.getBoundingClientRect()),x=x.nextSibling;return p}},{key:"filteredRanges",value:function(){var p=Array.from(this.range.getClientRects());return p.filter(function(x){for(var I=0;I<p.length;I++){if(p[I]===x)return!0;var g=w(p[I],x);if(g)return!1}return!0})}}]),v}(),s=A.Highlight=function(v){u(i,v);function i(p,x,I,g){t(this,i);var S=e(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return S.range=p,S.className=x,S.data=I||{},S.attributes=g||{},S}return b(i,[{key:"bind",value:function(x,I){E(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"bind",this).call(this,x,I);for(var g in this.data)this.data.hasOwnProperty(g)&&(this.element.dataset[g]=this.data[g]);for(var g in this.attributes)this.attributes.hasOwnProperty(g)&&this.element.setAttribute(g,this.attributes[g]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var x=this.element.ownerDocument.createDocumentFragment(),I=this.filteredRanges(),g=this.element.getBoundingClientRect(),S=this.container.getBoundingClientRect(),y=0,D=I.length;y<D;y++){var c=I[y],B=C.default.createElement("rect");B.setAttribute("x",c.left-g.left+S.left),B.setAttribute("y",c.top-g.top+S.top),B.setAttribute("height",c.height),B.setAttribute("width",c.width),x.appendChild(B)}this.element.appendChild(x)}}]),i}(o);A.Underline=function(v){u(i,v);function i(p,x,I,g){return t(this,i),e(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,p,x,I,g))}return b(i,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var x=this.element.ownerDocument.createDocumentFragment(),I=this.filteredRanges(),g=this.element.getBoundingClientRect(),S=this.container.getBoundingClientRect(),y=0,D=I.length;y<D;y++){var c=I[y],B=C.default.createElement("rect");B.setAttribute("x",c.left-g.left+S.left),B.setAttribute("y",c.top-g.top+S.top),B.setAttribute("height",c.height),B.setAttribute("width",c.width),B.setAttribute("fill","none");var tt=C.default.createElement("line");tt.setAttribute("x1",c.left-g.left+S.left),tt.setAttribute("x2",c.left-g.left+S.left+c.width),tt.setAttribute("y1",c.top-g.top+S.top+c.height-1),tt.setAttribute("y2",c.top-g.top+S.top+c.height-1),tt.setAttribute("stroke-width",1),tt.setAttribute("stroke","black"),tt.setAttribute("stroke-linecap","square"),x.appendChild(B),x.appendChild(tt)}this.element.appendChild(x)}}]),i}(s);function l(v,i){var p=i.getBoundingClientRect(),x=v.getBoundingClientRect();return{top:x.top-p.top,left:x.left-p.left,height:v.scrollHeight,width:v.scrollWidth}}function a(v,i){v.style.setProperty("top",i.top+"px","important"),v.style.setProperty("left",i.left+"px","important"),v.style.setProperty("height",i.height+"px","important"),v.style.setProperty("width",i.width+"px","important")}function w(v,i){return i.right<=v.right&&i.left>=v.left&&i.top>=v.top&&i.bottom<=v.bottom}},function(X,A,d){function E(C,T){return T===void 0&&(T=Object),T&&typeof T.freeze=="function"?T.freeze(C):C}var b=E({HTML:"text/html",isHTML:function(C){return C===b.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),f=E({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(C){return C===f.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});A.freeze=E,A.MIME_TYPE=b,A.NAMESPACE=f},function(X,A,d){var E=d(25);A.DOMImplementation=E.DOMImplementation,A.XMLSerializer=E.XMLSerializer,A.DOMParser=d(46).DOMParser},function(X,A,d){var E=d(3),b=d.n(E),f=d(0),C=d(6),T=d(2),_=d(9),r=d(1);class e{constructor(g){this.settings=g,this.name=g.layout||"reflowable",this._spread=g.spread!=="none",this._minSpreadWidth=g.minSpreadWidth||800,this._evenSpreads=g.evenSpreads||!1,g.flow==="scrolled"||g.flow==="scrolled-continuous"||g.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(g){return typeof g<"u"&&(g==="scrolled"||g==="scrolled-continuous"||g==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(g,S){return g&&(this._spread=g!=="none",this.update({spread:this._spread})),S>=0&&(this._minSpreadWidth=S),this._spread}calculate(g,S,y){var D=1,c=y||0,B=g,tt=S,Z=Math.floor(B/12),st,G,ht,W;this._spread&&B>=this._minSpreadWidth?D=2:D=1,this.name==="reflowable"&&this._flow==="paginated"&&!(y>=0)&&(c=Z%2===0?Z:Z-1),this.name==="pre-paginated"&&(c=0),D>1?(st=B/D-c,ht=st+c):(st=B,ht=B),this.name==="pre-paginated"&&D>1&&(B=st),G=st*D+c,W=B,this.width=B,this.height=tt,this.spreadWidth=G,this.pageWidth=ht,this.delta=W,this.columnWidth=st,this.gap=c,this.divisor=D,this.update({width:B,height:tt,spreadWidth:G,pageWidth:ht,delta:W,columnWidth:st,gap:c,divisor:D})}format(g,S,y){var D;return this.name==="pre-paginated"?D=g.fit(this.columnWidth,this.height,S):this._flow==="paginated"?D=g.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):y&&y==="horizontal"?D=g.size(null,this.height):D=g.size(this.width,null),D}count(g,S){let y,D;return this.name==="pre-paginated"?(y=1,D=1):this._flow==="paginated"?(S=S||this.delta,y=Math.ceil(g/S),D=y*this.divisor):(S=S||this.height,y=Math.ceil(g/S),D=y),{spreads:y,pages:D}}update(g){if(Object.keys(g).forEach(S=>{this.props[S]===g[S]&&delete g[S]}),Object.keys(g).length>0){let S=Object(f.extend)(this.props,g);this.emit(r.c.LAYOUT.UPDATED,S,g)}}}b()(e.prototype);var u=e,t=d(5);class o{constructor(g){this.rendition=g,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(g){if(g){if(typeof g=="string")return this.registerUrl("default",g);if(typeof g=="object")return this.registerRules("default",g)}}registerThemes(g){for(var S in g)g.hasOwnProperty(S)&&(typeof g[S]=="string"?this.registerUrl(S,g[S]):this.registerRules(S,g[S]))}registerCss(g,S){this._themes[g]={serialized:S},(this._injected[g]||g=="default")&&this.update(g)}registerUrl(g,S){var y=new t.a(S);this._themes[g]={url:y.toString()},(this._injected[g]||g=="default")&&this.update(g)}registerRules(g,S){this._themes[g]={rules:S},(this._injected[g]||g=="default")&&this.update(g)}select(g){var S=this._current,y;this._current=g,this.update(g),y=this.rendition.getContents(),y.forEach(D=>{D.removeClass(S),D.addClass(g)})}update(g){var S=this.rendition.getContents();S.forEach(y=>{this.add(g,y)})}inject(g){var S=[],y=this._themes,D;for(var c in y)y.hasOwnProperty(c)&&(c===this._current||c==="default")&&(D=y[c],(D.rules&&Object.keys(D.rules).length>0||D.url&&S.indexOf(D.url)===-1)&&this.add(c,g),this._injected.push(c));this._current!="default"&&g.addClass(this._current)}add(g,S){var y=this._themes[g];!y||!S||(y.url?S.addStylesheet(y.url):y.serialized?(S.addStylesheetCss(y.serialized,g),y.injected=!0):y.rules&&(S.addStylesheetRules(y.rules,g),y.injected=!0))}override(g,S,y){var D=this.rendition.getContents();this._overrides[g]={value:S,priority:y===!0},D.forEach(c=>{c.css(g,this._overrides[g].value,this._overrides[g].priority)})}removeOverride(g){var S=this.rendition.getContents();delete this._overrides[g],S.forEach(y=>{y.css(g)})}overrides(g){var S=this._overrides;for(var y in S)S.hasOwnProperty(y)&&g.css(y,S[y].value,S[y].priority)}fontSize(g){this.override("font-size",g)}font(g){this.override("font-family",g,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}var s=o;d(12);class l{constructor(g){this.rendition=g,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(g,S,y,D,c,B){let tt=encodeURI(S+g),st=new T.a(S).spinePos,G=new a({type:g,cfiRange:S,data:y,sectionIndex:st,cb:D,className:c,styles:B});return this._annotations[tt]=G,st in this._annotationsBySectionIndex?this._annotationsBySectionIndex[st].push(tt):this._annotationsBySectionIndex[st]=[tt],this.rendition.views().forEach(W=>{G.sectionIndex===W.index&&G.attach(W)}),G}remove(g,S){let y=encodeURI(g+S);if(y in this._annotations){let D=this._annotations[y];if(S&&D.type!==S)return;this.rendition.views().forEach(B=>{this._removeFromAnnotationBySectionIndex(D.sectionIndex,y),D.sectionIndex===B.index&&D.detach(B)}),delete this._annotations[y]}}_removeFromAnnotationBySectionIndex(g,S){this._annotationsBySectionIndex[g]=this._annotationsAt(g).filter(y=>y!==S)}_annotationsAt(g){return this._annotationsBySectionIndex[g]}highlight(g,S,y,D,c){return this.add("highlight",g,S,y,D,c)}underline(g,S,y,D,c){return this.add("underline",g,S,y,D,c)}mark(g,S,y){return this.add("mark",g,S,y)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(g){let S=g.index;S in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[S].forEach(D=>{this._annotations[D].attach(g)})}clear(g){let S=g.index;S in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[S].forEach(D=>{this._annotations[D].detach(g)})}show(){}hide(){}}class a{constructor({type:g,cfiRange:S,data:y,sectionIndex:D,cb:c,className:B,styles:tt}){this.type=g,this.cfiRange=S,this.data=y,this.sectionIndex=D,this.mark=void 0,this.cb=c,this.className=B,this.styles=tt}update(g){this.data=g}attach(g){let{cfiRange:S,data:y,type:D,mark:c,cb:B,className:tt,styles:Z}=this,st;return D==="highlight"?st=g.highlight(S,y,B,tt,Z):D==="underline"?st=g.underline(S,y,B,tt,Z):D==="mark"&&(st=g.mark(S,y,B)),this.mark=st,this.emit(r.c.ANNOTATION.ATTACH,st),st}detach(g){let{cfiRange:S,type:y}=this,D;return g&&(y==="highlight"?D=g.unhighlight(S):y==="underline"?D=g.ununderline(S):y==="mark"&&(D=g.unmark(S))),this.mark=void 0,this.emit(r.c.ANNOTATION.DETACH,D),D}text(){}}b()(a.prototype);var w=l,v=d(20),i=d(10),p=d(22);class x{constructor(g,S){this.settings=Object(f.extend)(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),Object(f.extend)(this.settings,S),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=g,this.hooks={},this.hooks.display=new C.a(this),this.hooks.serialize=new C.a(this),this.hooks.content=new C.a(this),this.hooks.unloaded=new C.a(this),this.hooks.layout=new C.a(this),this.hooks.render=new C.a(this),this.hooks.show=new C.a(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new s(this),this.annotations=new w(this),this.epubcfi=new T.a,this.q=new _.a(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new f.defer,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(g){this.manager=g}requireManager(g){var S;return typeof g=="string"&&g==="default"?S=i.a:typeof g=="string"&&g==="continuous"?S=p.a:S=g,S}requireView(g){var S;return typeof g=="string"&&g==="iframe"?S=v.a:S=g,S}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(r.c.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(r.c.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(r.c.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(r.c.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(r.c.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(r.c.RENDITION.STARTED),this.starting.resolve()}attachTo(g){return this.q.enqueue((function(){this.manager.render(g,{width:this.settings.width,height:this.settings.height}),this.emit(r.c.RENDITION.ATTACHED)}).bind(this))}display(g){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,g)}_display(g){if(this.book){this.epubcfi.isCfiString(g);var S=new f.defer,y=S.promise,D;return this.displaying=S,this.book.locations.length()&&Object(f.isFloat)(g)&&(g=this.book.locations.cfiFromPercentage(parseFloat(g))),D=this.book.spine.get(g),D?(this.manager.display(D,g).then(()=>{S.resolve(D),this.displaying=void 0,this.emit(r.c.RENDITION.DISPLAYED,D),this.reportLocation()},c=>{this.emit(r.c.RENDITION.DISPLAY_ERROR,c)}),y):(S.reject(new Error("No Section Found")),y)}}afterDisplayed(g){g.on(r.c.VIEWS.MARK_CLICKED,(S,y)=>this.triggerMarkEvent(S,y,g.contents)),this.hooks.render.trigger(g,this).then(()=>{g.contents?this.hooks.content.trigger(g.contents,this).then(()=>{this.emit(r.c.RENDITION.RENDERED,g.section,g)}):this.emit(r.c.RENDITION.RENDERED,g.section,g)})}afterRemoved(g){this.hooks.unloaded.trigger(g,this).then(()=>{this.emit(r.c.RENDITION.REMOVED,g.section,g)})}onResized(g,S){this.emit(r.c.RENDITION.RESIZED,{width:g.width,height:g.height},S),this.location&&this.location.start&&this.display(S||this.location.start.cfi)}onOrientationChange(g){this.emit(r.c.RENDITION.ORIENTATION_CHANGE,g)}moveTo(g){this.manager.moveTo(g)}resize(g,S,y){g&&(this.settings.width=g),S&&(this.settings.height=S),this.manager.resize(g,S,y)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(g){var S,y=this.settings.layout||g.layout||"reflowable",D=this.settings.spread||g.spread||"auto",c=this.settings.orientation||g.orientation||"auto",B=this.settings.flow||g.flow||"auto",tt=g.viewport||"",Z=this.settings.minSpreadWidth||g.minSpreadWidth||800,st=this.settings.direction||g.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),S={layout:y,spread:D,orientation:c,flow:B,viewport:tt,minSpreadWidth:Z,direction:st},S}flow(g){var S=g;(g==="scrolled"||g==="scrolled-doc"||g==="scrolled-continuous")&&(S="scrolled"),(g==="auto"||g==="paginated")&&(S="paginated"),this.settings.flow=g,this._layout&&this._layout.flow(S),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(S),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(g){return g&&(this._layout=new u(g),this._layout.spread(g.spread,this.settings.minSpreadWidth),this._layout.on(r.c.LAYOUT.UPDATED,(S,y)=>{this.emit(r.c.RENDITION.LAYOUT,S,y)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(g,S){this.settings.spread=g,S&&(this.settings.minSpreadWidth=S),this._layout&&this._layout.spread(g,S),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(g){this.settings.direction=g||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue((function(){requestAnimationFrame((function(){var y=this.manager.currentLocation();if(y&&y.then&&typeof y.then=="function")y.then((function(D){let c=this.located(D);!c||!c.start||!c.end||(this.location=c,this.emit(r.c.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(r.c.RENDITION.RELOCATED,this.location))}).bind(this));else if(y){let D=this.located(y);if(!D||!D.start||!D.end)return;this.location=D,this.emit(r.c.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(r.c.RENDITION.RELOCATED,this.location)}}).bind(this))}).bind(this))}currentLocation(){var g=this.manager.currentLocation();if(g&&g.then&&typeof g.then=="function")g.then((function(S){return this.located(S)}).bind(this));else if(g)return this.located(g)}located(g){if(!g.length)return{};let S=g[0],y=g[g.length-1],D={start:{index:S.index,href:S.href,cfi:S.mapping.start,displayed:{page:S.pages[0]||1,total:S.totalPages}},end:{index:y.index,href:y.href,cfi:y.mapping.end,displayed:{page:y.pages[y.pages.length-1]||1,total:y.totalPages}}},c=this.book.locations.locationFromCfi(S.mapping.start),B=this.book.locations.locationFromCfi(y.mapping.end);c!=null&&(D.start.location=c,D.start.percentage=this.book.locations.percentageFromLocation(c)),B!=null&&(D.end.location=B,D.end.percentage=this.book.locations.percentageFromLocation(B));let tt=this.book.pageList.pageFromCfi(S.mapping.start),Z=this.book.pageList.pageFromCfi(y.mapping.end);return tt!=-1&&(D.start.page=tt),Z!=-1&&(D.end.page=Z),y.index===this.book.spine.last().index&&D.end.displayed.page>=D.end.displayed.total&&(D.atEnd=!0),S.index===this.book.spine.first().index&&D.start.displayed.page===1&&(D.atStart=!0),D}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(g){r.a.forEach(S=>{g.on(S,y=>this.triggerViewEvent(y,g))}),g.on(r.c.CONTENTS.SELECTED,S=>this.triggerSelectedEvent(S,g))}triggerViewEvent(g,S){this.emit(g.type,g,S)}triggerSelectedEvent(g,S){this.emit(r.c.RENDITION.SELECTED,g,S)}triggerMarkEvent(g,S,y){this.emit(r.c.RENDITION.MARK_CLICKED,g,S,y)}getRange(g,S){var y=new T.a(g),D=this.manager.visible().filter(function(c){if(y.spinePos===c.index)return!0});if(D.length)return D[0].contents.range(y,S)}adjustImages(g){if(this._layout.name==="pre-paginated")return new Promise(function(c){c()});let S=g.window.getComputedStyle(g.content,null),y=(g.content.offsetHeight-(parseFloat(S.paddingTop)+parseFloat(S.paddingBottom)))*.95,D=parseFloat(S.paddingLeft)+parseFloat(S.paddingRight);return g.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-D+"px":"100%")+"!important","max-height":y+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-D+"px":"100%")+"!important","max-height":y+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(c,B){setTimeout(function(){c()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(g){g&&g.on(r.c.CONTENTS.LINK_CLICKED,S=>{let y=this.book.path.relative(S);this.display(y)})}injectStylesheet(g,S){let y=g.createElement("link");y.setAttribute("type","text/css"),y.setAttribute("rel","stylesheet"),y.setAttribute("href",this.settings.stylesheet),g.getElementsByTagName("head")[0].appendChild(y)}injectScript(g,S){let y=g.createElement("script");y.setAttribute("type","text/javascript"),y.setAttribute("src",this.settings.script),y.textContent=" ",g.getElementsByTagName("head")[0].appendChild(y)}injectIdentifier(g,S){let y=this.book.packaging.metadata.identifier,D=g.createElement("meta");D.setAttribute("name","dc.relation.ispartof"),y&&D.setAttribute("content",y),g.getElementsByTagName("head")[0].appendChild(D)}}b()(x.prototype),A.a=x},function(X,A){var d;d=function(){return this}();try{d=d||new Function("return this")()}catch{typeof window=="object"&&(d=window)}X.exports=d},function(X,A,d){var E=d(38)();X.exports=function(b){return b!==E&&b!==null}},function(X,A){function d(E){var b=typeof E;return E!=null&&(b=="object"||b=="function")}X.exports=d},function(X,A,d){var E=d(3),b=d.n(E),f=d(0),C=d(2),T=d(12),_=d(1),r=d(13);class e{constructor(t,o){this.settings=Object(f.extend)({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},o||{}),this.id="epubjs-view-"+Object(f.uuid)(),this.section=t,this.index=t.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new C.a,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(t){var o=document.createElement("div");return o.classList.add("epub-view"),o.style.height="0px",o.style.width="0px",o.style.overflow="hidden",o.style.position="relative",o.style.display="block",t&&t=="horizontal"?o.style.flex="none":o.style.flex="initial",o}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=Object(f.bounds)(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(t,o){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(t)),this.sectionRender.then((function(s){return this.load(s)}).bind(this)).then((function(){let s=this.contents.writingMode(),l;return this.settings.flow==="scrolled"?l=s.indexOf("vertical")===0?"horizontal":"vertical":l=s.indexOf("vertical")===0?"vertical":"horizontal",s.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(l),this.emit(_.c.VIEWS.AXIS,l),this.setWritingMode(s),this.emit(_.c.VIEWS.WRITING_MODE,s),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((a,w)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),a()})}).bind(this),(function(s){return this.emit(_.c.VIEWS.LOAD_ERROR,s),new Promise((l,a)=>{a(s)})}).bind(this)).then((function(){this.emit(_.c.VIEWS.RENDERED,this.section)}).bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(t,o){var s=t||this.settings.width,l=o||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",s,l):this.settings.axis==="horizontal"?this.lock("height",s,l):this.lock("width",s,l),this.settings.width=s,this.settings.height=l}lock(t,o,s){var l=Object(f.borders)(this.element),a;this.iframe?a=Object(f.borders)(this.iframe):a={width:0,height:0},t=="width"&&Object(f.isNumber)(o)&&(this.lockedWidth=o-l.width-a.width),t=="height"&&Object(f.isNumber)(s)&&(this.lockedHeight=s-l.height-a.height),t==="both"&&Object(f.isNumber)(o)&&Object(f.isNumber)(s)&&(this.lockedWidth=o-l.width-a.width,this.lockedHeight=s-l.height-a.height),this.displayed&&this.iframe&&this.expand()}expand(t){var o=this.lockedWidth,s=this.lockedHeight,l;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(o=this.layout.columnWidth,s=this.layout.height):this.settings.axis==="horizontal"?(o=this.contents.textWidth(),o%this.layout.pageWidth>0&&(o=Math.ceil(o/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(l=o/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&l%2>0&&(o+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(s=this.contents.textHeight(),this.settings.flow==="paginated"&&s%this.layout.height>0&&(s=Math.ceil(s/this.layout.height)*this.layout.height)),(this._needsReframe||o!=this._width||s!=this._height)&&this.reframe(o,s),this._expanding=!1)}reframe(t,o){var s;Object(f.isNumber)(t)&&(this.element.style.width=t+"px",this.iframe.style.width=t+"px",this._width=t),Object(f.isNumber)(o)&&(this.element.style.height=o+"px",this.iframe.style.height=o+"px",this._height=o);let l=this.prevBounds?t-this.prevBounds.width:t,a=this.prevBounds?o-this.prevBounds.height:o;s={width:t,height:o,widthDelta:l,heightDelta:a},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let w;for(let v in this.marks)this.marks.hasOwnProperty(v)&&(w=this.marks[v],this.placeMark(w.element,w.range))}),this.onResize(this,s),this.emit(_.c.VIEWS.RESIZED,s),this.prevBounds=s,this.elementBounds=Object(f.bounds)(this.element)}load(t){var o=new f.defer,s=o.promise;if(!this.iframe)return o.reject(new Error("No Iframe Available")),s;if(this.iframe.onload=(function(a){this.onLoad(a,o)}).bind(this),this.settings.method==="blobUrl")this.blobUrl=Object(f.createBlobUrl)(t,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=t,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return o.reject(new Error("No Document Available")),s;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var l=this;MSApp.execUnsafeLocalFunction(function(){l.iframe.contentDocument.write(t)})}else this.iframe.contentDocument.write(t);this.iframe.contentDocument.close()}return s}onLoad(t,o){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new T.a(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var s=this.document.querySelector("link[rel='canonical']");s?s.setAttribute("href",this.section.canonical):(s=this.document.createElement("link"),s.setAttribute("rel","canonical"),s.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(s)),this.contents.on(_.c.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(_.c.CONTENTS.RESIZE,l=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),o.resolve(this.contents)}setLayout(t){this.layout=t,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(t){this.settings.axis=t,t=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(t){this.writingMode=t}addListeners(){}removeListeners(t){}display(t){var o=new f.defer;return this.displayed?o.resolve(this):this.render(t).then((function(){this.emit(_.c.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,o.resolve(this)}).bind(this),function(s){o.reject(s,this)}),o.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(_.c.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(_.c.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(t){this.iframe.getBoundingClientRect();var o=this.contents.locationOf(t,this.settings.ignoreClass);return{left:o.left,top:o.top}}onDisplayed(t){}onResize(t,o){}bounds(t){return(t||!this.elementBounds)&&(this.elementBounds=Object(f.bounds)(this.element)),this.elementBounds}highlight(t,o={},s,l="epubjs-hl",a={}){if(!this.contents)return;const w=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},a);let v=this.contents.range(t),i=()=>{this.emit(_.c.VIEWS.MARK_CLICKED,t,o)};o.epubcfi=t,this.pane||(this.pane=new r.Pane(this.iframe,this.element));let p=new r.Highlight(v,l,o,w),x=this.pane.addMark(p);return this.highlights[t]={mark:x,element:x.element,listeners:[i,s]},x.element.setAttribute("ref",l),x.element.addEventListener("click",i),x.element.addEventListener("touchstart",i),s&&(x.element.addEventListener("click",s),x.element.addEventListener("touchstart",s)),x}underline(t,o={},s,l="epubjs-ul",a={}){if(!this.contents)return;const w=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},a);let v=this.contents.range(t),i=()=>{this.emit(_.c.VIEWS.MARK_CLICKED,t,o)};o.epubcfi=t,this.pane||(this.pane=new r.Pane(this.iframe,this.element));let p=new r.Underline(v,l,o,w),x=this.pane.addMark(p);return this.underlines[t]={mark:x,element:x.element,listeners:[i,s]},x.element.setAttribute("ref",l),x.element.addEventListener("click",i),x.element.addEventListener("touchstart",i),s&&(x.element.addEventListener("click",s),x.element.addEventListener("touchstart",s)),x}mark(t,o={},s){if(!this.contents)return;if(t in this.marks)return this.marks[t];let l=this.contents.range(t);if(!l)return;let a=l.commonAncestorContainer,w=a.nodeType===1?a:a.parentNode,v=p=>{this.emit(_.c.VIEWS.MARK_CLICKED,t,o)};l.collapsed&&a.nodeType===1?(l=new Range,l.selectNodeContents(a)):l.collapsed&&(l=new Range,l.selectNodeContents(w));let i=this.document.createElement("a");return i.setAttribute("ref","epubjs-mk"),i.style.position="absolute",i.dataset.epubcfi=t,o&&Object.keys(o).forEach(p=>{i.dataset[p]=o[p]}),s&&(i.addEventListener("click",s),i.addEventListener("touchstart",s)),i.addEventListener("click",v),i.addEventListener("touchstart",v),this.placeMark(i,l),this.element.appendChild(i),this.marks[t]={element:i,range:l,listeners:[v,s]},w}placeMark(t,o){let s,l,a;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let v=o.getBoundingClientRect();s=v.top,l=v.right}else{let v=o.getClientRects(),i;for(var w=0;w!=v.length;w++)i=v[w],(!a||i.left<a)&&(a=i.left,l=Math.ceil(a/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,s=i.top)}t.style.top=`${s}px`,t.style.left=`${l}px`}unhighlight(t){let o;t in this.highlights&&(o=this.highlights[t],this.pane.removeMark(o.mark),o.listeners.forEach(s=>{s&&(o.element.removeEventListener("click",s),o.element.removeEventListener("touchstart",s))}),delete this.highlights[t])}ununderline(t){let o;t in this.underlines&&(o=this.underlines[t],this.pane.removeMark(o.mark),o.listeners.forEach(s=>{s&&(o.element.removeEventListener("click",s),o.element.removeEventListener("touchstart",s))}),delete this.underlines[t])}unmark(t){let o;t in this.marks&&(o=this.marks[t],this.element.removeChild(o.element),o.listeners.forEach(s=>{s&&(o.element.removeEventListener("click",s),o.element.removeEventListener("touchstart",s))}),delete this.marks[t])}destroy(){for(let t in this.highlights)this.unhighlight(t);for(let t in this.underlines)this.ununderline(t);for(let t in this.marks)this.unmark(t);this.blobUrl&&Object(f.revokeBlobUrl)(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}b()(e.prototype),A.a=e},function(X,A,d){var E=d(19),b=d(51),f=d(53),C="Expected a function",T=Math.max,_=Math.min;function r(e,u,t){var o,s,l,a,w,v,i=0,p=!1,x=!1,I=!0;if(typeof e!="function")throw new TypeError(C);u=f(u)||0,E(t)&&(p=!!t.leading,x="maxWait"in t,l=x?T(f(t.maxWait)||0,u):l,I="trailing"in t?!!t.trailing:I);function g(G){var ht=o,W=s;return o=s=void 0,i=G,a=e.apply(W,ht),a}function S(G){return i=G,w=setTimeout(c,u),p?g(G):a}function y(G){var ht=G-v,W=G-i,K=u-ht;return x?_(K,l-W):K}function D(G){var ht=G-v,W=G-i;return v===void 0||ht>=u||ht<0||x&&W>=l}function c(){var G=b();if(D(G))return B(G);w=setTimeout(c,y(G))}function B(G){return w=void 0,I&&o?g(G):(o=s=void 0,a)}function tt(){w!==void 0&&clearTimeout(w),i=0,o=v=s=w=void 0}function Z(){return w===void 0?a:B(b())}function st(){var G=b(),ht=D(G);if(o=arguments,s=this,v=G,ht){if(w===void 0)return S(v);if(x)return clearTimeout(w),w=setTimeout(c,u),g(v)}return w===void 0&&(w=setTimeout(c,u)),a}return st.cancel=tt,st.flush=Z,st}X.exports=r},function(X,A,d){var E=d(0),b=d(10),f=d(1),C=d(3),T=d.n(C);const _={easeInCubic:function(s){return Math.pow(s,3)}};class r{constructor(l,a){this.settings=Object(E.extend)({duration:80,minVelocity:.2,minDistance:10,easing:_.easeInCubic},a||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(l)}setup(l){this.manager=l,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(f.c.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(f.c.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(l){let a=l.contents;["touchstart","touchmove","touchend"].forEach(w=>{a.on(w,v=>this.triggerViewEvent(v,a))})}triggerViewEvent(l,a){this.emit(l.type,l,a)}onScroll(l){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(l){this.resizeCanceler=!0}onTouchStart(l){let{screenX:a,screenY:w}=l.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=a,this.startTouchY=w,this.startTime=this.now()),this.endTouchX=a,this.endTouchY=w,this.endTime=this.now()}onTouchMove(l){let{screenX:a,screenY:w}=l.touches[0],v=Math.abs(w-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&v<10&&(this.element.scrollLeft-=a-this.endTouchX),this.endTouchX=a,this.endTouchY=w,this.endTime=this.now()}onTouchEnd(l){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let a=this.wasSwiped();a!==0?this.snap(a):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let l=this.layout.pageWidth*this.layout.divisor,a=this.endTouchX-this.startTouchX,w=Math.abs(a),v=this.endTime-this.startTime,i=a/v,p=this.settings.minVelocity;if(w<=this.settings.minDistance||w>=l)return 0;if(i>p)return-1;if(i<-p)return 1}needsSnap(){let l=this.scrollLeft,a=this.layout.pageWidth*this.layout.divisor;return l%a!==0}snap(l=0){let a=this.scrollLeft,w=this.layout.pageWidth*this.layout.divisor,v=Math.round(a/w)*w;return l&&(v+=l*w),this.smoothScrollTo(v)}smoothScrollTo(l){const a=new E.defer,w=this.scrollLeft,v=this.now(),i=this.settings.duration,p=this.settings.easing;this.snapping=!0;function x(){const I=this.now(),g=Math.min(1,(I-v)/i);if(p(g),this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,a.resolve();return}g<1?(window.requestAnimationFrame(x.bind(this)),this.scrollTo(w+(l-w)*g,0)):(this.scrollTo(l,0),this.snapping=!1,a.resolve())}return x.call(this),a.promise}scrollTo(l=0,a=0){this.fullsize?window.scroll(l,a):(this.scroller.scrollLeft=l,this.scroller.scrollTop=a)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}T()(r.prototype);var e=r,u=d(21),t=d.n(u);class o extends b.a{constructor(l){super(l),this.name="continuous",this.settings=Object(E.extend)(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),Object(E.extend)(this.settings,l.settings||{}),l.settings.gap!="undefined"&&l.settings.gap===0&&(this.settings.gap=l.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(l,a){return b.a.prototype.display.call(this,l,a).then((function(){return this.fill()}).bind(this))}fill(l){var a=l||new E.defer;return this.q.enqueue(()=>this.check()).then(w=>{w?this.fill(a):a.resolve()}),a.promise}moveTo(l){var a=0,w=0;this.isPaginated?(a=Math.floor(l.left/this.layout.delta)*this.layout.delta,a+this.settings.offsetDelta):(w=l.top,l.top+this.settings.offsetDelta),(a>0||w>0)&&this.scrollBy(a,w,!0)}afterResized(l){this.emit(f.c.MANAGERS.RESIZE,l.section)}removeShownListeners(l){l.onDisplayed=function(){}}add(l){var a=this.createView(l);return this.views.append(a),a.on(f.c.VIEWS.RESIZED,w=>{a.expanded=!0}),a.on(f.c.VIEWS.AXIS,w=>{this.updateAxis(w)}),a.on(f.c.VIEWS.WRITING_MODE,w=>{this.updateWritingMode(w)}),a.onDisplayed=this.afterDisplayed.bind(this),a.onResize=this.afterResized.bind(this),a.display(this.request)}append(l){var a=this.createView(l);return a.on(f.c.VIEWS.RESIZED,w=>{a.expanded=!0}),a.on(f.c.VIEWS.AXIS,w=>{this.updateAxis(w)}),a.on(f.c.VIEWS.WRITING_MODE,w=>{this.updateWritingMode(w)}),this.views.append(a),a.onDisplayed=this.afterDisplayed.bind(this),a}prepend(l){var a=this.createView(l);return a.on(f.c.VIEWS.RESIZED,w=>{this.counter(w),a.expanded=!0}),a.on(f.c.VIEWS.AXIS,w=>{this.updateAxis(w)}),a.on(f.c.VIEWS.WRITING_MODE,w=>{this.updateWritingMode(w)}),this.views.prepend(a),a.onDisplayed=this.afterDisplayed.bind(this),a}counter(l){this.settings.axis==="vertical"?this.scrollBy(0,l.heightDelta,!0):this.scrollBy(l.widthDelta,0,!0)}update(l){for(var a=this.bounds(),w=this.views.all(),v=w.length,i=typeof l<"u"?l:this.settings.offset||0,p,x,I=new E.defer,g=[],S=0;S<v;S++)if(x=w[S],p=this.isVisible(x,i,i,a),p===!0)if(x.displayed)x.show();else{let y=x.display(this.request).then(function(D){D.show()},D=>{x.hide()});g.push(y)}else this.q.enqueue(x.destroy.bind(x)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout((function(){this.q.enqueue(this.trim.bind(this))}).bind(this),250);return g.length?Promise.all(g).catch(y=>{I.reject(y)}):(I.resolve(),I.promise)}check(l,a){var w=new E.defer,v=[],i=this.settings.axis==="horizontal",p=this.settings.offset||0;l&&i&&(p=l),a&&!i&&(p=a);var x=this._bounds;let I=i?this.scrollLeft:this.scrollTop,g=i?Math.floor(x.width):x.height,S=i?this.container.scrollWidth:this.container.scrollHeight,y=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",D=this.settings.rtlScrollType,c=this.settings.direction==="rtl";this.settings.fullsize?(i&&c&&D==="negative"||!i&&c&&D==="default")&&(I=I*-1):(c&&D==="default"&&y==="horizontal"&&(I=S-g-I),c&&D==="negative"&&y==="horizontal"&&(I=I*-1));let B=()=>{let ht=this.views.first(),W=ht&&ht.section.prev();W&&v.push(this.prepend(W))},tt=()=>{let ht=this.views.last(),W=ht&&ht.section.next();W&&v.push(this.append(W))},Z=I+g+p,st=I-p;Z>=S&&tt(),st<0&&B();let G=v.map(ht=>ht.display(this.request));return v.length?Promise.all(G).then(()=>this.check()).then(()=>this.update(p),ht=>ht):(this.q.enqueue((function(){this.update()}).bind(this)),w.resolve(!1),w.promise)}trim(){for(var l=new E.defer,a=this.views.displayed(),w=a[0],v=a[a.length-1],i=this.views.indexOf(w),p=this.views.indexOf(v),x=this.views.slice(0,i),I=this.views.slice(p+1),g=0;g<x.length-1;g++)this.erase(x[g],x);for(var S=1;S<I.length;S++)this.erase(I[S]);return l.resolve(),l.promise}erase(l,a){var w,v;this.settings.fullsize?(w=window.scrollY,v=window.scrollX):(w=this.container.scrollTop,v=this.container.scrollLeft);var i=l.bounds();this.views.remove(l),a&&(this.settings.axis==="vertical"?this.scrollTo(0,w-i.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(v+Math.floor(i.width),0,!0):this.scrollTo(v,0,!0):this.scrollTo(v-Math.floor(i.width),0,!0))}addEventListeners(l){window.addEventListener("unload",(function(a){this.ignore=!0,this.destroy()}).bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new e(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var l;this.tick=E.requestAnimationFrame;let a=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(l=window,this.scrollTop=window.scrollY*a,this.scrollLeft=window.scrollX*a):(l=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),l.addEventListener("scroll",this._onScroll),this._scrolled=t()(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var l;this.settings.fullsize?l=window:l=this.container,l.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let l,a,w=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(l=window.scrollY*w,a=window.scrollX*w):(l=this.container.scrollTop,a=this.container.scrollLeft),this.scrollTop=l,this.scrollLeft=a,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(l-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(a-this.prevScrollLeft),this.prevScrollTop=l,this.prevScrollLeft=a,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}).bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue((function(){return this.check()}).bind(this)),this.emit(f.c.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(f.c.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),this.settings.afterScrolledTimeout)}next(){let l=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(l,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}prev(){let l=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-l,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}updateFlow(l){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(l,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new e(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}A.a=o},function(X,A,d){(function(E){var b,b;/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(f){X.exports=f()})(function(){return function f(C,T,_){function r(t,o){if(!T[t]){if(!C[t]){var s=typeof b=="function"&&b;if(!o&&s)return b(t,!0);if(e)return e(t,!0);var l=new Error("Cannot find module '"+t+"'");throw l.code="MODULE_NOT_FOUND",l}var a=T[t]={exports:{}};C[t][0].call(a.exports,function(w){var v=C[t][1][w];return r(v||w)},a,a.exports,f,C,T,_)}return T[t].exports}for(var e=typeof b=="function"&&b,u=0;u<_.length;u++)r(_[u]);return r}({1:[function(f,C,T){(function(_){var r=_.MutationObserver||_.WebKitMutationObserver,e;if(r){var u=0,t=new r(w),o=_.document.createTextNode("");t.observe(o,{characterData:!0}),e=function(){o.data=u=++u%2}}else if(!_.setImmediate&&typeof _.MessageChannel<"u"){var s=new _.MessageChannel;s.port1.onmessage=w,e=function(){s.port2.postMessage(0)}}else"document"in _&&"onreadystatechange"in _.document.createElement("script")?e=function(){var i=_.document.createElement("script");i.onreadystatechange=function(){w(),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},_.document.documentElement.appendChild(i)}:e=function(){setTimeout(w,0)};var l,a=[];function w(){l=!0;for(var i,p,x=a.length;x;){for(p=a,a=[],i=-1;++i<x;)p[i]();x=a.length}l=!1}C.exports=v;function v(i){a.push(i)===1&&!l&&e()}}).call(this,typeof E<"u"?E:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(f,C,T){var _=f(1);function r(){}var e={},u=["REJECTED"],t=["FULFILLED"],o=["PENDING"];C.exports=s;function s(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=o,this.queue=[],this.outcome=void 0,S!==r&&v(this,S)}s.prototype.catch=function(S){return this.then(null,S)},s.prototype.then=function(S,y){if(typeof S!="function"&&this.state===t||typeof y!="function"&&this.state===u)return this;var D=new this.constructor(r);if(this.state!==o){var c=this.state===t?S:y;a(D,c,this.outcome)}else this.queue.push(new l(D,S,y));return D};function l(S,y,D){this.promise=S,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}l.prototype.callFulfilled=function(S){e.resolve(this.promise,S)},l.prototype.otherCallFulfilled=function(S){a(this.promise,this.onFulfilled,S)},l.prototype.callRejected=function(S){e.reject(this.promise,S)},l.prototype.otherCallRejected=function(S){a(this.promise,this.onRejected,S)};function a(S,y,D){_(function(){var c;try{c=y(D)}catch(B){return e.reject(S,B)}c===S?e.reject(S,new TypeError("Cannot resolve promise with itself")):e.resolve(S,c)})}e.resolve=function(S,y){var D=i(w,y);if(D.status==="error")return e.reject(S,D.value);var c=D.value;if(c)v(S,c);else{S.state=t,S.outcome=y;for(var B=-1,tt=S.queue.length;++B<tt;)S.queue[B].callFulfilled(y)}return S},e.reject=function(S,y){S.state=u,S.outcome=y;for(var D=-1,c=S.queue.length;++D<c;)S.queue[D].callRejected(y);return S};function w(S){var y=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof y=="function")return function(){y.apply(S,arguments)}}function v(S,y){var D=!1;function c(st){D||(D=!0,e.reject(S,st))}function B(st){D||(D=!0,e.resolve(S,st))}function tt(){y(B,c)}var Z=i(tt);Z.status==="error"&&c(Z.value)}function i(S,y){var D={};try{D.value=S(y),D.status="success"}catch(c){D.status="error",D.value=c}return D}s.resolve=p;function p(S){return S instanceof this?S:e.resolve(new this(r),S)}s.reject=x;function x(S){var y=new this(r);return e.reject(y,S)}s.all=I;function I(S){var y=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=S.length,c=!1;if(!D)return this.resolve([]);for(var B=new Array(D),tt=0,Z=-1,st=new this(r);++Z<D;)G(S[Z],Z);return st;function G(ht,W){y.resolve(ht).then(K,function(ft){c||(c=!0,e.reject(st,ft))});function K(ft){B[W]=ft,++tt===D&&!c&&(c=!0,e.resolve(st,B))}}}s.race=g;function g(S){var y=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=S.length,c=!1;if(!D)return this.resolve([]);for(var B=-1,tt=new this(r);++B<D;)Z(S[B]);return tt;function Z(st){y.resolve(st).then(function(G){c||(c=!0,e.resolve(tt,G))},function(G){c||(c=!0,e.reject(tt,G))})}}},{1:1}],3:[function(f,C,T){(function(_){typeof _.Promise!="function"&&(_.Promise=f(2))}).call(this,typeof E<"u"?E:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(f,C,T){var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L};function r(L,H){if(!(L instanceof H))throw new TypeError("Cannot call a class as a function")}function e(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=e();function t(){try{if(!u||!u.open)return!1;var L=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),H=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!L||H)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function o(L,H){L=L||[],H=H||{};try{return new Blob(L,H)}catch(J){if(J.name!=="TypeError")throw J;for(var M=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,Q=new M,et=0;et<L.length;et+=1)Q.append(L[et]);return Q.getBlob(H.type)}}typeof Promise>"u"&&f(3);var s=Promise;function l(L,H){H&&L.then(function(M){H(null,M)},function(M){H(M)})}function a(L,H,M){typeof H=="function"&&L.then(H),typeof M=="function"&&L.catch(M)}function w(L){return typeof L!="string"&&(console.warn(L+" used as a key, but it is not a string."),L=String(L)),L}function v(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var i="local-forage-detect-blob-support",p=void 0,x={},I=Object.prototype.toString,g="readonly",S="readwrite";function y(L){for(var H=L.length,M=new ArrayBuffer(H),Q=new Uint8Array(M),et=0;et<H;et++)Q[et]=L.charCodeAt(et);return M}function D(L){return new s(function(H){var M=L.transaction(i,S),Q=o([""]);M.objectStore(i).put(Q,"key"),M.onabort=function(et){et.preventDefault(),et.stopPropagation(),H(!1)},M.oncomplete=function(){var et=navigator.userAgent.match(/Chrome\/(\d+)/),J=navigator.userAgent.match(/Edge\//);H(J||!et||parseInt(et[1],10)>=43)}}).catch(function(){return!1})}function c(L){return typeof p=="boolean"?s.resolve(p):D(L).then(function(H){return p=H,p})}function B(L){var H=x[L.name],M={};M.promise=new s(function(Q,et){M.resolve=Q,M.reject=et}),H.deferredOperations.push(M),H.dbReady?H.dbReady=H.dbReady.then(function(){return M.promise}):H.dbReady=M.promise}function tt(L){var H=x[L.name],M=H.deferredOperations.pop();if(M)return M.resolve(),M.promise}function Z(L,H){var M=x[L.name],Q=M.deferredOperations.pop();if(Q)return Q.reject(H),Q.promise}function st(L,H){return new s(function(M,Q){if(x[L.name]=x[L.name]||bt(),L.db)if(H)B(L),L.db.close();else return M(L.db);var et=[L.name];H&&et.push(L.version);var J=u.open.apply(u,et);H&&(J.onupgradeneeded=function(ut){var dt=J.result;try{dt.createObjectStore(L.storeName),ut.oldVersion<=1&&dt.createObjectStore(i)}catch(ct){if(ct.name==="ConstraintError")console.warn('The database "'+L.name+'" has been upgraded from version '+ut.oldVersion+" to version "+ut.newVersion+', but the storage "'+L.storeName+'" already exists.');else throw ct}}),J.onerror=function(ut){ut.preventDefault(),Q(J.error)},J.onsuccess=function(){var ut=J.result;ut.onversionchange=function(dt){dt.target.close()},M(ut),tt(L)}})}function G(L){return st(L,!1)}function ht(L){return st(L,!0)}function W(L,H){if(!L.db)return!0;var M=!L.db.objectStoreNames.contains(L.storeName),Q=L.version<L.db.version,et=L.version>L.db.version;if(Q&&(L.version!==H&&console.warn('The database "'+L.name+`" can't be downgraded from version `+L.db.version+" to version "+L.version+"."),L.version=L.db.version),et||M){if(M){var J=L.db.version+1;J>L.version&&(L.version=J)}return!0}return!1}function K(L){return new s(function(H,M){var Q=new FileReader;Q.onerror=M,Q.onloadend=function(et){var J=btoa(et.target.result||"");H({__local_forage_encoded_blob:!0,data:J,type:L.type})},Q.readAsBinaryString(L)})}function ft(L){var H=y(atob(L.data));return o([H],{type:L.type})}function lt(L){return L&&L.__local_forage_encoded_blob}function at(L){var H=this,M=H._initReady().then(function(){var Q=x[H._dbInfo.name];if(Q&&Q.dbReady)return Q.dbReady});return a(M,L,L),M}function yt(L){B(L);for(var H=x[L.name],M=H.forages,Q=0;Q<M.length;Q++){var et=M[Q];et._dbInfo.db&&(et._dbInfo.db.close(),et._dbInfo.db=null)}return L.db=null,G(L).then(function(J){return L.db=J,W(L)?ht(L):J}).then(function(J){L.db=H.db=J;for(var ut=0;ut<M.length;ut++)M[ut]._dbInfo.db=J}).catch(function(J){throw Z(L,J),J})}function wt(L,H,M,Q){Q===void 0&&(Q=1);try{var et=L.db.transaction(L.storeName,H);M(null,et)}catch(J){if(Q>0&&(!L.db||J.name==="InvalidStateError"||J.name==="NotFoundError"))return s.resolve().then(function(){if(!L.db||J.name==="NotFoundError"&&!L.db.objectStoreNames.contains(L.storeName)&&L.version<=L.db.version)return L.db&&(L.version=L.db.version+1),ht(L)}).then(function(){return yt(L).then(function(){wt(L,H,M,Q-1)})}).catch(M);M(J)}}function bt(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function _t(L){var H=this,M={db:null};if(L)for(var Q in L)M[Q]=L[Q];var et=x[M.name];et||(et=bt(),x[M.name]=et),et.forages.push(H),H._initReady||(H._initReady=H.ready,H.ready=at);var J=[];function ut(){return s.resolve()}for(var dt=0;dt<et.forages.length;dt++){var ct=et.forages[dt];ct!==H&&J.push(ct._initReady().catch(ut))}var pt=et.forages.slice(0);return s.all(J).then(function(){return M.db=et.db,G(M)}).then(function(vt){return M.db=vt,W(M,H._defaultConfig.version)?ht(M):vt}).then(function(vt){M.db=et.db=vt,H._dbInfo=M;for(var Et=0;Et<pt.length;Et++){var Nt=pt[Et];Nt!==H&&(Nt._dbInfo.db=M.db,Nt._dbInfo.version=M.version)}})}function Ct(L,H){var M=this;L=w(L);var Q=new s(function(et,J){M.ready().then(function(){wt(M._dbInfo,g,function(ut,dt){if(ut)return J(ut);try{var ct=dt.objectStore(M._dbInfo.storeName),pt=ct.get(L);pt.onsuccess=function(){var vt=pt.result;vt===void 0&&(vt=null),lt(vt)&&(vt=ft(vt)),et(vt)},pt.onerror=function(){J(pt.error)}}catch(vt){J(vt)}})}).catch(J)});return l(Q,H),Q}function Tt(L,H){var M=this,Q=new s(function(et,J){M.ready().then(function(){wt(M._dbInfo,g,function(ut,dt){if(ut)return J(ut);try{var ct=dt.objectStore(M._dbInfo.storeName),pt=ct.openCursor(),vt=1;pt.onsuccess=function(){var Et=pt.result;if(Et){var Nt=Et.value;lt(Nt)&&(Nt=ft(Nt));var Dt=L(Nt,Et.key,vt++);Dt!==void 0?et(Dt):Et.continue()}else et()},pt.onerror=function(){J(pt.error)}}catch(Et){J(Et)}})}).catch(J)});return l(Q,H),Q}function zt(L,H,M){var Q=this;L=w(L);var et=new s(function(J,ut){var dt;Q.ready().then(function(){return dt=Q._dbInfo,I.call(H)==="[object Blob]"?c(dt.db).then(function(ct){return ct?H:K(H)}):H}).then(function(ct){wt(Q._dbInfo,S,function(pt,vt){if(pt)return ut(pt);try{var Et=vt.objectStore(Q._dbInfo.storeName);ct===null&&(ct=void 0);var Nt=Et.put(ct,L);vt.oncomplete=function(){ct===void 0&&(ct=null),J(ct)},vt.onabort=vt.onerror=function(){var Dt=Nt.error?Nt.error:Nt.transaction.error;ut(Dt)}}catch(Dt){ut(Dt)}})}).catch(ut)});return l(et,M),et}function Bt(L,H){var M=this;L=w(L);var Q=new s(function(et,J){M.ready().then(function(){wt(M._dbInfo,S,function(ut,dt){if(ut)return J(ut);try{var ct=dt.objectStore(M._dbInfo.storeName),pt=ct.delete(L);dt.oncomplete=function(){et()},dt.onerror=function(){J(pt.error)},dt.onabort=function(){var vt=pt.error?pt.error:pt.transaction.error;J(vt)}}catch(vt){J(vt)}})}).catch(J)});return l(Q,H),Q}function h(L){var H=this,M=new s(function(Q,et){H.ready().then(function(){wt(H._dbInfo,S,function(J,ut){if(J)return et(J);try{var dt=ut.objectStore(H._dbInfo.storeName),ct=dt.clear();ut.oncomplete=function(){Q()},ut.onabort=ut.onerror=function(){var pt=ct.error?ct.error:ct.transaction.error;et(pt)}}catch(pt){et(pt)}})}).catch(et)});return l(M,L),M}function j(L){var H=this,M=new s(function(Q,et){H.ready().then(function(){wt(H._dbInfo,g,function(J,ut){if(J)return et(J);try{var dt=ut.objectStore(H._dbInfo.storeName),ct=dt.count();ct.onsuccess=function(){Q(ct.result)},ct.onerror=function(){et(ct.error)}}catch(pt){et(pt)}})}).catch(et)});return l(M,L),M}function U(L,H){var M=this,Q=new s(function(et,J){if(L<0){et(null);return}M.ready().then(function(){wt(M._dbInfo,g,function(ut,dt){if(ut)return J(ut);try{var ct=dt.objectStore(M._dbInfo.storeName),pt=!1,vt=ct.openKeyCursor();vt.onsuccess=function(){var Et=vt.result;if(!Et){et(null);return}L===0||pt?et(Et.key):(pt=!0,Et.advance(L))},vt.onerror=function(){J(vt.error)}}catch(Et){J(Et)}})}).catch(J)});return l(Q,H),Q}function R(L){var H=this,M=new s(function(Q,et){H.ready().then(function(){wt(H._dbInfo,g,function(J,ut){if(J)return et(J);try{var dt=ut.objectStore(H._dbInfo.storeName),ct=dt.openKeyCursor(),pt=[];ct.onsuccess=function(){var vt=ct.result;if(!vt){Q(pt);return}pt.push(vt.key),vt.continue()},ct.onerror=function(){et(ct.error)}}catch(vt){et(vt)}})}).catch(et)});return l(M,L),M}function P(L,H){H=v.apply(this,arguments);var M=this.config();L=typeof L!="function"&&L||{},L.name||(L.name=L.name||M.name,L.storeName=L.storeName||M.storeName);var Q=this,et;if(!L.name)et=s.reject("Invalid arguments");else{var J=L.name===M.name&&Q._dbInfo.db,ut=J?s.resolve(Q._dbInfo.db):G(L).then(function(dt){var ct=x[L.name],pt=ct.forages;ct.db=dt;for(var vt=0;vt<pt.length;vt++)pt[vt]._dbInfo.db=dt;return dt});L.storeName?et=ut.then(function(dt){if(dt.objectStoreNames.contains(L.storeName)){var ct=dt.version+1;B(L);var pt=x[L.name],vt=pt.forages;dt.close();for(var Et=0;Et<vt.length;Et++){var Nt=vt[Et];Nt._dbInfo.db=null,Nt._dbInfo.version=ct}var Dt=new s(function(Lt,Ft){var Ut=u.open(L.name,ct);Ut.onerror=function(Yt){var ie=Ut.result;ie.close(),Ft(Yt)},Ut.onupgradeneeded=function(){var Yt=Ut.result;Yt.deleteObjectStore(L.storeName)},Ut.onsuccess=function(){var Yt=Ut.result;Yt.close(),Lt(Yt)}});return Dt.then(function(Lt){pt.db=Lt;for(var Ft=0;Ft<vt.length;Ft++){var Ut=vt[Ft];Ut._dbInfo.db=Lt,tt(Ut._dbInfo)}}).catch(function(Lt){throw(Z(L,Lt)||s.resolve()).catch(function(){}),Lt})}}):et=ut.then(function(dt){B(L);var ct=x[L.name],pt=ct.forages;dt.close();for(var vt=0;vt<pt.length;vt++){var Et=pt[vt];Et._dbInfo.db=null}var Nt=new s(function(Dt,Lt){var Ft=u.deleteDatabase(L.name);Ft.onerror=function(){var Ut=Ft.result;Ut&&Ut.close(),Lt(Ft.error)},Ft.onblocked=function(){console.warn('dropInstance blocked for database "'+L.name+'" until all open connections are closed')},Ft.onsuccess=function(){var Ut=Ft.result;Ut&&Ut.close(),Dt(Ut)}});return Nt.then(function(Dt){ct.db=Dt;for(var Lt=0;Lt<pt.length;Lt++){var Ft=pt[Lt];tt(Ft._dbInfo)}}).catch(function(Dt){throw(Z(L,Dt)||s.resolve()).catch(function(){}),Dt})})}return l(et,H),et}var F={_driver:"asyncStorage",_initStorage:_t,_support:t(),iterate:Tt,getItem:Ct,setItem:zt,removeItem:Bt,clear:h,length:j,key:U,keys:R,dropInstance:P};function nt(){return typeof openDatabase=="function"}var it="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="~~local_forage_type~",m=/^~~local_forage_type~([^~]+)~/,O="__lfsc__:",k=O.length,V="arbf",$="blob",rt="si08",mt="ui08",St="uic8",Ot="si16",Rt="si32",xt="ur16",At="ui32",kt="fl32",N="fl64",z=k+V.length,q=Object.prototype.toString;function ot(L){var H=L.length*.75,M=L.length,Q,et=0,J,ut,dt,ct;L[L.length-1]==="="&&(H--,L[L.length-2]==="="&&H--);var pt=new ArrayBuffer(H),vt=new Uint8Array(pt);for(Q=0;Q<M;Q+=4)J=it.indexOf(L[Q]),ut=it.indexOf(L[Q+1]),dt=it.indexOf(L[Q+2]),ct=it.indexOf(L[Q+3]),vt[et++]=J<<2|ut>>4,vt[et++]=(ut&15)<<4|dt>>2,vt[et++]=(dt&3)<<6|ct&63;return pt}function gt(L){var H=new Uint8Array(L),M="",Q;for(Q=0;Q<H.length;Q+=3)M+=it[H[Q]>>2],M+=it[(H[Q]&3)<<4|H[Q+1]>>4],M+=it[(H[Q+1]&15)<<2|H[Q+2]>>6],M+=it[H[Q+2]&63];return H.length%3===2?M=M.substring(0,M.length-1)+"=":H.length%3===1&&(M=M.substring(0,M.length-2)+"=="),M}function It(L,H){var M="";if(L&&(M=q.call(L)),L&&(M==="[object ArrayBuffer]"||L.buffer&&q.call(L.buffer)==="[object ArrayBuffer]")){var Q,et=O;L instanceof ArrayBuffer?(Q=L,et+=V):(Q=L.buffer,M==="[object Int8Array]"?et+=rt:M==="[object Uint8Array]"?et+=mt:M==="[object Uint8ClampedArray]"?et+=St:M==="[object Int16Array]"?et+=Ot:M==="[object Uint16Array]"?et+=xt:M==="[object Int32Array]"?et+=Rt:M==="[object Uint32Array]"?et+=At:M==="[object Float32Array]"?et+=kt:M==="[object Float64Array]"?et+=N:H(new Error("Failed to get type for BinaryArray"))),H(et+gt(Q))}else if(M==="[object Blob]"){var J=new FileReader;J.onload=function(){var ut=n+L.type+"~"+gt(this.result);H(O+$+ut)},J.readAsArrayBuffer(L)}else try{H(JSON.stringify(L))}catch(ut){console.error("Couldn't convert value into a JSON string: ",L),H(null,ut)}}function Pt(L){if(L.substring(0,k)!==O)return JSON.parse(L);var H=L.substring(z),M=L.substring(k,z),Q;if(M===$&&m.test(H)){var et=H.match(m);Q=et[1],H=H.substring(et[0].length)}var J=ot(H);switch(M){case V:return J;case $:return o([J],{type:Q});case rt:return new Int8Array(J);case mt:return new Uint8Array(J);case St:return new Uint8ClampedArray(J);case Ot:return new Int16Array(J);case xt:return new Uint16Array(J);case Rt:return new Int32Array(J);case At:return new Uint32Array(J);case kt:return new Float32Array(J);case N:return new Float64Array(J);default:throw new Error("Unkown type: "+M)}}var Mt={serialize:It,deserialize:Pt,stringToBuffer:ot,bufferToString:gt};function Xt(L,H,M,Q){L.executeSql("CREATE TABLE IF NOT EXISTS "+H.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],M,Q)}function Ht(L){var H=this,M={db:null};if(L)for(var Q in L)M[Q]=typeof L[Q]!="string"?L[Q].toString():L[Q];var et=new s(function(J,ut){try{M.db=openDatabase(M.name,String(M.version),M.description,M.size)}catch(dt){return ut(dt)}M.db.transaction(function(dt){Xt(dt,M,function(){H._dbInfo=M,J()},function(ct,pt){ut(pt)})},ut)});return M.serializer=Mt,et}function jt(L,H,M,Q,et,J){L.executeSql(M,Q,et,function(ut,dt){dt.code===dt.SYNTAX_ERR?ut.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[H.storeName],function(ct,pt){pt.rows.length?J(ct,dt):Xt(ct,H,function(){ct.executeSql(M,Q,et,J)},J)},J):J(ut,dt)},J)}function qt(L,H){var M=this;L=w(L);var Q=new s(function(et,J){M.ready().then(function(){var ut=M._dbInfo;ut.db.transaction(function(dt){jt(dt,ut,"SELECT * FROM "+ut.storeName+" WHERE key = ? LIMIT 1",[L],function(ct,pt){var vt=pt.rows.length?pt.rows.item(0).value:null;vt&&(vt=ut.serializer.deserialize(vt)),et(vt)},function(ct,pt){J(pt)})})}).catch(J)});return l(Q,H),Q}function Kt(L,H){var M=this,Q=new s(function(et,J){M.ready().then(function(){var ut=M._dbInfo;ut.db.transaction(function(dt){jt(dt,ut,"SELECT * FROM "+ut.storeName,[],function(ct,pt){for(var vt=pt.rows,Et=vt.length,Nt=0;Nt<Et;Nt++){var Dt=vt.item(Nt),Lt=Dt.value;if(Lt&&(Lt=ut.serializer.deserialize(Lt)),Lt=L(Lt,Dt.key,Nt+1),Lt!==void 0){et(Lt);return}}et()},function(ct,pt){J(pt)})})}).catch(J)});return l(Q,H),Q}function Gt(L,H,M,Q){var et=this;L=w(L);var J=new s(function(ut,dt){et.ready().then(function(){H===void 0&&(H=null);var ct=H,pt=et._dbInfo;pt.serializer.serialize(H,function(vt,Et){Et?dt(Et):pt.db.transaction(function(Nt){jt(Nt,pt,"INSERT OR REPLACE INTO "+pt.storeName+" (key, value) VALUES (?, ?)",[L,vt],function(){ut(ct)},function(Dt,Lt){dt(Lt)})},function(Nt){if(Nt.code===Nt.QUOTA_ERR){if(Q>0){ut(Gt.apply(et,[L,ct,M,Q-1]));return}dt(Nt)}})})}).catch(dt)});return l(J,M),J}function Zt(L,H,M){return Gt.apply(this,[L,H,M,1])}function $t(L,H){var M=this;L=w(L);var Q=new s(function(et,J){M.ready().then(function(){var ut=M._dbInfo;ut.db.transaction(function(dt){jt(dt,ut,"DELETE FROM "+ut.storeName+" WHERE key = ?",[L],function(){et()},function(ct,pt){J(pt)})})}).catch(J)});return l(Q,H),Q}function Qt(L){var H=this,M=new s(function(Q,et){H.ready().then(function(){var J=H._dbInfo;J.db.transaction(function(ut){jt(ut,J,"DELETE FROM "+J.storeName,[],function(){Q()},function(dt,ct){et(ct)})})}).catch(et)});return l(M,L),M}function Wt(L){var H=this,M=new s(function(Q,et){H.ready().then(function(){var J=H._dbInfo;J.db.transaction(function(ut){jt(ut,J,"SELECT COUNT(key) as c FROM "+J.storeName,[],function(dt,ct){var pt=ct.rows.item(0).c;Q(pt)},function(dt,ct){et(ct)})})}).catch(et)});return l(M,L),M}function re(L,H){var M=this,Q=new s(function(et,J){M.ready().then(function(){var ut=M._dbInfo;ut.db.transaction(function(dt){jt(dt,ut,"SELECT key FROM "+ut.storeName+" WHERE id = ? LIMIT 1",[L+1],function(ct,pt){var vt=pt.rows.length?pt.rows.item(0).key:null;et(vt)},function(ct,pt){J(pt)})})}).catch(J)});return l(Q,H),Q}function Jt(L){var H=this,M=new s(function(Q,et){H.ready().then(function(){var J=H._dbInfo;J.db.transaction(function(ut){jt(ut,J,"SELECT key FROM "+J.storeName,[],function(dt,ct){for(var pt=[],vt=0;vt<ct.rows.length;vt++)pt.push(ct.rows.item(vt).key);Q(pt)},function(dt,ct){et(ct)})})}).catch(et)});return l(M,L),M}function se(L){return new s(function(H,M){L.transaction(function(Q){Q.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(et,J){for(var ut=[],dt=0;dt<J.rows.length;dt++)ut.push(J.rows.item(dt).name);H({db:L,storeNames:ut})},function(et,J){M(J)})},function(Q){M(Q)})})}function _e(L,H){H=v.apply(this,arguments);var M=this.config();L=typeof L!="function"&&L||{},L.name||(L.name=L.name||M.name,L.storeName=L.storeName||M.storeName);var Q=this,et;return L.name?et=new s(function(J){var ut;L.name===M.name?ut=Q._dbInfo.db:ut=openDatabase(L.name,"","",0),L.storeName?J({db:ut,storeNames:[L.storeName]}):J(se(ut))}).then(function(J){return new s(function(ut,dt){J.db.transaction(function(ct){function pt(Dt){return new s(function(Lt,Ft){ct.executeSql("DROP TABLE IF EXISTS "+Dt,[],function(){Lt()},function(Ut,Yt){Ft(Yt)})})}for(var vt=[],Et=0,Nt=J.storeNames.length;Et<Nt;Et++)vt.push(pt(J.storeNames[Et]));s.all(vt).then(function(){ut()}).catch(function(Dt){dt(Dt)})},function(ct){dt(ct)})})}):et=s.reject("Invalid arguments"),l(et,H),et}var Se={_driver:"webSQLStorage",_initStorage:Ht,_support:nt(),iterate:Kt,getItem:qt,setItem:Zt,removeItem:$t,clear:Qt,length:Wt,key:re,keys:Jt,dropInstance:_e};function Te(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function pe(L,H){var M=L.name+"/";return L.storeName!==H.storeName&&(M+=L.storeName+"/"),M}function Oe(){var L="_localforage_support_test";try{return localStorage.setItem(L,!0),localStorage.removeItem(L),!1}catch{return!0}}function Ce(){return!Oe()||localStorage.length>0}function Ae(L){var H=this,M={};if(L)for(var Q in L)M[Q]=L[Q];return M.keyPrefix=pe(L,H._defaultConfig),Ce()?(H._dbInfo=M,M.serializer=Mt,s.resolve()):s.reject()}function Ie(L){var H=this,M=H.ready().then(function(){for(var Q=H._dbInfo.keyPrefix,et=localStorage.length-1;et>=0;et--){var J=localStorage.key(et);J.indexOf(Q)===0&&localStorage.removeItem(J)}});return l(M,L),M}function Ne(L,H){var M=this;L=w(L);var Q=M.ready().then(function(){var et=M._dbInfo,J=localStorage.getItem(et.keyPrefix+L);return J&&(J=et.serializer.deserialize(J)),J});return l(Q,H),Q}function Re(L,H){var M=this,Q=M.ready().then(function(){for(var et=M._dbInfo,J=et.keyPrefix,ut=J.length,dt=localStorage.length,ct=1,pt=0;pt<dt;pt++){var vt=localStorage.key(pt);if(vt.indexOf(J)===0){var Et=localStorage.getItem(vt);if(Et&&(Et=et.serializer.deserialize(Et)),Et=L(Et,vt.substring(ut),ct++),Et!==void 0)return Et}}});return l(Q,H),Q}function ke(L,H){var M=this,Q=M.ready().then(function(){var et=M._dbInfo,J;try{J=localStorage.key(L)}catch{J=null}return J&&(J=J.substring(et.keyPrefix.length)),J});return l(Q,H),Q}function De(L){var H=this,M=H.ready().then(function(){for(var Q=H._dbInfo,et=localStorage.length,J=[],ut=0;ut<et;ut++){var dt=localStorage.key(ut);dt.indexOf(Q.keyPrefix)===0&&J.push(dt.substring(Q.keyPrefix.length))}return J});return l(M,L),M}function Le(L){var H=this,M=H.keys().then(function(Q){return Q.length});return l(M,L),M}function Pe(L,H){var M=this;L=w(L);var Q=M.ready().then(function(){var et=M._dbInfo;localStorage.removeItem(et.keyPrefix+L)});return l(Q,H),Q}function ze(L,H,M){var Q=this;L=w(L);var et=Q.ready().then(function(){H===void 0&&(H=null);var J=H;return new s(function(ut,dt){var ct=Q._dbInfo;ct.serializer.serialize(H,function(pt,vt){if(vt)dt(vt);else try{localStorage.setItem(ct.keyPrefix+L,pt),ut(J)}catch(Et){(Et.name==="QuotaExceededError"||Et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&dt(Et),dt(Et)}})})});return l(et,M),et}function Be(L,H){if(H=v.apply(this,arguments),L=typeof L!="function"&&L||{},!L.name){var M=this.config();L.name=L.name||M.name,L.storeName=L.storeName||M.storeName}var Q=this,et;return L.name?et=new s(function(J){L.storeName?J(pe(L,Q._defaultConfig)):J(L.name+"/")}).then(function(J){for(var ut=localStorage.length-1;ut>=0;ut--){var dt=localStorage.key(ut);dt.indexOf(J)===0&&localStorage.removeItem(dt)}}):et=s.reject("Invalid arguments"),l(et,H),et}var Me={_driver:"localStorageWrapper",_initStorage:Ae,_support:Te(),iterate:Re,getItem:Ne,setItem:ze,removeItem:Pe,clear:Ie,length:Le,key:ke,keys:De,dropInstance:Be},je=function(H,M){return H===M||typeof H=="number"&&typeof M=="number"&&isNaN(H)&&isNaN(M)},Ue=function(H,M){for(var Q=H.length,et=0;et<Q;){if(je(H[et],M))return!0;et++}return!1},me=Array.isArray||function(L){return Object.prototype.toString.call(L)==="[object Array]"},ee={},ge={},te={INDEXEDDB:F,WEBSQL:Se,LOCALSTORAGE:Me},Fe=[te.INDEXEDDB._driver,te.WEBSQL._driver,te.LOCALSTORAGE._driver],ae=["dropInstance"],le=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ae),We={description:"",driver:Fe.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function He(L,H){L[H]=function(){var M=arguments;return L.ready().then(function(){return L[H].apply(L,M)})}}function ue(){for(var L=1;L<arguments.length;L++){var H=arguments[L];if(H)for(var M in H)H.hasOwnProperty(M)&&(me(H[M])?arguments[0][M]=H[M].slice():arguments[0][M]=H[M])}return arguments[0]}var Ve=function(){function L(H){r(this,L);for(var M in te)if(te.hasOwnProperty(M)){var Q=te[M],et=Q._driver;this[M]=et,ee[et]||this.defineDriver(Q)}this._defaultConfig=ue({},We),this._config=ue({},this._defaultConfig,H),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return L.prototype.config=function(M){if((typeof M>"u"?"undefined":_(M))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var Q in M){if(Q==="storeName"&&(M[Q]=M[Q].replace(/\W/g,"_")),Q==="version"&&typeof M[Q]!="number")return new Error("Database version must be a number.");this._config[Q]=M[Q]}return"driver"in M&&M.driver?this.setDriver(this._config.driver):!0}else return typeof M=="string"?this._config[M]:this._config},L.prototype.defineDriver=function(M,Q,et){var J=new s(function(ut,dt){try{var ct=M._driver,pt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!M._driver){dt(pt);return}for(var vt=le.concat("_initStorage"),Et=0,Nt=vt.length;Et<Nt;Et++){var Dt=vt[Et],Lt=!Ue(ae,Dt);if((Lt||M[Dt])&&typeof M[Dt]!="function"){dt(pt);return}}var Ft=function(){for(var ie=function(Ze){return function(){var Ye=new Error("Method "+Ze+" is not implemented by the current driver"),ve=s.reject(Ye);return l(ve,arguments[arguments.length-1]),ve}},fe=0,Xe=ae.length;fe<Xe;fe++){var de=ae[fe];M[de]||(M[de]=ie(de))}};Ft();var Ut=function(ie){ee[ct]&&console.info("Redefining LocalForage driver: "+ct),ee[ct]=M,ge[ct]=ie,ut()};"_support"in M?M._support&&typeof M._support=="function"?M._support().then(Ut,dt):Ut(!!M._support):Ut(!0)}catch(Yt){dt(Yt)}});return a(J,Q,et),J},L.prototype.driver=function(){return this._driver||null},L.prototype.getDriver=function(M,Q,et){var J=ee[M]?s.resolve(ee[M]):s.reject(new Error("Driver not found."));return a(J,Q,et),J},L.prototype.getSerializer=function(M){var Q=s.resolve(Mt);return a(Q,M),Q},L.prototype.ready=function(M){var Q=this,et=Q._driverSet.then(function(){return Q._ready===null&&(Q._ready=Q._initDriver()),Q._ready});return a(et,M,M),et},L.prototype.setDriver=function(M,Q,et){var J=this;me(M)||(M=[M]);var ut=this._getSupportedDrivers(M);function dt(){J._config.driver=J.driver()}function ct(Et){return J._extend(Et),dt(),J._ready=J._initStorage(J._config),J._ready}function pt(Et){return function(){var Nt=0;function Dt(){for(;Nt<Et.length;){var Lt=Et[Nt];return Nt++,J._dbInfo=null,J._ready=null,J.getDriver(Lt).then(ct).catch(Dt)}dt();var Ft=new Error("No available storage method found.");return J._driverSet=s.reject(Ft),J._driverSet}return Dt()}}var vt=this._driverSet!==null?this._driverSet.catch(function(){return s.resolve()}):s.resolve();return this._driverSet=vt.then(function(){var Et=ut[0];return J._dbInfo=null,J._ready=null,J.getDriver(Et).then(function(Nt){J._driver=Nt._driver,dt(),J._wrapLibraryMethodsWithReady(),J._initDriver=pt(ut)})}).catch(function(){dt();var Et=new Error("No available storage method found.");return J._driverSet=s.reject(Et),J._driverSet}),a(this._driverSet,Q,et),this._driverSet},L.prototype.supports=function(M){return!!ge[M]},L.prototype._extend=function(M){ue(this,M)},L.prototype._getSupportedDrivers=function(M){for(var Q=[],et=0,J=M.length;et<J;et++){var ut=M[et];this.supports(ut)&&Q.push(ut)}return Q},L.prototype._wrapLibraryMethodsWithReady=function(){for(var M=0,Q=le.length;M<Q;M++)He(this,le[M])},L.prototype.createInstance=function(M){return new L(M)},L}(),qe=new Ve;C.exports=qe},{3:3}]},{},[4])(4)})}).call(this,d(17))},function(X,A,d){var E=d(3),b=d.n(E),f=d(0),C=d(5),T=d(4),_=d(2),r=d(6),e=d(8);function u(it,n,m,O){var k=typeof window<"u"?window.URL:!1,V=k?"blob":"arraybuffer",$=new f.defer,rt=new XMLHttpRequest,mt=XMLHttpRequest.prototype,St;"overrideMimeType"in mt||Object.defineProperty(mt,"overrideMimeType",{value:function(){}}),m&&(rt.withCredentials=!0),rt.onreadystatechange=Rt,rt.onerror=Ot,rt.open("GET",it,!0);for(St in O)rt.setRequestHeader(St,O[St]);n=="json"&&rt.setRequestHeader("Accept","application/json"),n||(n=new T.a(it).extension),n=="blob"&&(rt.responseType=V),Object(f.isXml)(n)&&rt.overrideMimeType("text/xml"),n=="binary"&&(rt.responseType="arraybuffer"),rt.send();function Ot(xt){$.reject(xt)}function Rt(){if(this.readyState===XMLHttpRequest.DONE){var xt=!1;if((this.responseType===""||this.responseType==="document")&&(xt=this.responseXML),this.status===200||this.status===0||xt){var At;if(!this.response&&!xt)return $.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),$.promise;if(this.status===403)return $.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),$.promise;xt?At=this.responseXML:Object(f.isXml)(n)?At=Object(f.parse)(this.response,"text/xml"):n=="xhtml"?At=Object(f.parse)(this.response,"application/xhtml+xml"):n=="html"||n=="htm"?At=Object(f.parse)(this.response,"text/html"):n=="json"?At=JSON.parse(this.response):n=="blob"?k?At=this.response:At=new Blob([this.response]):At=this.response,$.resolve(At)}else $.reject({status:this.status,message:this.response,stack:new Error().stack})}}return $.promise}var t=u,o=d(15);class s{constructor(n,m){this.idref=n.idref,this.linear=n.linear==="yes",this.properties=n.properties,this.index=n.index,this.href=n.href,this.url=n.url,this.canonical=n.canonical,this.next=n.next,this.prev=n.prev,this.cfiBase=n.cfiBase,m?this.hooks=m:(this.hooks={},this.hooks.serialize=new r.a(this),this.hooks.content=new r.a(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(n){var m=n||this.request||t,O=new f.defer,k=O.promise;return this.contents?O.resolve(this.contents):m(this.url).then((function(V){return this.document=V,this.contents=V.documentElement,this.hooks.content.trigger(this.document,this)}).bind(this)).then((function(){O.resolve(this.contents)}).bind(this)).catch(function(V){O.reject(V)}),k}base(){return Object(e.a)(this.document,this)}render(n){var m=new f.defer,O=m.promise;return this.output,this.load(n).then((function(k){var V=typeof navigator<"u"&&navigator.userAgent||"",$=V.indexOf("Trident")>=0,rt;typeof XMLSerializer>"u"||$?rt=o.DOMParser:rt=XMLSerializer;var mt=new rt;return this.output=mt.serializeToString(k),this.output}).bind(this)).then((function(){return this.hooks.serialize.trigger(this.output,this)}).bind(this)).then((function(){m.resolve(this.output)}).bind(this)).catch(function(k){m.reject(k)}),O}find(n){var m=this,O=[],k=n.toLowerCase(),V=function($){for(var rt=$.textContent.toLowerCase(),mt=m.document.createRange(),St,Ot,Rt=-1,xt,At=150;Ot!=-1;)Ot=rt.indexOf(k,Rt+1),Ot!=-1&&(mt=m.document.createRange(),mt.setStart($,Ot),mt.setEnd($,Ot+k.length),St=m.cfiFromRange(mt),$.textContent.length<At?xt=$.textContent:(xt=$.textContent.substring(Ot-At/2,Ot+At/2),xt="..."+xt+"..."),O.push({cfi:St,excerpt:xt})),Rt=Ot};return Object(f.sprint)(m.document,function($){V($)}),O}search(n,m=5){if(typeof document.createTreeWalker>"u")return this.find(n);let O=[];const k=150,V=this,$=n.toLowerCase(),rt=function(Rt){const kt=Rt.reduce((N,z)=>N+z.textContent,"").toLowerCase().indexOf($);if(kt!=-1){const z=kt+$.length;let q=0,ot=0;if(kt<Rt[0].length){let gt;for(;q<Rt.length-1&&(ot+=Rt[q].length,!(z<=ot));)q+=1;let It=Rt[0],Pt=Rt[q],Mt=V.document.createRange();Mt.setStart(It,kt);let Xt=Rt.slice(0,q).reduce((jt,qt)=>jt+qt.textContent.length,0);Mt.setEnd(Pt,Xt>z?z:z-Xt),gt=V.cfiFromRange(Mt);let Ht=Rt.slice(0,q+1).reduce((jt,qt)=>jt+qt.textContent,"");Ht.length>k&&(Ht=Ht.substring(kt-k/2,kt+k/2),Ht="..."+Ht+"..."),O.push({cfi:gt,excerpt:Ht})}}},mt=document.createTreeWalker(V.document,NodeFilter.SHOW_TEXT,null,!1);let St,Ot=[];for(;St=mt.nextNode();)Ot.push(St),Ot.length==m&&(rt(Ot.slice(0,m)),Ot=Ot.slice(1,m));return Ot.length>0&&rt(Ot),O}reconcileLayoutSettings(n){var m={layout:n.layout,spread:n.spread,orientation:n.orientation};return this.properties.forEach(function(O){var k=O.replace("rendition:",""),V=k.indexOf("-"),$,rt;V!=-1&&($=k.slice(0,V),rt=k.slice(V+1),m[$]=rt)}),m}cfiFromRange(n){return new _.a(n,this.cfiBase).toString()}cfiFromElement(n){return new _.a(n,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}var l=s;class a{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new r.a,this.hooks.content=new r.a,this.hooks.content.register(e.a),this.hooks.content.register(e.b),this.hooks.content.register(e.d),this.epubcfi=new _.a,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(n,m,O){this.items=n.spine,this.manifest=n.manifest,this.spineNodeIndex=n.spineNodeIndex,this.baseUrl=n.baseUrl||n.basePath||"",this.length=this.items.length,this.items.forEach((k,V)=>{var $=this.manifest[k.idref],rt;k.index=V,k.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,k.index,k.id),k.href&&(k.url=m(k.href,!0),k.canonical=O(k.href)),$&&(k.href=$.href,k.url=m(k.href,!0),k.canonical=O(k.href),$.properties.length&&k.properties.push.apply(k.properties,$.properties)),k.linear==="yes"?(k.prev=(function(){let mt=k.index;for(;mt>0;){let St=this.get(mt-1);if(St&&St.linear)return St;mt-=1}}).bind(this),k.next=(function(){let mt=k.index;for(;mt<this.spineItems.length-1;){let St=this.get(mt+1);if(St&&St.linear)return St;mt+=1}}).bind(this)):(k.prev=function(){},k.next=function(){}),rt=new l(k,this.hooks),this.append(rt)}),this.loaded=!0}get(n){var m=0;if(typeof n>"u")for(;m<this.spineItems.length;){let O=this.spineItems[m];if(O&&O.linear)break;m+=1}else this.epubcfi.isCfiString(n)?m=new _.a(n).spinePos:typeof n=="number"||isNaN(n)===!1?m=n:typeof n=="string"&&n.indexOf("#")===0?m=this.spineById[n.substring(1)]:typeof n=="string"&&(n=n.split("#")[0],m=this.spineByHref[n]||this.spineByHref[encodeURI(n)]);return this.spineItems[m]||null}append(n){var m=this.spineItems.length;return n.index=m,this.spineItems.push(n),this.spineByHref[decodeURI(n.href)]=m,this.spineByHref[encodeURI(n.href)]=m,this.spineByHref[n.href]=m,this.spineById[n.idref]=m,m}prepend(n){return this.spineByHref[n.href]=0,this.spineById[n.idref]=0,this.spineItems.forEach(function(m,O){m.index=O}),0}remove(n){var m=this.spineItems.indexOf(n);if(m>-1)return delete this.spineByHref[n.href],delete this.spineById[n.idref],this.spineItems.splice(m,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let n=0;do{let m=this.get(n);if(m&&m.linear)return m;n+=1}while(n<this.spineItems.length)}last(){let n=this.spineItems.length-1;do{let m=this.get(n);if(m&&m.linear)return m;n-=1}while(n>=0)}destroy(){this.each(n=>n.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}var w=a,v=d(9),i=d(1);class p{constructor(n,m,O){this.spine=n,this.request=m,this.pause=O||100,this.q=new v.a(this),this.epubcfi=new _.a,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(n){return n&&(this.break=n),this.q.pause(),this.spine.each((function(m){m.linear&&this.q.enqueue(this.process.bind(this),m)}).bind(this)),this.q.run().then((function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}).bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(n){return n.load(this.request).then((function(m){var O=new f.defer,k=this.parse(m,n.cfiBase);return this._locations=this._locations.concat(k),n.unload(),this.processingTimeout=setTimeout(()=>O.resolve(k),this.pause),O.promise}).bind(this))}parse(n,m,O){var k=[],V,$=n.ownerDocument,rt=Object(f.qs)($,"body"),mt=0,St,Ot=O||this.break,Rt=function(xt){var At=xt.length,kt,N=0;if(xt.textContent.trim().length===0)return!1;for(mt==0&&(V=this.createRange(),V.startContainer=xt,V.startOffset=0),kt=Ot-mt,kt>At&&(mt+=At,N=At);N<At;)if(kt=Ot-mt,mt===0&&(N+=1,V=this.createRange(),V.startContainer=xt,V.startOffset=N),N+kt>=At)mt+=At-N,N=At;else{N+=kt,V.endContainer=xt,V.endOffset=N;let z=new _.a(V,m).toString();k.push(z),mt=0}St=xt};if(Object(f.sprint)(rt,Rt.bind(this)),V&&V.startContainer&&St){V.endContainer=St,V.endOffset=St.length;let xt=new _.a(V,m).toString();k.push(xt),mt=0}return k}generateFromWords(n,m,O){var k=n?new _.a(n):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each((function(V){V.linear&&(k?V.index>=k.spinePos&&this.q.enqueue(this.processWords.bind(this),V,m,k,O):this.q.enqueue(this.processWords.bind(this),V,m,k,O))}).bind(this)),this.q.run().then((function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}).bind(this))}processWords(n,m,O,k){return k&&this._locationsWords.length>=k?Promise.resolve():n.load(this.request).then((function(V){var $=new f.defer,rt=this.parseWords(V,n,m,O),mt=k-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(rt.length>=k?rt.slice(0,mt):rt),n.unload(),this.processingTimeout=setTimeout(()=>$.resolve(rt),this.pause),$.promise}).bind(this))}countWords(n){return n=n.replace(/(^\s*)|(\s*$)/gi,""),n=n.replace(/[ ]{2,}/gi," "),n=n.replace(/\n /,`
`),n.split(" ").length}parseWords(n,m,O,k){var V=m.cfiBase,$=[],rt=n.ownerDocument,mt=Object(f.qs)(rt,"body"),St=O,Ot=k?k.spinePos!==m.index:!0,Rt;k&&m.index===k.spinePos&&(Rt=k.findNode(k.range?k.path.steps.concat(k.start.steps):k.path.steps,n.ownerDocument));var xt=function(At){if(!Ot)if(At===Rt)Ot=!0;else return!1;if(At.textContent.length<10&&At.textContent.trim().length===0)return!1;var kt=this.countWords(At.textContent),N,z=0;if(kt===0)return!1;for(N=St-this._wordCounter,N>kt&&(this._wordCounter+=kt,z=kt);z<kt;)if(N=St-this._wordCounter,z+N>=kt)this._wordCounter+=kt-z,z=kt;else{z+=N;let q=new _.a(At,V);$.push({cfi:q.toString(),wordCount:this._wordCounter}),this._wordCounter=0}};return Object(f.sprint)(mt,xt.bind(this)),$}locationFromCfi(n){let m;return _.a.prototype.isCfiString(n)&&(n=new _.a(n)),this._locations.length===0?-1:(m=Object(f.locationOf)(n,this._locations,this.epubcfi.compare),m>this.total?this.total:m)}percentageFromCfi(n){if(this._locations.length===0)return null;var m=this.locationFromCfi(n);return this.percentageFromLocation(m)}percentageFromLocation(n){return!n||!this.total?0:n/this.total}cfiFromLocation(n){var m=-1;return typeof n!="number"&&(n=parseInt(n)),n>=0&&n<this._locations.length&&(m=this._locations[n]),m}cfiFromPercentage(n){let m;if(n>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),n>=1){let O=new _.a(this._locations[this.total]);return O.collapse(),O.toString()}return m=Math.ceil(this.total*n),this.cfiFromLocation(m)}load(n){return typeof n=="string"?this._locations=JSON.parse(n):this._locations=n,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(n){var m;if(typeof n=="string")this._currentCfi=n;else if(typeof n=="number")this._current=n;else return;this._locations.length!==0&&(typeof n=="string"?(m=this.locationFromCfi(n),this._current=m):m=n,this.emit(i.c.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(m)}))}get currentLocation(){return this._current}set currentLocation(n){this.setCurrent(n)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}b()(p.prototype);var x=p,I=d(7),g=d.n(I);class S{constructor(n){this.packagePath="",this.directory="",this.encoding="",n&&this.parse(n)}parse(n){var m;if(!n)throw new Error("Container File Not Found");if(m=Object(f.qs)(n,"rootfile"),!m)throw new Error("No RootFile Found");this.packagePath=m.getAttribute("full-path"),this.directory=g.a.dirname(this.packagePath),this.encoding=n.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}var y=S;class D{constructor(n){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},n&&this.parse(n)}parse(n){var m,O,k;if(!n)throw new Error("Package File Not Found");if(m=Object(f.qs)(n,"metadata"),!m)throw new Error("No Metadata Found");if(O=Object(f.qs)(n,"manifest"),!O)throw new Error("No Manifest Found");if(k=Object(f.qs)(n,"spine"),!k)throw new Error("No Spine Found");return this.manifest=this.parseManifest(O),this.navPath=this.findNavPath(O),this.ncxPath=this.findNcxPath(O,k),this.coverPath=this.findCoverPath(n),this.spineNodeIndex=Object(f.indexOfElementNode)(k),this.spine=this.parseSpine(k,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(n),this.metadata=this.parseMetadata(m),this.metadata.direction=k.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(n){var m={};return m.title=this.getElementText(n,"title"),m.creator=this.getElementText(n,"creator"),m.description=this.getElementText(n,"description"),m.pubdate=this.getElementText(n,"date"),m.publisher=this.getElementText(n,"publisher"),m.identifier=this.getElementText(n,"identifier"),m.language=this.getElementText(n,"language"),m.rights=this.getElementText(n,"rights"),m.modified_date=this.getPropertyText(n,"dcterms:modified"),m.layout=this.getPropertyText(n,"rendition:layout"),m.orientation=this.getPropertyText(n,"rendition:orientation"),m.flow=this.getPropertyText(n,"rendition:flow"),m.viewport=this.getPropertyText(n,"rendition:viewport"),m.media_active_class=this.getPropertyText(n,"media:active-class"),m.spread=this.getPropertyText(n,"rendition:spread"),m}parseManifest(n){var m={},O=Object(f.qsa)(n,"item"),k=Array.prototype.slice.call(O);return k.forEach(function(V){var $=V.getAttribute("id"),rt=V.getAttribute("href")||"",mt=V.getAttribute("media-type")||"",St=V.getAttribute("media-overlay")||"",Ot=V.getAttribute("properties")||"";m[$]={href:rt,type:mt,overlay:St,properties:Ot.length?Ot.split(" "):[]}}),m}parseSpine(n,m){var O=[],k=Object(f.qsa)(n,"itemref"),V=Array.prototype.slice.call(k);return V.forEach(function($,rt){var mt=$.getAttribute("idref"),St=$.getAttribute("properties")||"",Ot=St.length?St.split(" "):[],Rt={id:$.getAttribute("id"),idref:mt,linear:$.getAttribute("linear")||"yes",properties:Ot,index:rt};O.push(Rt)}),O}findUniqueIdentifier(n){var m=n.documentElement.getAttribute("unique-identifier");if(!m)return"";var O=n.getElementById(m);return O&&O.localName==="identifier"&&O.namespaceURI==="http://purl.org/dc/elements/1.1/"&&O.childNodes.length>0?O.childNodes[0].nodeValue.trim():""}findNavPath(n){var m=Object(f.qsp)(n,"item",{properties:"nav"});return m?m.getAttribute("href"):!1}findNcxPath(n,m){var O=Object(f.qsp)(n,"item",{"media-type":"application/x-dtbncx+xml"}),k;return O||(k=m.getAttribute("toc"),k&&(O=n.querySelector(`#${k}`))),O?O.getAttribute("href"):!1}findCoverPath(n){var m=Object(f.qs)(n,"package");m.getAttribute("version");var O=Object(f.qsp)(n,"item",{properties:"cover-image"});if(O)return O.getAttribute("href");var k=Object(f.qsp)(n,"meta",{name:"cover"});if(k){var V=k.getAttribute("content"),$=n.getElementById(V);return $?$.getAttribute("href"):""}else return!1}getElementText(n,m){var O=n.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",m),k;return!O||O.length===0?"":(k=O[0],k.childNodes.length?k.childNodes[0].nodeValue:"")}getPropertyText(n,m){var O=Object(f.qsp)(n,"meta",{property:m});return O&&O.childNodes.length?O.childNodes[0].nodeValue:""}load(n){this.metadata=n.metadata;let m=n.readingOrder||n.spine;return this.spine=m.map((O,k)=>(O.index=k,O.linear=O.linear||"yes",O)),n.resources.forEach((O,k)=>{this.manifest[k]=O,O.rel&&O.rel[0]==="cover"&&(this.coverPath=O.href)}),this.spineNodeIndex=0,this.toc=n.toc.map((O,k)=>(O.label=O.title,O)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}var c=D;class B{constructor(n){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,n&&this.parse(n)}parse(n){let m=n.nodeType,O,k;m&&(O=Object(f.qs)(n,"html"),k=Object(f.qs)(n,"ncx")),m?O?(this.toc=this.parseNav(n),this.landmarks=this.parseLandmarks(n)):k&&(this.toc=this.parseNcx(n)):this.toc=this.load(n),this.length=0,this.unpack(this.toc)}unpack(n){for(var m,O=0;O<n.length;O++)m=n[O],m.href&&(this.tocByHref[m.href]=O),m.id&&(this.tocById[m.id]=O),this.length++,m.subitems.length&&this.unpack(m.subitems)}get(n){var m;return n?(n.indexOf("#")===0?m=this.tocById[n.substring(1)]:n in this.tocByHref&&(m=this.tocByHref[n]),this.getByIndex(n,m,this.toc)):this.toc}getByIndex(n,m,O){if(O.length===0)return;const k=O[m];if(k&&(n===k.id||n===k.href))return k;{let V;for(let $=0;$<O.length&&(V=this.getByIndex(n,m,O[$].subitems),!V);++$);return V}}landmark(n){var m;return n?(m=this.landmarksByType[n],this.landmarks[m]):this.landmarks}parseNav(n){var m=Object(f.querySelectorByType)(n,"nav","toc"),O=[];if(!m)return O;let k=Object(f.filterChildren)(m,"ol",!0);return k&&(O=this.parseNavList(k)),O}parseNavList(n,m){const O=[];if(!n||!n.children)return O;for(let k=0;k<n.children.length;k++){const V=this.navItem(n.children[k],m);V&&O.push(V)}return O}navItem(n,m){let O=n.getAttribute("id")||void 0,k=Object(f.filterChildren)(n,"a",!0)||Object(f.filterChildren)(n,"span",!0);if(!k)return;let V=k.getAttribute("href")||"";O||(O=V);let $=k.textContent||"",rt=[],mt=Object(f.filterChildren)(n,"ol",!0);return mt&&(rt=this.parseNavList(mt,O)),{id:O,href:V,label:$,subitems:rt,parent:m}}parseLandmarks(n){var m=Object(f.querySelectorByType)(n,"nav","landmarks"),O=m?Object(f.qsa)(m,"li"):[],k=O.length,V,$=[],rt;if(!O||k===0)return $;for(V=0;V<k;++V)rt=this.landmarkItem(O[V]),rt&&($.push(rt),this.landmarksByType[rt.type]=V);return $}landmarkItem(n){let m=Object(f.filterChildren)(n,"a",!0);if(!m)return;let O=m.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,k=m.getAttribute("href")||"",V=m.textContent||"";return{href:k,label:V,type:O}}parseNcx(n){var m=Object(f.qsa)(n,"navPoint"),O=m.length,k,V={},$=[],rt,mt;if(!m||O===0)return $;for(k=0;k<O;++k)rt=this.ncxItem(m[k]),V[rt.id]=rt,rt.parent?(mt=V[rt.parent],mt.subitems.push(rt)):$.push(rt);return $}ncxItem(n){var m=n.getAttribute("id")||!1,O=Object(f.qs)(n,"content"),k=O.getAttribute("src"),V=Object(f.qs)(n,"navLabel"),$=V.textContent?V.textContent:"",rt=[],mt=n.parentNode,St;return mt&&(mt.nodeName==="navPoint"||mt.nodeName.split(":").slice(-1)[0]==="navPoint")&&(St=mt.getAttribute("id")),{id:m,href:k,label:$,subitems:rt,parent:St}}load(n){return n.map(m=>(m.label=m.title,m.subitems=m.children?this.load(m.children):[],m))}forEach(n){return this.toc.forEach(n)}}var tt=B,Z={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},st=function(){var it,n,m,O,k={};for(it in Z)if(Z.hasOwnProperty(it)){for(n in Z[it])if(Z[it].hasOwnProperty(n))if(m=Z[it][n],typeof m=="string")k[m]=it+"/"+n;else for(O=0;O<m.length;O++)k[m[O]]=it+"/"+n}return k}(),G="text/plain";function ht(it){return it&&st[it.split(".").pop().toLowerCase()]||G}var W={lookup:ht};class K{constructor(n,m){this.settings={replacements:m&&m.replacements||"base64",archive:m&&m.archive,resolver:m&&m.resolver,request:m&&m.request},this.process(n)}process(n){this.manifest=n,this.resources=Object.keys(n).map(function(m){return n[m]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(n){if(n.type==="application/xhtml+xml"||n.type==="text/html")return!0}),this.assets=this.resources.filter(function(n){if(n.type!=="application/xhtml+xml"&&n.type!=="text/html")return!0}),this.css=this.resources.filter(function(n){if(n.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map((function(n){return n.href}).bind(this)),this.cssUrls=this.css.map(function(n){return n.href})}createUrl(n){var m=new C.a(n),O=W.lookup(m.filename);return this.settings.archive?this.settings.archive.createUrl(n,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(n,"blob").then(k=>Object(f.blob2base64)(k)).then(k=>Object(f.createBase64Url)(k,O)):this.settings.request(n,"blob").then(k=>Object(f.createBlobUrl)(k,O))}replacements(){if(this.settings.replacements==="none")return new Promise((function(m){m(this.urls)}).bind(this));var n=this.urls.map(m=>{var O=this.settings.resolver(m);return this.createUrl(O).catch(k=>(console.error(k),null))});return Promise.all(n).then(m=>(this.replacementUrls=m.filter(O=>typeof O=="string"),m))}replaceCss(n,m){var O=[];return n=n||this.settings.archive,m=m||this.settings.resolver,this.cssUrls.forEach((function(k){var V=this.createCssFile(k,n,m).then((function($){var rt=this.urls.indexOf(k);rt>-1&&(this.replacementUrls[rt]=$)}).bind(this));O.push(V)}).bind(this)),Promise.all(O)}createCssFile(n){var m;if(g.a.isAbsolute(n))return new Promise(function($){$()});var O=this.settings.resolver(n),k;this.settings.archive?k=this.settings.archive.getText(O):k=this.settings.request(O,"text");var V=this.urls.map($=>{var rt=this.settings.resolver($),mt=new T.a(O).relative(rt);return mt});return k?k.then($=>($=Object(e.e)($,V,this.replacementUrls),this.settings.replacements==="base64"?m=Object(f.createBase64Url)($,"text/css"):m=Object(f.createBlobUrl)($,"text/css"),m),$=>new Promise(function(rt){rt()})):new Promise(function($){$()})}relativeTo(n,m){return m=m||this.settings.resolver,this.urls.map((function(O){var k=m(O),V=new T.a(n).relative(k);return V}).bind(this))}get(n){var m=this.urls.indexOf(n);if(m!==-1)return this.replacementUrls.length?new Promise((function(O,k){O(this.replacementUrls[m])}).bind(this)):this.createUrl(n)}substitute(n,m){var O;return m?O=this.relativeTo(m):O=this.urls,Object(e.e)(n,O,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}var ft=K;class lt{constructor(n){this.pages=[],this.locations=[],this.epubcfi=new _.a,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,n&&(this.pageList=this.parse(n)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(n){var m=Object(f.qs)(n,"html"),O=Object(f.qs)(n,"ncx");if(m)return this.parseNav(n);if(O)return this.parseNcx(n)}parseNav(n){var m=Object(f.querySelectorByType)(n,"nav","page-list"),O=m?Object(f.qsa)(m,"li"):[],k=O.length,V,$=[],rt;if(!O||k===0)return $;for(V=0;V<k;++V)rt=this.item(O[V]),$.push(rt);return $}parseNcx(n){var m=[],O=0,k,V,$,rt=0;if(V=Object(f.qs)(n,"pageList"),!V||($=Object(f.qsa)(V,"pageTarget"),rt=$.length,!$||$.length===0))return m;for(O=0;O<rt;++O)k=this.ncxItem($[O]),m.push(k);return m}ncxItem(n){var m=Object(f.qs)(n,"navLabel"),O=Object(f.qs)(m,"text"),k=O.textContent,V=Object(f.qs)(n,"content"),$=V.getAttribute("src"),rt=parseInt(k,10);return{href:$,page:rt}}item(n){var m=Object(f.qs)(n,"a"),O=m.getAttribute("href")||"",k=m.textContent||"",V=parseInt(k),$=O.indexOf("epubcfi"),rt,mt,St;return $!=-1?(rt=O.split("#"),mt=rt[0],St=rt.length>1?rt[1]:!1,{cfi:St,href:O,packageUrl:mt,page:V}):{href:O,page:V}}process(n){n.forEach(function(m){this.pages.push(m.page),m.cfi&&this.locations.push(m.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(n){var m=-1;if(this.locations.length===0)return-1;var O=Object(f.indexOfSorted)(n,this.locations,this.epubcfi.compare);return O!=-1?m=this.pages[O]:(O=Object(f.locationOf)(n,this.locations,this.epubcfi.compare),m=O-1>=0?this.pages[O-1]:this.pages[0],m!==void 0||(m=-1)),m}cfiFromPage(n){var m=-1;typeof n!="number"&&(n=parseInt(n));var O=this.pages.indexOf(n);return O!=-1&&(m=this.locations[O]),m}pageFromPercentage(n){var m=Math.round(this.totalPages*n);return m}percentageFromPage(n){var m=(n-this.firstPage)/this.totalPages;return Math.round(m*1e3)/1e3}percentageFromCfi(n){var m=this.pageFromCfi(n),O=this.percentageFromPage(m);return O}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}var at=lt,yt=d(16),wt=d(29),bt=d.n(wt);class _t{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new bt.a}catch{throw new Error("JSZip lib not loaded")}}open(n,m){return this.zip.loadAsync(n,{base64:m})}openUrl(n,m){return t(n,"binary").then((function(O){return this.zip.loadAsync(O,{base64:m})}).bind(this))}request(n,m){var O=new f.defer,k,V=new T.a(n);return m||(m=V.extension),m=="blob"?k=this.getBlob(n):k=this.getText(n),k?k.then((function($){let rt=this.handleResponse($,m);O.resolve(rt)}).bind(this)):O.reject({message:"File not found in the epub: "+n,stack:new Error().stack}),O.promise}handleResponse(n,m){var O;return m=="json"?O=JSON.parse(n):Object(f.isXml)(m)?O=Object(f.parse)(n,"text/xml"):m=="xhtml"?O=Object(f.parse)(n,"application/xhtml+xml"):m=="html"||m=="htm"?O=Object(f.parse)(n,"text/html"):O=n,O}getBlob(n,m){var O=window.decodeURIComponent(n.substr(1)),k=this.zip.file(O);if(k)return m=m||W.lookup(k.name),k.async("uint8array").then(function(V){return new Blob([V],{type:m})})}getText(n,m){var O=window.decodeURIComponent(n.substr(1)),k=this.zip.file(O);if(k)return k.async("string").then(function(V){return V})}getBase64(n,m){var O=window.decodeURIComponent(n.substr(1)),k=this.zip.file(O);if(k)return m=m||W.lookup(k.name),k.async("base64").then(function(V){return"data:"+m+";base64,"+V})}createUrl(n,m){var O=new f.defer,k=window.URL||window.webkitURL||window.mozURL,V,$,rt=m&&m.base64;return n in this.urlCache?(O.resolve(this.urlCache[n]),O.promise):(rt?($=this.getBase64(n),$&&$.then((function(mt){this.urlCache[n]=mt,O.resolve(mt)}).bind(this))):($=this.getBlob(n),$&&$.then((function(mt){V=k.createObjectURL(mt),this.urlCache[n]=V,O.resolve(V)}).bind(this))),$||O.reject({message:"File not found in the epub: "+n,stack:new Error().stack}),O.promise)}revokeUrl(n){var m=window.URL||window.webkitURL||window.mozURL,O=this.urlCache[n];O&&m.revokeObjectURL(O)}destroy(){var n=window.URL||window.webkitURL||window.mozURL;for(let m in this.urlCache)n.revokeObjectURL(m);this.zip=void 0,this.urlCache={}}}var Ct=_t,Tt=d(23),zt=d.n(Tt);class Bt{constructor(n,m,O){this.urlCache={},this.storage=void 0,this.name=n,this.requester=m||t,this.resolver=O,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let n;typeof zt.a>"u"&&(n=zt.a),this.storage=n.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(n){let m=navigator.onLine;this.online=m,m?this.emit("online",this):this.emit("offline",this)}add(n,m){let O=n.resources.map(k=>{let{href:V}=k,$=this.resolver(V),rt=window.encodeURIComponent($);return this.storage.getItem(rt).then(mt=>!mt||m?this.requester($,"binary").then(St=>this.storage.setItem(rt,St)):mt)});return Promise.all(O)}put(n,m,O){let k=window.encodeURIComponent(n);return this.storage.getItem(k).then(V=>V||this.requester(n,"binary",m,O).then($=>this.storage.setItem(k,$)))}request(n,m,O,k){return this.online?this.requester(n,m,O,k).then(V=>(this.put(n),V)):this.retrieve(n,m)}retrieve(n,m){new f.defer;var O,k=new T.a(n);return m||(m=k.extension),m=="blob"?O=this.getBlob(n):O=this.getText(n),O.then(V=>{var $=new f.defer,rt;return V?(rt=this.handleResponse(V,m),$.resolve(rt)):$.reject({message:"File not found in storage: "+n,stack:new Error().stack}),$.promise})}handleResponse(n,m){var O;return m=="json"?O=JSON.parse(n):Object(f.isXml)(m)?O=Object(f.parse)(n,"text/xml"):m=="xhtml"?O=Object(f.parse)(n,"application/xhtml+xml"):m=="html"||m=="htm"?O=Object(f.parse)(n,"text/html"):O=n,O}getBlob(n,m){let O=window.encodeURIComponent(n);return this.storage.getItem(O).then(function(k){if(k)return m=m||W.lookup(n),new Blob([k],{type:m})})}getText(n,m){let O=window.encodeURIComponent(n);return m=m||W.lookup(n),this.storage.getItem(O).then(function(k){var V=new f.defer,$=new FileReader,rt;if(k)return rt=new Blob([k],{type:m}),$.addEventListener("loadend",()=>{V.resolve($.result)}),$.readAsText(rt,m),V.promise})}getBase64(n,m){let O=window.encodeURIComponent(n);return m=m||W.lookup(n),this.storage.getItem(O).then(k=>{var V=new f.defer,$=new FileReader,rt;if(k)return rt=new Blob([k],{type:m}),$.addEventListener("loadend",()=>{V.resolve($.result)}),$.readAsDataURL(rt,m),V.promise})}createUrl(n,m){var O=new f.defer,k=window.URL||window.webkitURL||window.mozURL,V,$,rt=m&&m.base64;return n in this.urlCache?(O.resolve(this.urlCache[n]),O.promise):(rt?($=this.getBase64(n),$&&$.then((function(mt){this.urlCache[n]=mt,O.resolve(mt)}).bind(this))):($=this.getBlob(n),$&&$.then((function(mt){V=k.createObjectURL(mt),this.urlCache[n]=V,O.resolve(V)}).bind(this))),$||O.reject({message:"File not found in storage: "+n,stack:new Error().stack}),O.promise)}revokeUrl(n){var m=window.URL||window.webkitURL||window.mozURL,O=this.urlCache[n];O&&m.revokeObjectURL(O)}destroy(){var n=window.URL||window.webkitURL||window.mozURL;for(let m in this.urlCache)n.revokeObjectURL(m);this.urlCache={},this.removeListeners()}}b()(Bt.prototype);var h=Bt;class j{constructor(n){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",n&&this.parse(n)}parse(n){if(!n)return this;const m=Object(f.qs)(n,"display_options");return m?(Object(f.qsa)(m,"option").forEach(k=>{let V="";switch(k.childNodes.length&&(V=k.childNodes[0].nodeValue),k.attributes.name.value){case"interactive":this.interactive=V;break;case"fixed-layout":this.fixedLayout=V;break;case"open-to-spread":this.openToSpread=V;break;case"orientation-lock":this.orientationLock=V;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}var U=j;const R="META-INF/container.xml",P="META-INF/com.apple.ibooks.display-options.xml",F={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};class nt{constructor(n,m){typeof m>"u"&&typeof n!="string"&&!(n instanceof Blob)&&!(n instanceof ArrayBuffer)&&(m=n,n=void 0),this.settings=Object(f.extend)(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),Object(f.extend)(this.settings,m),this.opening=new f.defer,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new f.defer,spine:new f.defer,metadata:new f.defer,cover:new f.defer,navigation:new f.defer,pageList:new f.defer,resources:new f.defer,displayOptions:new f.defer},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||t,this.spine=new w,this.locations=new x(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),n&&this.open(n,this.settings.openAs).catch(O=>{var k=new Error("Cannot load book at "+n);this.emit(i.c.BOOK.OPEN_FAILED,k)})}open(n,m){var O,k=m||this.determineType(n);return k===F.BINARY?(this.archived=!0,this.url=new C.a("/",""),O=this.openEpub(n)):k===F.BASE64?(this.archived=!0,this.url=new C.a("/",""),O=this.openEpub(n,k)):k===F.EPUB?(this.archived=!0,this.url=new C.a("/",""),O=this.request(n,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):k==F.OPF?(this.url=new C.a(n),O=this.openPackaging(this.url.Path.toString())):k==F.MANIFEST?(this.url=new C.a(n),O=this.openManifest(this.url.Path.toString())):(this.url=new C.a(n),O=this.openContainer(R).then(this.openPackaging.bind(this))),O}openEpub(n,m){return this.unarchive(n,m||this.settings.encoding).then(()=>this.openContainer(R)).then(O=>this.openPackaging(O))}openContainer(n){return this.load(n).then(m=>(this.container=new y(m),this.resolve(this.container.packagePath)))}openPackaging(n){return this.path=new T.a(n),this.load(n).then(m=>(this.packaging=new c(m),this.unpack(this.packaging)))}openManifest(n){return this.path=new T.a(n),this.load(n).then(m=>(this.packaging=new c,this.packaging.load(m),this.unpack(this.packaging)))}load(n){var m=this.resolve(n);return this.archived?this.archive.request(m):this.request(m,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(n,m){if(n){var O=n,k=n.indexOf("://")>-1;return k?n:(this.path&&(O=this.path.resolve(n)),m!=!1&&this.url&&(O=this.url.resolve(O)),O)}}canonical(n){var m=n;return n?(this.settings.canonical?m=this.settings.canonical(n):m=this.resolve(n,!0),m):""}determineType(n){var m,O,k;if(this.settings.encoding==="base64")return F.BASE64;if(typeof n!="string")return F.BINARY;if(m=new C.a(n),O=m.path(),k=O.extension,k&&(k=k.replace(/\?.*$/,"")),!k)return F.DIRECTORY;if(k==="epub")return F.EPUB;if(k==="opf")return F.OPF;if(k==="json")return F.MANIFEST}unpack(n){this.package=n,this.packaging.metadata.layout===""?this.load(this.url.resolve(P)).then(m=>{this.displayOptions=new U(m),this.loading.displayOptions.resolve(this.displayOptions)}).catch(m=>{this.displayOptions=new U,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new U,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new ft(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(m=>{console.error(m)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(n){let m=n.navPath||n.ncxPath,O=n.toc;return O?new Promise((k,V)=>{this.navigation=new tt(O),n.pageList&&(this.pageList=new at(n.pageList)),k(this.navigation)}):m?this.load(m,"xml").then(k=>(this.navigation=new tt(k),this.pageList=new at(k),this.navigation)):new Promise((k,V)=>{this.navigation=new tt,this.pageList=new at,k(this.navigation)})}section(n){return this.spine.get(n)}renderTo(n,m){return this.rendition=new yt.a(this,m),this.rendition.attachTo(n),this.rendition}setRequestCredentials(n){this.settings.requestCredentials=n}setRequestHeaders(n){this.settings.requestHeaders=n}unarchive(n,m){return this.archive=new Ct,this.archive.open(n,m)}store(n){let m=this.settings.replacements&&this.settings.replacements!=="none",O=this.url,k=this.settings.requestMethod||t.bind(this);return this.storage=new h(n,k,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let V=($,rt)=>{rt.output=this.resources.substitute($,rt.url)};this.resources.settings.replacements=m||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new C.a("/",""),this.spine.hooks.serialize.register(V)}),this.storage.on("online",()=>{this.url=O,this.spine.hooks.serialize.deregister(V)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((n,m)=>{m.output=this.resources.substitute(n,m.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(n){var m=new _.a(n),O=this.spine.get(m.spinePos),k=this.load.bind(this);return O?O.load(k).then(function(V){var $=m.toRange(O.document);return $}):new Promise((V,$)=>{$("CFI could not be found")})}key(n){var m=n||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${i.b}:${m}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}b()(nt.prototype),A.a=nt},function(X,A,d){var E=d(14),b=E.NAMESPACE;function f(N){return N!==""}function C(N){return N?N.split(/[\t\n\f\r ]+/).filter(f):[]}function T(N,z){return N.hasOwnProperty(z)||(N[z]=!0),N}function _(N){if(!N)return[];var z=C(N);return Object.keys(z.reduce(T,{}))}function r(N){return function(z){return N&&N.indexOf(z)!==-1}}function e(N,z){for(var q in N)z[q]=N[q]}function u(N,z){var q=N.prototype;if(!(q instanceof z)){let ot=function(){};ot.prototype=z.prototype,ot=new ot,e(q,ot),N.prototype=q=ot}q.constructor!=N&&(typeof N!="function"&&console.error("unknown Class:"+N),q.constructor=N)}var t={},o=t.ELEMENT_NODE=1,s=t.ATTRIBUTE_NODE=2,l=t.TEXT_NODE=3,a=t.CDATA_SECTION_NODE=4,w=t.ENTITY_REFERENCE_NODE=5,v=t.ENTITY_NODE=6,i=t.PROCESSING_INSTRUCTION_NODE=7,p=t.COMMENT_NODE=8,x=t.DOCUMENT_NODE=9,I=t.DOCUMENT_TYPE_NODE=10,g=t.DOCUMENT_FRAGMENT_NODE=11,S=t.NOTATION_NODE=12,y={},D={};y.INDEX_SIZE_ERR=(D[1]="Index size error",1),y.DOMSTRING_SIZE_ERR=(D[2]="DOMString size error",2);var c=y.HIERARCHY_REQUEST_ERR=(D[3]="Hierarchy request error",3);y.WRONG_DOCUMENT_ERR=(D[4]="Wrong document",4),y.INVALID_CHARACTER_ERR=(D[5]="Invalid character",5),y.NO_DATA_ALLOWED_ERR=(D[6]="No data allowed",6),y.NO_MODIFICATION_ALLOWED_ERR=(D[7]="No modification allowed",7);var B=y.NOT_FOUND_ERR=(D[8]="Not found",8);y.NOT_SUPPORTED_ERR=(D[9]="Not supported",9);var tt=y.INUSE_ATTRIBUTE_ERR=(D[10]="Attribute in use",10);y.INVALID_STATE_ERR=(D[11]="Invalid state",11),y.SYNTAX_ERR=(D[12]="Syntax error",12),y.INVALID_MODIFICATION_ERR=(D[13]="Invalid modification",13),y.NAMESPACE_ERR=(D[14]="Invalid namespace",14),y.INVALID_ACCESS_ERR=(D[15]="Invalid access",15);function Z(N,z){if(z instanceof Error)var q=z;else q=this,Error.call(this,D[N]),this.message=D[N],Error.captureStackTrace&&Error.captureStackTrace(this,Z);return q.code=N,z&&(this.message=this.message+": "+z),q}Z.prototype=Error.prototype,e(y,Z);function st(){}st.prototype={length:0,item:function(N){return this[N]||null},toString:function(N,z){for(var q=[],ot=0;ot<this.length;ot++)Rt(this[ot],q,N,z);return q.join("")}};function G(N,z){this._node=N,this._refresh=z,ht(this)}function ht(N){var z=N._node._inc||N._node.ownerDocument._inc;if(N._inc!=z){var q=N._refresh(N._node);kt(N,"length",q.length),e(q,N),N._inc=z}}G.prototype.item=function(N){return ht(this),this[N]},u(G,st);function W(){}function K(N,z){for(var q=N.length;q--;)if(N[q]===z)return q}function ft(N,z,q,ot){if(ot?z[K(z,ot)]=q:z[z.length++]=q,N){q.ownerElement=N;var gt=N.ownerDocument;gt&&(ot&&Tt(gt,N,ot),Ct(gt,N,q))}}function lt(N,z,q){var ot=K(z,q);if(ot>=0){for(var gt=z.length-1;ot<gt;)z[ot]=z[++ot];if(z.length=gt,N){var It=N.ownerDocument;It&&(Tt(It,N,q),q.ownerElement=null)}}else throw Z(B,new Error(N.tagName+"@"+q))}W.prototype={length:0,item:st.prototype.item,getNamedItem:function(N){for(var z=this.length;z--;){var q=this[z];if(q.nodeName==N)return q}},setNamedItem:function(N){var z=N.ownerElement;if(z&&z!=this._ownerElement)throw new Z(tt);var q=this.getNamedItem(N.nodeName);return ft(this._ownerElement,this,N,q),q},setNamedItemNS:function(N){var z=N.ownerElement,q;if(z&&z!=this._ownerElement)throw new Z(tt);return q=this.getNamedItemNS(N.namespaceURI,N.localName),ft(this._ownerElement,this,N,q),q},removeNamedItem:function(N){var z=this.getNamedItem(N);return lt(this._ownerElement,this,z),z},removeNamedItemNS:function(N,z){var q=this.getNamedItemNS(N,z);return lt(this._ownerElement,this,q),q},getNamedItemNS:function(N,z){for(var q=this.length;q--;){var ot=this[q];if(ot.localName==z&&ot.namespaceURI==N)return ot}return null}};function at(){}at.prototype={hasFeature:function(N,z){return!0},createDocument:function(N,z,q){var ot=new _t;if(ot.implementation=this,ot.childNodes=new st,ot.doctype=q||null,q&&ot.appendChild(q),z){var gt=ot.createElementNS(N,z);ot.appendChild(gt)}return ot},createDocumentType:function(N,z,q){var ot=new n;return ot.name=N,ot.nodeName=N,ot.publicId=z||"",ot.systemId=q||"",ot}};function yt(){}yt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(N,z){return h(this,N,z)},replaceChild:function(N,z){this.insertBefore(N,z),z&&this.removeChild(z)},removeChild:function(N){return Bt(this,N)},appendChild:function(N){return this.insertBefore(N,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(N){return At(this.ownerDocument||this,this,N)},normalize:function(){for(var N=this.firstChild;N;){var z=N.nextSibling;z&&z.nodeType==l&&N.nodeType==l?(this.removeChild(z),N.appendData(z.data)):(N.normalize(),N=z)}},isSupported:function(N,z){return this.ownerDocument.implementation.hasFeature(N,z)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(N){for(var z=this;z;){var q=z._nsMap;if(q){for(var ot in q)if(q[ot]==N)return ot}z=z.nodeType==s?z.ownerDocument:z.parentNode}return null},lookupNamespaceURI:function(N){for(var z=this;z;){var q=z._nsMap;if(q&&N in q)return q[N];z=z.nodeType==s?z.ownerDocument:z.parentNode}return null},isDefaultNamespace:function(N){var z=this.lookupPrefix(N);return z==null}};function wt(N){return N=="<"&&"&lt;"||N==">"&&"&gt;"||N=="&"&&"&amp;"||N=='"'&&"&quot;"||"&#"+N.charCodeAt()+";"}e(t,yt),e(t,yt.prototype);function bt(N,z){if(z(N))return!0;if(N=N.firstChild)do if(bt(N,z))return!0;while(N=N.nextSibling)}function _t(){}function Ct(N,z,q){N&&N._inc++;var ot=q.namespaceURI;ot===b.XMLNS&&(z._nsMap[q.prefix?q.localName:""]=q.value)}function Tt(N,z,q,ot){N&&N._inc++;var gt=q.namespaceURI;gt===b.XMLNS&&delete z._nsMap[q.prefix?q.localName:""]}function zt(N,z,q){if(N&&N._inc){N._inc++;var ot=z.childNodes;if(q)ot[ot.length++]=q;else{for(var gt=z.firstChild,It=0;gt;)ot[It++]=gt,gt=gt.nextSibling;ot.length=It}}}function Bt(N,z){var q=z.previousSibling,ot=z.nextSibling;return q?q.nextSibling=ot:N.firstChild=ot,ot?ot.previousSibling=q:N.lastChild=q,zt(N.ownerDocument,N),z}function h(N,z,q){var ot=z.parentNode;if(ot&&ot.removeChild(z),z.nodeType===g){var gt=z.firstChild;if(gt==null)return z;var It=z.lastChild}else gt=It=z;var Pt=q?q.previousSibling:N.lastChild;gt.previousSibling=Pt,It.nextSibling=q,Pt?Pt.nextSibling=gt:N.firstChild=gt,q==null?N.lastChild=It:q.previousSibling=It;do gt.parentNode=N;while(gt!==It&&(gt=gt.nextSibling));return zt(N.ownerDocument||N,N),z.nodeType==g&&(z.firstChild=z.lastChild=null),z}function j(N,z){var q=z.parentNode;if(q){var ot=N.lastChild;q.removeChild(z);var ot=N.lastChild}var ot=N.lastChild;return z.parentNode=N,z.previousSibling=ot,z.nextSibling=null,ot?ot.nextSibling=z:N.firstChild=z,N.lastChild=z,zt(N.ownerDocument,N,z),z}_t.prototype={nodeName:"#document",nodeType:x,doctype:null,documentElement:null,_inc:1,insertBefore:function(N,z){if(N.nodeType==g){for(var q=N.firstChild;q;){var ot=q.nextSibling;this.insertBefore(q,z),q=ot}return N}return this.documentElement==null&&N.nodeType==o&&(this.documentElement=N),h(this,N,z),N.ownerDocument=this,N},removeChild:function(N){return this.documentElement==N&&(this.documentElement=null),Bt(this,N)},importNode:function(N,z){return xt(this,N,z)},getElementById:function(N){var z=null;return bt(this.documentElement,function(q){if(q.nodeType==o&&q.getAttribute("id")==N)return z=q,!0}),z},getElementsByClassName:function(N){var z=_(N);return new G(this,function(q){var ot=[];return z.length>0&&bt(q.documentElement,function(gt){if(gt!==q&&gt.nodeType===o){var It=gt.getAttribute("class");if(It){var Pt=N===It;if(!Pt){var Mt=_(It);Pt=z.every(r(Mt))}Pt&&ot.push(gt)}}}),ot})},createElement:function(N){var z=new U;z.ownerDocument=this,z.nodeName=N,z.tagName=N,z.localName=N,z.childNodes=new st;var q=z.attributes=new W;return q._ownerElement=z,z},createDocumentFragment:function(){var N=new V;return N.ownerDocument=this,N.childNodes=new st,N},createTextNode:function(N){var z=new F;return z.ownerDocument=this,z.appendData(N),z},createComment:function(N){var z=new nt;return z.ownerDocument=this,z.appendData(N),z},createCDATASection:function(N){var z=new it;return z.ownerDocument=this,z.appendData(N),z},createProcessingInstruction:function(N,z){var q=new $;return q.ownerDocument=this,q.tagName=q.target=N,q.nodeValue=q.data=z,q},createAttribute:function(N){var z=new R;return z.ownerDocument=this,z.name=N,z.nodeName=N,z.localName=N,z.specified=!0,z},createEntityReference:function(N){var z=new k;return z.ownerDocument=this,z.nodeName=N,z},createElementNS:function(N,z){var q=new U,ot=z.split(":"),gt=q.attributes=new W;return q.childNodes=new st,q.ownerDocument=this,q.nodeName=z,q.tagName=z,q.namespaceURI=N,ot.length==2?(q.prefix=ot[0],q.localName=ot[1]):q.localName=z,gt._ownerElement=q,q},createAttributeNS:function(N,z){var q=new R,ot=z.split(":");return q.ownerDocument=this,q.nodeName=z,q.name=z,q.namespaceURI=N,q.specified=!0,ot.length==2?(q.prefix=ot[0],q.localName=ot[1]):q.localName=z,q}},u(_t,yt);function U(){this._nsMap={}}U.prototype={nodeType:o,hasAttribute:function(N){return this.getAttributeNode(N)!=null},getAttribute:function(N){var z=this.getAttributeNode(N);return z&&z.value||""},getAttributeNode:function(N){return this.attributes.getNamedItem(N)},setAttribute:function(N,z){var q=this.ownerDocument.createAttribute(N);q.value=q.nodeValue=""+z,this.setAttributeNode(q)},removeAttribute:function(N){var z=this.getAttributeNode(N);z&&this.removeAttributeNode(z)},appendChild:function(N){return N.nodeType===g?this.insertBefore(N,null):j(this,N)},setAttributeNode:function(N){return this.attributes.setNamedItem(N)},setAttributeNodeNS:function(N){return this.attributes.setNamedItemNS(N)},removeAttributeNode:function(N){return this.attributes.removeNamedItem(N.nodeName)},removeAttributeNS:function(N,z){var q=this.getAttributeNodeNS(N,z);q&&this.removeAttributeNode(q)},hasAttributeNS:function(N,z){return this.getAttributeNodeNS(N,z)!=null},getAttributeNS:function(N,z){var q=this.getAttributeNodeNS(N,z);return q&&q.value||""},setAttributeNS:function(N,z,q){var ot=this.ownerDocument.createAttributeNS(N,z);ot.value=ot.nodeValue=""+q,this.setAttributeNode(ot)},getAttributeNodeNS:function(N,z){return this.attributes.getNamedItemNS(N,z)},getElementsByTagName:function(N){return new G(this,function(z){var q=[];return bt(z,function(ot){ot!==z&&ot.nodeType==o&&(N==="*"||ot.tagName==N)&&q.push(ot)}),q})},getElementsByTagNameNS:function(N,z){return new G(this,function(q){var ot=[];return bt(q,function(gt){gt!==q&&gt.nodeType===o&&(N==="*"||gt.namespaceURI===N)&&(z==="*"||gt.localName==z)&&ot.push(gt)}),ot})}},_t.prototype.getElementsByTagName=U.prototype.getElementsByTagName,_t.prototype.getElementsByTagNameNS=U.prototype.getElementsByTagNameNS,u(U,yt);function R(){}R.prototype.nodeType=s,u(R,yt);function P(){}P.prototype={data:"",substringData:function(N,z){return this.data.substring(N,N+z)},appendData:function(N){N=this.data+N,this.nodeValue=this.data=N,this.length=N.length},insertData:function(N,z){this.replaceData(N,0,z)},appendChild:function(N){throw new Error(D[c])},deleteData:function(N,z){this.replaceData(N,z,"")},replaceData:function(N,z,q){var ot=this.data.substring(0,N),gt=this.data.substring(N+z);q=ot+q+gt,this.nodeValue=this.data=q,this.length=q.length}},u(P,yt);function F(){}F.prototype={nodeName:"#text",nodeType:l,splitText:function(N){var z=this.data,q=z.substring(N);z=z.substring(0,N),this.data=this.nodeValue=z,this.length=z.length;var ot=this.ownerDocument.createTextNode(q);return this.parentNode&&this.parentNode.insertBefore(ot,this.nextSibling),ot}},u(F,P);function nt(){}nt.prototype={nodeName:"#comment",nodeType:p},u(nt,P);function it(){}it.prototype={nodeName:"#cdata-section",nodeType:a},u(it,P);function n(){}n.prototype.nodeType=I,u(n,yt);function m(){}m.prototype.nodeType=S,u(m,yt);function O(){}O.prototype.nodeType=v,u(O,yt);function k(){}k.prototype.nodeType=w,u(k,yt);function V(){}V.prototype.nodeName="#document-fragment",V.prototype.nodeType=g,u(V,yt);function $(){}$.prototype.nodeType=i,u($,yt);function rt(){}rt.prototype.serializeToString=function(N,z,q){return mt.call(N,z,q)},yt.prototype.toString=mt;function mt(N,z){var q=[],ot=this.nodeType==9&&this.documentElement||this,gt=ot.prefix,It=ot.namespaceURI;if(It&&gt==null){var gt=ot.lookupPrefix(It);if(gt==null)var Pt=[{namespace:It,prefix:null}]}return Rt(this,q,N,z,Pt),q.join("")}function St(N,z,q){var ot=N.prefix||"",gt=N.namespaceURI;if(!gt||ot==="xml"&&gt===b.XML||gt===b.XMLNS)return!1;for(var It=q.length;It--;){var Pt=q[It];if(Pt.prefix===ot)return Pt.namespace!==gt}return!0}function Ot(N,z,q){N.push(" ",z,'="',q.replace(/[<&"]/g,wt),'"')}function Rt(N,z,q,ot,gt){if(gt||(gt=[]),ot)if(N=ot(N),N){if(typeof N=="string"){z.push(N);return}}else return;switch(N.nodeType){case o:var It=N.attributes,Pt=It.length,Wt=N.firstChild,Mt=N.tagName;q=b.isHTML(N.namespaceURI)||q;var Xt=Mt;if(!q&&!N.prefix&&N.namespaceURI){for(var Ht,jt=0;jt<It.length;jt++)if(It.item(jt).name==="xmlns"){Ht=It.item(jt).value;break}if(!Ht)for(var qt=gt.length-1;qt>=0;qt--){var Kt=gt[qt];if(Kt.prefix===""&&Kt.namespace===N.namespaceURI){Ht=Kt.namespace;break}}if(Ht!==N.namespaceURI)for(var qt=gt.length-1;qt>=0;qt--){var Kt=gt[qt];if(Kt.namespace===N.namespaceURI){Kt.prefix&&(Xt=Kt.prefix+":"+Mt);break}}}z.push("<",Xt);for(var Gt=0;Gt<Pt;Gt++){var Zt=It.item(Gt);Zt.prefix=="xmlns"?gt.push({prefix:Zt.localName,namespace:Zt.value}):Zt.nodeName=="xmlns"&&gt.push({prefix:"",namespace:Zt.value})}for(var Gt=0;Gt<Pt;Gt++){var Zt=It.item(Gt);if(St(Zt,q,gt)){var $t=Zt.prefix||"",Qt=Zt.namespaceURI;Ot(z,$t?"xmlns:"+$t:"xmlns",Qt),gt.push({prefix:$t,namespace:Qt})}Rt(Zt,z,q,ot,gt)}if(Mt===Xt&&St(N,q,gt)){var $t=N.prefix||"",Qt=N.namespaceURI;Ot(z,$t?"xmlns:"+$t:"xmlns",Qt),gt.push({prefix:$t,namespace:Qt})}if(Wt||q&&!/^(?:meta|link|img|br|hr|input)$/i.test(Mt)){if(z.push(">"),q&&/^script$/i.test(Mt))for(;Wt;)Wt.data?z.push(Wt.data):Rt(Wt,z,q,ot,gt.slice()),Wt=Wt.nextSibling;else for(;Wt;)Rt(Wt,z,q,ot,gt.slice()),Wt=Wt.nextSibling;z.push("</",Xt,">")}else z.push("/>");return;case x:case g:for(var Wt=N.firstChild;Wt;)Rt(Wt,z,q,ot,gt.slice()),Wt=Wt.nextSibling;return;case s:return Ot(z,N.name,N.value);case l:return z.push(N.data.replace(/[<&]/g,wt).replace(/]]>/g,"]]&gt;"));case a:return z.push("<![CDATA[",N.data,"]]>");case p:return z.push("<!--",N.data,"-->");case I:var re=N.publicId,Jt=N.systemId;if(z.push("<!DOCTYPE ",N.name),re)z.push(" PUBLIC ",re),Jt&&Jt!="."&&z.push(" ",Jt),z.push(">");else if(Jt&&Jt!=".")z.push(" SYSTEM ",Jt,">");else{var se=N.internalSubset;se&&z.push(" [",se,"]"),z.push(">")}return;case i:return z.push("<?",N.target," ",N.data,"?>");case w:return z.push("&",N.nodeName,";");default:z.push("??",N.nodeName)}}function xt(N,z,q){var ot;switch(z.nodeType){case o:ot=z.cloneNode(!1),ot.ownerDocument=N;case g:break;case s:q=!0;break}if(ot||(ot=z.cloneNode(!1)),ot.ownerDocument=N,ot.parentNode=null,q)for(var gt=z.firstChild;gt;)ot.appendChild(xt(N,gt,q)),gt=gt.nextSibling;return ot}function At(N,z,q){var ot=new z.constructor;for(var gt in z){var It=z[gt];typeof It!="object"&&It!=ot[gt]&&(ot[gt]=It)}switch(z.childNodes&&(ot.childNodes=new st),ot.ownerDocument=N,ot.nodeType){case o:var Pt=z.attributes,Mt=ot.attributes=new W,Xt=Pt.length;Mt._ownerElement=ot;for(var Ht=0;Ht<Xt;Ht++)ot.setAttributeNode(At(N,Pt.item(Ht),!0));break;case s:q=!0}if(q)for(var jt=z.firstChild;jt;)ot.appendChild(At(N,jt,q)),jt=jt.nextSibling;return ot}function kt(N,z,q){N[z]=q}try{if(Object.defineProperty){let N=function(z){switch(z.nodeType){case o:case g:var q=[];for(z=z.firstChild;z;)z.nodeType!==7&&z.nodeType!==8&&q.push(N(z)),z=z.nextSibling;return q.join("");default:return z.nodeValue}};Object.defineProperty(G.prototype,"length",{get:function(){return ht(this),this.$$length}}),Object.defineProperty(yt.prototype,"textContent",{get:function(){return N(this)},set:function(z){switch(this.nodeType){case o:case g:for(;this.firstChild;)this.removeChild(this.firstChild);(z||String(z))&&this.appendChild(this.ownerDocument.createTextNode(z));break;default:this.data=z,this.value=z,this.nodeValue=z}}}),kt=function(z,q,ot){z["$$"+q]=ot}}}catch{}A.DocumentType=n,A.DOMException=Z,A.DOMImplementation=at,A.Element=U,A.Node=yt,A.NodeList=st,A.XMLSerializer=rt},function(X,A,d){var E=d(52),b=typeof self=="object"&&self&&self.Object===Object&&self,f=E||b||Function("return this")();X.exports=f},function(X,A,d){var E=d(26),b=E.Symbol;X.exports=b},function(X,A,d){var E=d(21),b=d(19),f="Expected a function";function C(T,_,r){var e=!0,u=!0;if(typeof T!="function")throw new TypeError(f);return b(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),E(T,_,{leading:e,maxWait:_,trailing:u})}X.exports=C},function(X,A){X.exports=Y},function(X,A,d){d.r(A),(function(E){var b=d(24),f=d(16),C=d(2),T=d(12),_=d(0),r=d(1);d(20),d(10),d(22);function e(u,t){return new b.a(u,t)}e.VERSION=r.b,typeof E<"u"&&(E.EPUBJS_VERSION=r.b),e.Book=b.a,e.Rendition=f.a,e.Contents=T.a,e.CFI=C.a,e.utils=_,A.default=e}).call(this,d(17))},function(X,A,d){var E=d(32),b=d(40),f=d(41),C=d(42),T;T=X.exports=function(_,r){var e,u,t,o,s;return arguments.length<2||typeof _!="string"?(o=r,r=_,_=null):o=arguments[2],_==null?(e=t=!0,u=!1):(e=C.call(_,"c"),u=C.call(_,"e"),t=C.call(_,"w")),s={value:r,configurable:e,enumerable:u,writable:t},o?E(b(o),s):s},T.gs=function(_,r,e){var u,t,o,s;return typeof _!="string"?(o=e,e=r,r=_,_=null):o=arguments[3],r==null?r=void 0:f(r)?e==null?e=void 0:f(e)||(o=e,e=void 0):(o=r,r=e=void 0),_==null?(u=!0,t=!1):(u=C.call(_,"c"),t=C.call(_,"e")),s={get:r,set:e,configurable:u,enumerable:t},o?E(b(o),s):s}},function(X,A,d){X.exports=d(33)()?Object.assign:d(34)},function(X,A,d){X.exports=function(){var E=Object.assign,b;return typeof E!="function"?!1:(b={foo:"raz"},E(b,{bar:"dwa"},{trzy:"trzy"}),b.foo+b.bar+b.trzy==="razdwatrzy")}},function(X,A,d){var E=d(35),b=d(39),f=Math.max;X.exports=function(C,T){var _,r,e=f(arguments.length,2),u;for(C=Object(b(C)),u=function(t){try{C[t]=T[t]}catch(o){_||(_=o)}},r=1;r<e;++r)T=arguments[r],E(T).forEach(u);if(_!==void 0)throw _;return C}},function(X,A,d){X.exports=d(36)()?Object.keys:d(37)},function(X,A,d){X.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},function(X,A,d){var E=d(18),b=Object.keys;X.exports=function(f){return b(E(f)?Object(f):f)}},function(X,A,d){X.exports=function(){}},function(X,A,d){var E=d(18);X.exports=function(b){if(!E(b))throw new TypeError("Cannot use null or undefined");return b}},function(X,A,d){var E=d(18),b=Array.prototype.forEach,f=Object.create,C=function(T,_){var r;for(r in T)_[r]=T[r]};X.exports=function(T){var _=f(null);return b.call(arguments,function(r){E(r)&&C(Object(r),_)}),_}},function(X,A,d){X.exports=function(E){return typeof E=="function"}},function(X,A,d){X.exports=d(43)()?String.prototype.contains:d(44)},function(X,A,d){var E="razdwatrzy";X.exports=function(){return typeof E.contains!="function"?!1:E.contains("dwa")===!0&&E.contains("foo")===!1}},function(X,A,d){var E=String.prototype.indexOf;X.exports=function(b){return E.call(this,b,arguments[1])>-1}},function(X,A,d){X.exports=function(E){if(typeof E!="function")throw new TypeError(E+" is not a function");return E}},function(X,A,d){var E=d(14),b=d(25),f=d(47),C=d(48),T=b.DOMImplementation,_=E.NAMESPACE,r=C.ParseError,e=C.XMLReader;function u(v){this.options=v||{locator:{}}}u.prototype.parseFromString=function(v,i){var p=this.options,x=new e,I=p.domBuilder||new o,g=p.errorHandler,S=p.locator,y=p.xmlns||{},D=/\/x?html?$/.test(i),c=D?f.HTML_ENTITIES:f.XML_ENTITIES;return S&&I.setDocumentLocator(S),x.errorHandler=t(g,I,S),x.domBuilder=p.domBuilder||I,D&&(y[""]=_.HTML),y.xml=y.xml||_.XML,v&&typeof v=="string"?x.parse(v,y,c):x.errorHandler.error("invalid doc source"),I.doc};function t(v,i,p){if(!v){if(i instanceof o)return i;v=i}var x={},I=v instanceof Function;p=p||{};function g(S){var y=v[S];!y&&I&&(y=v.length==2?function(D){v(S,D)}:v),x[S]=y&&function(D){y("[xmldom "+S+"]	"+D+l(p))}||function(){}}return g("warning"),g("error"),g("fatalError"),x}function o(){this.cdata=!1}function s(v,i){i.lineNumber=v.lineNumber,i.columnNumber=v.columnNumber}o.prototype={startDocument:function(){this.doc=new T().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(v,i,p,x){var I=this.doc,g=I.createElementNS(v,p||i),S=x.length;w(this,g),this.currentElement=g,this.locator&&s(this.locator,g);for(var y=0;y<S;y++){var v=x.getURI(y),D=x.getValue(y),p=x.getQName(y),c=I.createAttributeNS(v,p);this.locator&&s(x.getLocator(y),c),c.value=c.nodeValue=D,g.setAttributeNode(c)}},endElement:function(v,i,p){var x=this.currentElement;x.tagName,this.currentElement=x.parentNode},startPrefixMapping:function(v,i){},endPrefixMapping:function(v){},processingInstruction:function(v,i){var p=this.doc.createProcessingInstruction(v,i);this.locator&&s(this.locator,p),w(this,p)},ignorableWhitespace:function(v,i,p){},characters:function(v,i,p){if(v=a.apply(this,arguments),v){if(this.cdata)var x=this.doc.createCDATASection(v);else var x=this.doc.createTextNode(v);this.currentElement?this.currentElement.appendChild(x):/^\s*$/.test(v)&&this.doc.appendChild(x),this.locator&&s(this.locator,x)}},skippedEntity:function(v){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(v){(this.locator=v)&&(v.lineNumber=0)},comment:function(v,i,p){v=a.apply(this,arguments);var x=this.doc.createComment(v);this.locator&&s(this.locator,x),w(this,x)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(v,i,p){var x=this.doc.implementation;if(x&&x.createDocumentType){var I=x.createDocumentType(v,i,p);this.locator&&s(this.locator,I),w(this,I),this.doc.doctype=I}},warning:function(v){console.warn("[xmldom warning]	"+v,l(this.locator))},error:function(v){console.error("[xmldom error]	"+v,l(this.locator))},fatalError:function(v){throw new r(v,this.locator)}};function l(v){if(v)return`
@`+(v.systemId||"")+"#[line:"+v.lineNumber+",col:"+v.columnNumber+"]"}function a(v,i,p){return typeof v=="string"?v.substr(i,p):v.length>=i+p||i?new java.lang.String(v,i,p)+"":v}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(v){o.prototype[v]=function(){return null}});function w(v,i){v.currentElement?v.currentElement.appendChild(i):v.doc.appendChild(i)}A.__DOMHandler=o,A.DOMParser=u,A.DOMImplementation=b.DOMImplementation,A.XMLSerializer=b.XMLSerializer},function(X,A,d){var E=d(14).freeze;A.XML_ENTITIES=E({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),A.HTML_ENTITIES=E({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",times:"",divide:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",euro:"",trade:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:""}),A.entityMap=A.HTML_ENTITIES},function(X,A,d){var E=d(14).NAMESPACE,b=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=new RegExp("[\\-\\.0-9"+b.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),C=new RegExp("^"+b.source+f.source+"*(?::"+b.source+f.source+"*)?$"),T=0,_=1,r=2,e=3,u=4,t=5,o=6,s=7;function l(B,tt){this.message=B,this.locator=tt,Error.captureStackTrace&&Error.captureStackTrace(this,l)}l.prototype=new Error,l.prototype.name=l.name;function a(){}a.prototype={parse:function(B,tt,Z){var st=this.domBuilder;st.startDocument(),g(tt,tt={}),w(B,tt,Z,st,this.errorHandler),st.endDocument()}};function w(B,tt,Z,st,G){function ht($){if($>65535){$-=65536;var rt=55296+($>>10),mt=56320+($&1023);return String.fromCharCode(rt,mt)}else return String.fromCharCode($)}function W($){var rt=$.slice(1,-1);return rt in Z?Z[rt]:rt.charAt(0)==="#"?ht(parseInt(rt.substr(1).replace("x","0x"))):(G.error("entity not found:"+$),$)}function K($){if($>Ct){var rt=B.substring(Ct,$).replace(/&#?\w+;/g,W);wt&&ft(Ct),st.characters(rt,0,$-Ct),Ct=$}}function ft($,rt){for(;$>=at&&(rt=yt.exec(B));)lt=rt.index,at=lt+rt[0].length,wt.lineNumber++;wt.columnNumber=$-lt+1}for(var lt=0,at=0,yt=/.*(?:\r\n?|\n)|.*$/g,wt=st.locator,bt=[{currentNSMap:tt}],_t={},Ct=0;;){try{var Tt=B.indexOf("<",Ct);if(Tt<0){if(!B.substr(Ct).match(/^\s*$/)){var zt=st.doc,Bt=zt.createTextNode(B.substr(Ct));zt.appendChild(Bt),st.currentElement=Bt}return}switch(Tt>Ct&&K(Tt),B.charAt(Tt+1)){case"/":var n=B.indexOf(">",Tt+3),h=B.substring(Tt+2,n).replace(/[ \t\n\r]+$/g,""),j=bt.pop();n<0?(h=B.substring(Tt+2).replace(/[\s<].*/,""),G.error("end tag name: "+h+" is not complete:"+j.tagName),n=Tt+1+h.length):h.match(/\s</)&&(h=h.replace(/[\s<].*/,""),G.error("end tag name: "+h+" maybe not complete"),n=Tt+1+h.length);var U=j.localNSMap,R=j.tagName==h,P=R||j.tagName&&j.tagName.toLowerCase()==h.toLowerCase();if(P){if(st.endElement(j.uri,j.localName,h),U)for(var F in U)st.endPrefixMapping(F);R||G.fatalError("end tag name: "+h+" is not match the current start tagName:"+j.tagName)}else bt.push(j);n++;break;case"?":wt&&ft(Tt),n=y(B,Tt,st);break;case"!":wt&&ft(Tt),n=S(B,Tt,st,G);break;default:wt&&ft(Tt);var nt=new D,it=bt[bt.length-1].currentNSMap,n=i(B,Tt,nt,it,W,G),m=nt.length;if(!nt.closed&&I(B,n,nt.tagName,_t)&&(nt.closed=!0,Z.nbsp||G.warning("unclosed xml attribute")),wt&&m){for(var O=v(wt,{}),k=0;k<m;k++){var V=nt[k];ft(V.offset),V.locator=v(wt,{})}st.locator=O,p(nt,st,it)&&bt.push(nt),st.locator=wt}else p(nt,st,it)&&bt.push(nt);E.isHTML(nt.uri)&&!nt.closed?n=x(B,n,nt.tagName,W,st):n++}}catch($){if($ instanceof l)throw $;G.error("element parse error: "+$),n=-1}n>Ct?Ct=n:K(Math.max(Tt,Ct)+1)}}function v(B,tt){return tt.lineNumber=B.lineNumber,tt.columnNumber=B.columnNumber,tt}function i(B,tt,Z,st,G,ht){function W(wt,bt,_t){Z.attributeNames.hasOwnProperty(wt)&&ht.fatalError("Attribute "+wt+" redefined"),Z.addValue(wt,bt,_t)}for(var K,ft,lt=++tt,at=T;;){var yt=B.charAt(lt);switch(yt){case"=":if(at===_)K=B.slice(tt,lt),at=e;else if(at===r)at=e;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(at===e||at===_)if(at===_&&(ht.warning('attribute value must after "="'),K=B.slice(tt,lt)),tt=lt+1,lt=B.indexOf(yt,tt),lt>0)ft=B.slice(tt,lt).replace(/&#?\w+;/g,G),W(K,ft,tt-1),at=t;else throw new Error("attribute value no end '"+yt+"' match");else if(at==u)ft=B.slice(tt,lt).replace(/&#?\w+;/g,G),W(K,ft,tt),ht.warning('attribute "'+K+'" missed start quot('+yt+")!!"),tt=lt+1,at=t;else throw new Error('attribute value must after "="');break;case"/":switch(at){case T:Z.setTagName(B.slice(tt,lt));case t:case o:case s:at=s,Z.closed=!0;case u:case _:case r:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return ht.error("unexpected end of input"),at==T&&Z.setTagName(B.slice(tt,lt)),lt;case">":switch(at){case T:Z.setTagName(B.slice(tt,lt));case t:case o:case s:break;case u:case _:ft=B.slice(tt,lt),ft.slice(-1)==="/"&&(Z.closed=!0,ft=ft.slice(0,-1));case r:at===r&&(ft=K),at==u?(ht.warning('attribute "'+ft+'" missed quot(")!'),W(K,ft.replace(/&#?\w+;/g,G),tt)):((!E.isHTML(st[""])||!ft.match(/^(?:disabled|checked|selected)$/i))&&ht.warning('attribute "'+ft+'" missed value!! "'+ft+'" instead!!'),W(ft,ft,tt));break;case e:throw new Error("attribute value missed!!")}return lt;case"":yt=" ";default:if(yt<=" ")switch(at){case T:Z.setTagName(B.slice(tt,lt)),at=o;break;case _:K=B.slice(tt,lt),at=r;break;case u:var ft=B.slice(tt,lt).replace(/&#?\w+;/g,G);ht.warning('attribute "'+ft+'" missed quot(")!!'),W(K,ft,tt);case t:at=o;break}else switch(at){case r:Z.tagName,(!E.isHTML(st[""])||!K.match(/^(?:disabled|checked|selected)$/i))&&ht.warning('attribute "'+K+'" missed value!! "'+K+'" instead2!!'),W(K,K,tt),tt=lt,at=_;break;case t:ht.warning('attribute space is required"'+K+'"!!');case o:at=_,tt=lt;break;case e:at=u,tt=lt;break;case s:throw new Error("elements closed character '/' and '>' must be connected to")}}lt++}}function p(B,tt,Z){for(var st=B.tagName,G=null,yt=B.length;yt--;){var ht=B[yt],W=ht.qName,K=ht.value,wt=W.indexOf(":");if(wt>0)var ft=ht.prefix=W.slice(0,wt),lt=W.slice(wt+1),at=ft==="xmlns"&&lt;else lt=W,ft=null,at=W==="xmlns"&&"";ht.localName=lt,at!==!1&&(G==null&&(G={},g(Z,Z={})),Z[at]=G[at]=K,ht.uri=E.XMLNS,tt.startPrefixMapping(at,K))}for(var yt=B.length;yt--;){ht=B[yt];var ft=ht.prefix;ft&&(ft==="xml"&&(ht.uri=E.XML),ft!=="xmlns"&&(ht.uri=Z[ft||""]))}var wt=st.indexOf(":");wt>0?(ft=B.prefix=st.slice(0,wt),lt=B.localName=st.slice(wt+1)):(ft=null,lt=B.localName=st);var bt=B.uri=Z[ft||""];if(tt.startElement(bt,lt,st,B),B.closed){if(tt.endElement(bt,lt,st),G)for(ft in G)tt.endPrefixMapping(ft)}else return B.currentNSMap=Z,B.localNSMap=G,!0}function x(B,tt,Z,st,G){if(/^(?:script|textarea)$/i.test(Z)){var ht=B.indexOf("</"+Z+">",tt),W=B.substring(tt+1,ht);if(/[&<]/.test(W))return/^script$/i.test(Z)?(G.characters(W,0,W.length),ht):(W=W.replace(/&#?\w+;/g,st),G.characters(W,0,W.length),ht)}return tt+1}function I(B,tt,Z,st){var G=st[Z];return G==null&&(G=B.lastIndexOf("</"+Z+">"),G<tt&&(G=B.lastIndexOf("</"+Z)),st[Z]=G),G<tt}function g(B,tt){for(var Z in B)tt[Z]=B[Z]}function S(B,tt,Z,st){var G=B.charAt(tt+2);switch(G){case"-":if(B.charAt(tt+3)==="-"){var ht=B.indexOf("-->",tt+4);return ht>tt?(Z.comment(B,tt+4,ht-tt-4),ht+3):(st.error("Unclosed comment"),-1)}else return-1;default:if(B.substr(tt+3,6)=="CDATA["){var ht=B.indexOf("]]>",tt+9);return Z.startCDATA(),Z.characters(B,tt+9,ht-tt-9),Z.endCDATA(),ht+3}var W=c(B,tt),K=W.length;if(K>1&&/!doctype/i.test(W[0][0])){var ft=W[1][0],lt=!1,at=!1;K>3&&(/^public$/i.test(W[2][0])?(lt=W[3][0],at=K>4&&W[4][0]):/^system$/i.test(W[2][0])&&(at=W[3][0]));var yt=W[K-1];return Z.startDTD(ft,lt,at),Z.endDTD(),yt.index+yt[0].length}}return-1}function y(B,tt,Z){var st=B.indexOf("?>",tt);if(st){var G=B.substring(tt,st).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return G?(G[0].length,Z.processingInstruction(G[1],G[2]),st+2):-1}return-1}function D(){this.attributeNames={}}D.prototype={setTagName:function(B){if(!C.test(B))throw new Error("invalid tagName:"+B);this.tagName=B},addValue:function(B,tt,Z){if(!C.test(B))throw new Error("invalid attribute:"+B);this.attributeNames[B]=this.length,this[this.length++]={qName:B,value:tt,offset:Z}},length:0,getLocalName:function(B){return this[B].localName},getLocator:function(B){return this[B].locator},getQName:function(B){return this[B].qName},getURI:function(B){return this[B].uri},getValue:function(B){return this[B].value}};function c(B,tt){var Z,st=[],G=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(G.lastIndex=tt,G.exec(B);Z=G.exec(B);)if(st.push(Z),Z[1])return st}A.XMLReader=a,A.ParseError=l},function(X,A,d){Object.defineProperty(A,"__esModule",{value:!0}),A.createElement=E;function E(b){return document.createElementNS("http://www.w3.org/2000/svg",b)}A.default={createElement:E}},function(X,A,d){Object.defineProperty(A,"__esModule",{value:!0}),A.proxyMouse=E,A.clone=b,A.default={proxyMouse:E};function E(C,T){function _(t){for(var o=T.length-1;o>=0;o--){var s=T[o],l=t.clientX,a=t.clientY;if(t.touches&&t.touches.length&&(l=t.touches[0].clientX,a=t.touches[0].clientY),!!f(s,C,l,a)){s.dispatchEvent(b(t));break}}}if(C.nodeName==="iframe"||C.nodeName==="IFRAME")try{this.target=C.contentDocument}catch{this.target=C}else this.target=C;for(var r=["mouseup","mousedown","click","touchstart"],e=0;e<r.length;e++){var u=r[e];this.target.addEventListener(u,function(t){return _(t)},!1)}}function b(C){var T=Object.assign({},C,{bubbles:!1});try{return new MouseEvent(C.type,T)}catch{var _=document.createEvent("MouseEvents");return _.initMouseEvent(C.type,!1,T.cancelable,T.view,T.detail,T.screenX,T.screenY,T.clientX,T.clientY,T.ctrlKey,T.altKey,T.shiftKey,T.metaKey,T.button,T.relatedTarget),_}}function f(C,T,_,r){var e=T.getBoundingClientRect();function u(a,w,v){var i=a.top-e.top,p=a.left-e.left,x=i+a.height,I=p+a.width;return i<=v&&p<=w&&x>v&&I>w}var t=C.getBoundingClientRect();if(!u(t,_,r))return!1;for(var o=C.getClientRects(),s=0,l=o.length;s<l;s++)if(u(o[s],_,r))return!0;return!1}},function(X,A,d){var E=d(26),b=function(){return E.Date.now()};X.exports=b},function(X,A,d){(function(E){var b=typeof E=="object"&&E&&E.Object===Object&&E;X.exports=b}).call(this,d(17))},function(X,A,d){var E=d(54),b=d(19),f=d(56),C=NaN,T=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,r=/^0o[0-7]+$/i,e=parseInt;function u(t){if(typeof t=="number")return t;if(f(t))return C;if(b(t)){var o=typeof t.valueOf=="function"?t.valueOf():t;t=b(o)?o+"":o}if(typeof t!="string")return t===0?t:+t;t=E(t);var s=_.test(t);return s||r.test(t)?e(t.slice(2),s?2:8):T.test(t)?C:+t}X.exports=u},function(X,A,d){var E=d(55),b=/^\s+/;function f(C){return C&&C.slice(0,E(C)+1).replace(b,"")}X.exports=f},function(X,A){var d=/\s/;function E(b){for(var f=b.length;f--&&d.test(b.charAt(f)););return f}X.exports=E},function(X,A,d){var E=d(57),b=d(60),f="[object Symbol]";function C(T){return typeof T=="symbol"||b(T)&&E(T)==f}X.exports=C},function(X,A,d){var E=d(27),b=d(58),f=d(59),C="[object Null]",T="[object Undefined]",_=E?E.toStringTag:void 0;function r(e){return e==null?e===void 0?T:C:_&&_ in Object(e)?b(e):f(e)}X.exports=r},function(X,A,d){var E=d(27),b=Object.prototype,f=b.hasOwnProperty,C=b.toString,T=E?E.toStringTag:void 0;function _(r){var e=f.call(r,T),u=r[T];try{r[T]=void 0;var t=!0}catch{}var o=C.call(r);return t&&(e?r[T]=u:delete r[T]),o}X.exports=_},function(X,A){var d=Object.prototype,E=d.toString;function b(f){return E.call(f)}X.exports=b},function(X,A){function d(E){return E!=null&&typeof E=="object"}X.exports=d}]).default})})(Ee);var xe=Ee.exports;const Ke=be(xe),Qe=ye({__proto__:null,default:Ke},[xe]);export{Qe as e,Je as j};
